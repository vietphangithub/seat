(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s}));var r=n("uXP2"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(s){if(n)return null;throw s}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(l){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.e)(o.value,2),a=s[1],u=this.normalizeInstanceIdentifier(s[0]);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"6Uf2":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return mn}));var r,i=n("zIRd"),o=n("uXP2"),s=n("qOnz"),a=n("q/0M"),u=n("/6Yf"),c=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(s.G)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(s.A)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),l=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(s.i)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),h=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new c(e)}}catch(n){}return new l},f=h("localStorage"),d=h("sessionStorage"),p=new a.b("@firebase/database"),g=(r=1,function(){return r++}),y=function(t){var e=Object(s.F)(t),n=new s.d;n.update(e);var r=n.digest();return s.g.encodeByteArray(r)},m=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=m.apply(null,i):n+="object"==typeof i?Object(s.G)(i):i,n+=" "}return n},v=null,_=!0,b=function(t,e){Object(s.e)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(p.logLevel=a.a.VERBOSE,v=p.log.bind(p),e&&d.set("logging_enabled",!0)):"function"==typeof t?v=t:(v=null,d.remove("logging_enabled"))},w=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===v&&!0===d.get("logging_enabled")&&b(!0)),v){var n=m.apply(null,t);v(n)}},E=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];w.apply(void 0,Object(o.f)([t],e))}},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,Object(o.f)(t));p.error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,Object(o.f)(t));throw p.error(n),new Error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,Object(o.f)(t));p.warn(n)},O=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},I="[MIN_NAME]",x="[MAX_NAME]",A=function(t,e){if(t===e)return 0;if(t===I||e===x)return-1;if(e===I||t===x)return 1;var n=Q(t),r=Q(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},k=function(t,e){return t===e?0:t<e?-1:1},N=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(s.G)(e))},P=function(t){if("object"!=typeof t||null===t)return Object(s.G)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(s.G)(e[i]),r+=":",r+=P(t[e[i]]);return r+"}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function D(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var j,L,F,M,U,V,q,B,H,z,W=function(t){var e,n,r,i,o;Object(s.e)(!O(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(o=0;o<64;o+=8){var l=parseInt(u.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},G=new RegExp("^-?(0*)\\d{1,10}$"),Q=function(t){if(G.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},$=function(t){try{t()}catch(e){setTimeout((function(){throw T("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},K=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Y=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=A(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),X=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(s.E)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(s.E)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(s.E)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),Z=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(s.e)("string"==typeof t,"typeof type must == string"),Object(s.e)("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return D(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),J=function(t,e){var n=tt(t),r=n.namespace;return"firebase.com"===n.domain&&S(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&T("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Z(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new Y(n.pathString)}},tt=function(t){var e="",n="",r="",i="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(o.h)(t.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):T("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:s}},et=/[\[\].#$\/\u0000-\u001F\u007F]/,nt=/[\[\].#$\u0000-\u001F\u007F]/,rt=function(t){return"string"==typeof t&&0!==t.length&&!et.test(t)},it=function(t){return"string"==typeof t&&0!==t.length&&!nt.test(t)},ot=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!O(t)||t&&"object"==typeof t&&Object(s.i)(t,".sv")},st=function(t,e,n,r,i){i&&void 0===n||at(Object(s.m)(t,e,i),n,r)},at=function(t,e,n){var r=n instanceof Y?new X(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(O(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&Object(s.E)(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(D(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!rt(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),at(t,n,r),r.pop()})),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ut=function(t,e,n,r,i){if(!i||void 0!==n){var o=Object(s.m)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];D(n,(function(t,e){var n=new Y(t);if(at(o,e,r.child(n)),".priority"===n.getBack()&&!ot(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!rt(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Y.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,a)}},ct=function(t,e,n,r){if(!r||void 0!==n){if(O(n))throw new Error(Object(s.m)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ot(n))throw new Error(Object(s.m)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},lt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(s.m)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ht=function(t,e,n,r){if(!(r&&void 0===n||rt(n)))throw new Error(Object(s.m)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ft=function(t,e,n,r){if(!(r&&void 0===n||it(n)))throw new Error(Object(s.m)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},dt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ft(t,e,n,r)},pt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},gt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!rt(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),it(t)}(r))throw new Error(Object(s.m)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},yt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(s.m)(t,e,r)+"must be a boolean.")},mt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(s.H)("OnDisconnect.cancel",0,1,arguments.length),Object(s.I)("OnDisconnect.cancel",1,t,!0);var e=new s.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(s.H)("OnDisconnect.remove",0,1,arguments.length),pt("OnDisconnect.remove",this.path_),Object(s.I)("OnDisconnect.remove",1,t,!0);var e=new s.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(s.H)("OnDisconnect.set",1,2,arguments.length),pt("OnDisconnect.set",this.path_),st("OnDisconnect.set",1,t,this.path_,!1),Object(s.I)("OnDisconnect.set",2,e,!0);var n=new s.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(s.H)("OnDisconnect.setWithPriority",2,3,arguments.length),pt("OnDisconnect.setWithPriority",this.path_),st("OnDisconnect.setWithPriority",1,t,this.path_,!1),ct("OnDisconnect.setWithPriority",2,e,!1),Object(s.I)("OnDisconnect.setWithPriority",3,n,!0);var r=new s.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(s.H)("OnDisconnect.update",1,2,arguments.length),pt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ut("OnDisconnect.update",1,t,this.path_,!1),Object(s.I)("OnDisconnect.update",2,e,!0);var i=new s.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),vt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(s.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),_t=(j="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",L=0,F=[],function(t){var e,n=t===L;L=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=j.charAt(t%64),t=Math.floor(t/64);Object(s.e)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===F[e];e--)F[e]=0;F[e]++}else for(e=0;e<12;e++)F[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=j.charAt(F[e]);return Object(s.e)(20===i.length,"nextPushId: Length should be 20."),i}),bt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),wt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new bt(I,t),r=new bt(I,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return bt.MIN},t}(),Et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return M},set:function(t){M=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(s.f)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return bt.MIN},e.prototype.maxPost=function(){return new bt(x,M)},e.prototype.makePost=function(t,e){return Object(s.e)("string"==typeof t,"KeyIndex indexValue must always be a string."),new bt(t,M)},e.prototype.toString=function(){return".key"},e}(wt),Ct=new Et,St=function(t){return"number"==typeof t?"number:"+W(t):"string:"+t},Tt=function(t){if(t.isLeafNode()){var e=t.val();Object(s.e)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(s.i)(e,".sv"),"Priority must be a string or number.")}else Object(s.e)(t===U||t.isEmpty(),"priority of unexpected type.");Object(s.e)(t===U||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ot=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(s.e)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Tt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return V},set:function(t){V=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(s.e)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+St(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?W(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(s.e)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return Object(s.e)(i>=0,"Unknown leaf type: "+n),Object(s.e)(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),It=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return bt.MIN},e.prototype.maxPost=function(){return new bt(x,new Ot("[PRIORITY-POST]",B))},e.prototype.makePost=function(t,e){var n=q(t);return new bt(e,new Ot("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(wt)),xt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),At=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Nt.EMPTY_NODE,this.right=null!=o?o:Nt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Nt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Nt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),kt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new At(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Nt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,At.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,At.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new xt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new xt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new xt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new xt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new kt,t}(),Pt=Math.log(2),Rt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Pt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Dt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new At(s,o.node,At.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new At(s,o.node,At.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new At(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,At.BLACK):(a(h,At.BLACK),a(h,At.RED))}return o}(new Rt(t.length));return new Nt(r||e,o)},jt={},Lt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(s.e)(jt&&It,"ChildrenNode.ts has not been loaded"),H=H||new t({".priority":jt},{".priority":It})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(s.D)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Nt?e:null},t.prototype.hasIndex=function(t){return Object(s.i)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(s.e)(e!==Ct,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(bt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?Dt(i,e.getCompare()):jt;var l=e.toString(),h=Object(o.a)({},this.indexSet_);h[l]=e;var f=Object(o.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(s.B)(this.indexes_,(function(t,i){var o=Object(s.D)(r.indexSet_,i);if(Object(s.e)(o,"Missing index implementation for "+i),t===jt){if(o.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(bt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Dt(a,o.getCompare())}return jt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new bt(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(s.B)(this.indexes_,(function(t){if(t===jt)return t;var r=n.get(e.name);return r?t.remove(new bt(e.name,r)):t})),this.indexSet_)},t}();function Ft(t,e){return A(t.name,e.name)}function Mt(t,e){return A(t,e)}var Ut=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Tt(this.priorityNode_),this.children_.isEmpty()&&Object(s.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return z||(z=new t(new Nt(Mt),null,Lt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||z},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?z:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(s.e)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new bt(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?z:this.priorityNode_;return new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(s.e)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(It,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+St(this.getPriority().val())+":"),this.forEachChild(It,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new bt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new bt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new bt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,bt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,bt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Vt?-1:0},t.prototype.withIndex=function(e){if(e===Ct||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Ct||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(It),r=e.getIterator(It),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Ct?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Vt=new(function(t){function e(){return t.call(this,new Nt(Mt),Ut.EMPTY_NODE,Lt.Default)||this}return Object(o.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Ut.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Ut));function qt(t,e){if(void 0===e&&(e=null),null===t)return Ut.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(s.e)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Ot(t,qt(e));if(t instanceof Array){var n=Ut.EMPTY_NODE;return D(t,(function(e,r){if(Object(s.i)(t,e)&&"."!==e.substring(0,1)){var i=qt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(qt(e))}var r=[],i=!1;if(D(t,(function(t,e){if("."!==t.substring(0,1)){var n=qt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new bt(t,n)))}})),0===r.length)return Ut.EMPTY_NODE;var o=Dt(r,Ft,(function(t){return t.name}),Mt);if(i){var a=Dt(r,It.getCompare());return new Ut(o,qt(e),new Lt({".priority":a},{".priority":It}))}return new Ut(o,qt(e),Lt.Default)}Object.defineProperties(bt,{MIN:{value:new bt(I,Ut.EMPTY_NODE)},MAX:{value:new bt(x,Vt)}}),Et.__EMPTY_NODE=Ut.EMPTY_NODE,Ot.__childrenNodeConstructor=Ut,U=Vt,function(t){B=t}(Vt),function(t){q=t}(qt);var Bt,Ht=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return bt.MIN},e.prototype.maxPost=function(){return bt.MAX},e.prototype.makePost=function(t,e){var n=qt(t);return new bt(e,n)},e.prototype.toString=function(){return".value"},e}(wt)),zt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(s.e)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=qt(t),r=Ut.EMPTY_NODE.updateChild(this.indexPath_,n);return new bt(e,r)},e.prototype.maxPost=function(){var t=Ut.EMPTY_NODE.updateChild(this.indexPath_,Vt);return new bt(x,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(wt),Wt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(s.H)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(s.H)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(s.H)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(s.H)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(s.H)("DataSnapshot.child",0,1,arguments.length),e=String(e),ft("DataSnapshot.child",1,e,!1);var n=new Y(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,It)},t.prototype.hasChild=function(t){Object(s.H)("DataSnapshot.hasChild",1,1,arguments.length),ft("DataSnapshot.hasChild",1,t,!1);var e=new Y(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(s.H)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(s.H)("DataSnapshot.forEach",1,1,arguments.length),Object(s.I)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),It))}))},t.prototype.hasChildren=function(){return Object(s.H)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(s.H)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(s.H)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Gt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(s.G)(this.snapshot.exportVal())},t}(),Qt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),$t=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Gt("value",this,new Wt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(s.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Qt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Kt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(s.i)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Qt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(s.e)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Gt(t.type,this,new Wt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(s.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Yt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(s.e)(Bt,"Reference.ts has not been loaded"),Bt},set:function(t){Bt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ct){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==I)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==x)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===It){if(null!=e&&!ot(e)||null!=n&&!ot(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(s.e)(t.getIndex()instanceof zt||t.getIndex()===Ht,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(s.H)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(s.H)("Query.on",2,4,arguments.length),lt("Query.on",1,e,!1),Object(s.I)("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new $t(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Kt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(s.H)("Query.off",0,3,arguments.length),lt("Query.off",1,t,!0),Object(s.I)("Query.off",2,e,!0),Object(s.J)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new $t(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Kt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;Object(s.H)("Query.once",1,4,arguments.length),lt("Query.once",1,e,!1),Object(s.I)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new s.a;c.promise.catch((function(){}));var l=function(t){u&&(u=!1,o.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,(function(t){o.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(Object(s.H)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(s.H)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(s.H)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ft("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new Y(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new zt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(s.H)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Ct);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(s.H)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(It);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(s.H)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Ht);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(s.H)("Query.startAt",0,2,arguments.length),st("Query.startAt",1,e,this.path,!0),ht("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(s.H)("Query.endAt",0,2,arguments.length),st("Query.endAt",1,e,this.path,!0),ht("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(s.H)("Query.equalTo",1,2,arguments.length),st("Query.equalTo",1,t,this.path,!1),ht("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(s.H)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(s.H)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=P(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(s.H)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(s.I)(t,3,r.cancel,!0),r.context=n,Object(s.J)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(s.m)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Xt=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Zt=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),Jt=function(t,e,n){return t&&"object"==typeof t?(Object(s.e)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?te(t[".sv"],e,n):"object"==typeof t[".sv"]?ee(t[".sv"],e):void Object(s.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},te=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(s.e)(!1,"Unexpected server value: "+t)}},ee=function(t,e,n){t.hasOwnProperty("increment")||Object(s.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(s.e)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(s.e)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},ne=function(t,e,n,r){return ie(e,new Zt(n,t),r)},re=function(t,e,n){return ie(t,new Xt(e),n)};function ie(t,e,n){var r,i=t.getPriority().val(),o=Jt(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=Jt(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Ot(a,qt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Ot(o))),u.forEachChild(It,(function(t,i){var o=ie(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var oe,se,ae=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(It,(function(t,e){n.remember(new Y(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new Y(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}(),ue=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),ce=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(s.e)(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),le=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ue.ACK_USER_WRITE,this.source=ce.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(s.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Y(e));return new t(Y.Empty,n,this.revert)}return Object(s.e)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),he=function(){function t(t,e){void 0===e&&(oe||(oe=new Nt(k)),e=oe),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return D(e,(function(t,e){n=n.set(new Y(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Y.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new Y(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(Y.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Y.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Y.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(Y.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),fe=function(){function t(t,e){this.source=t,this.path=e,this.type=ue.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Y.Empty):new t(this.source,this.path.popFront())},t}(),de=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ue.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Y.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),pe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ue.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new Y(e));return n.isEmpty()?null:n.value?new de(this.source,Y.Empty,n.value):new t(this.source,Y.Empty,n)}return Object(s.e)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ge=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ye=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new ge(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new ge(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new ge(Ut.EMPTY_NODE,!1,!1),new ge(Ut.EMPTY_NODE,!1,!1)),t}(),me=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),ve=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){Object(s.e)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(me.childRemovedChange(e,a)):Object(s.e)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(me.childAddedChange(e,n)):o.trackChildChange(me.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(It,(function(t,r){e.hasChild(t)||n.trackChildChange(me.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(It,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(me.childChangedChange(e,r,i))}else n.trackChildChange(me.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Ut.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),_e=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(s.e)(e===me.CHILD_ADDED||e===me.CHILD_CHANGED||e===me.CHILD_REMOVED,"Only child changes supported for tracking"),Object(s.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===me.CHILD_ADDED&&i===me.CHILD_REMOVED)this.changeMap.set(n,me.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===me.CHILD_REMOVED&&i===me.CHILD_ADDED)this.changeMap.delete(n);else if(e===me.CHILD_REMOVED&&i===me.CHILD_CHANGED)this.changeMap.set(n,me.childRemovedChange(n,r.oldSnap));else if(e===me.CHILD_CHANGED&&i===me.CHILD_ADDED)this.changeMap.set(n,me.childAddedChange(n,t.snapshotNode));else{if(e!==me.CHILD_CHANGED||i!==me.CHILD_CHANGED)throw Object(s.f)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,me.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),be=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),we=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ge(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Ee=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Ce=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(s.e)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(s.e)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,a,u=new _e;if(n.type===ue.OVERWRITE){var c=n;c.source.fromUser?o=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(s.e)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),o=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===ue.MERGE){var l=n;l.source.fromUser?o=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(s.e)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===ue.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==ue.LISTEN_COMPLETE)throw Object(s.f)("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,o,f),new Ee(o,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(me.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(s.e)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof Ut?c:Ut.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){Object(s.e)(1===e.getLength(),"Can't have a priority with additional path components");var d=o.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):o.getNode()}else{var g=e.popFront(),y=void 0;if(o.isCompleteForChild(f)){u=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),u);y=null!=m?o.getNode().getImmediateChild(f).updateChild(g,m):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());a=null!=y?this.filter_.updateChild(o.getNode(),f,y,g,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),d=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,be,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),g=new we(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new we(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),d=void 0;if(h.isEmpty())d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):Ut.EMPTY_NODE}if(f.equals(d))s=t;else{var g=this.filter_.updateChild(u.getNode(),l,d,h,c,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:he.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new Y(e),h,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new Y(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=he.Empty;return a.getNode().forEachChild(Ct,(function(t,e){u=u.set(new Y(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=he.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,be,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new we(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(s.e)(h instanceof Ut,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=e.getFront(),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Ut.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Y.Empty),t.updateEventSnap(c,o,this.filter_.filtersNodes())},t}(),Se=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===me.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(me.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,me.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,me.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,me.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,me.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,me.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(s.f)("Should only compare child_ events.");var n=new bt(t.childName,t.snapshotNode),r=new bt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Te=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new ve(n.getIndex()),i=n.getNodeFilter();this.processor_=new Ce(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Ut.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Ut.EMPTY_NODE,s.getNode(),null),c=new ge(a,o.isFullyInitialized(),r.filtersNodes()),l=new ge(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new ye(l,c),this.eventGenerator_=new Se(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(s.e)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===ue.MERGE&&null!==t.source.queryId&&(Object(s.e)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(s.e)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(s.e)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(It,(function(t,e){n.push(me.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(me.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),Oe=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(s.e)(se,"Reference.ts has not been loaded"),se},set:function(t){Object(s.e)(!se,"__referenceConstructor has already been defined"),se=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(s.e)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(o.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Ut?(a=n.calcCompleteEventChildren(r),u=!1):(a=Ut.EMPTY_NODE,u=!1);var c=new ye(new ge(a,u,!1),new ge(r,i,!1));s=new Te(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(o.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=Object(o.e)(f.value,2),g=p[0];c=c.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(g),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(y){i={error:y}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}else(d=this.views.get(a))&&(c=c.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(o.h)(this.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=Object(o.h)(this.views.values()),s=i.next();!s.done;s=i.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(o.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Ie=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new he(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Y.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new he(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return D(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,he.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Y.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(It,(function(e,n){t.push(new bt(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new bt(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new he(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(Object(s.e)(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(e.child(n),o,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}(Y.Empty,this.writeTree_,t)},t.Empty=new t(new he(null)),t}(),xe=function(){function t(){this.visibleWrites_=Ie.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Ae(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(s.e)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(s.e)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));Object(s.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(o=!0)),a--}return!!i&&(o?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):D(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(Y.Empty)?t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e).apply(n||Ut.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite(Y.Empty)?a.apply(n||Ut.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Ut.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(It,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(It,(function(t,e){var r=i.childCompoundWrite(new Y(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(s.e)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(Y.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Y.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Ie.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,u=void 0;if(o.snap)n.contains(a)?(u=Y.relativePath(n,a),r=r.addWrite(u,o.snap)):a.contains(n)&&(u=Y.relativePath(a,n),r=r.addWrite(Y.Empty,o.snap.getChild(u)));else{if(!o.children)throw Object(s.f)("WriteRecord should have .snap or .children");if(n.contains(a))u=Y.relativePath(n,a),r=r.addWrites(u,o.children);else if(a.contains(n))if((u=Y.relativePath(a,n)).isEmpty())r=r.addWrites(Y.Empty,o.children);else{var c=Object(s.D)(o.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite(Y.Empty,l)}}}}}return r},t}(),Ae=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),ke=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=he.Empty,this.pendingWriteTree_=new xe,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new de(ce.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=he.fromObject(e);return this.applyOperationToSyncPoints_(new pe(ce.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=he.Empty;return null!=n.snap?r=r.set(Y.Empty,!0):D(n.children,(function(t,e){r=r.set(new Y(t),e)})),this.applyOperationToSyncPoints_(new le(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new de(ce.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=he.fromObject(e);return this.applyOperationToSyncPoints_(new pe(ce.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new fe(ce.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Y.relativePath(s,e),c=new de(ce.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Y.relativePath(s,e),c=he.fromObject(n),l=new pe(ce.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=Y.relativePath(o,e),u=new fe(ce.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=Y.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var a,u=this.syncPointTree_.get(r);u?(o=o||u.hasCompleteView(),i=i||u.getCompleteServerCache(Y.Empty)):(u=new Oe,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Ut.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(Y.Empty);n&&(i=i.updateImmediateChild(t,n))})));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(s.e)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,a);if(!c&&!o){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var g=d[p],y=g.getQuery(),m=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),m.hashFn,m.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=Y.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),D(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(s.e)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),D(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Ut.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(s.e)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Y(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(s.e)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Y.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Y.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Y.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(Y.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Y.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),Ne=function(){function t(){this.rootNode_=Ut.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Pe=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(s.i)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(s.k)(this.counters_)},t}(),Re=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Pe),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),De=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(o.a)({},t);return this.last_&&D(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),je=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new De(t);var n=1e4+2e4*Math.random();K(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;D(e,(function(e,i){i>0&&Object(s.i)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),K(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Le=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Fe(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Fe=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();v&&w("event: "+e.toString()),$(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Me=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(s.e)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(o.f)(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(s.e)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Ue=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(s.e)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Me),Ve=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(s.u)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(s.e)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Me),qe=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&$((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Be=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=E(t),this.stats_=Re.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new qe(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(s.w)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new He((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,5),i=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=s,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,2),i=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(s.w)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(s.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(s.h)(e),r=R(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(s.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(s.G)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),He=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(s.w)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=g(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){w("frame writing exception"),u.stack&&w(u.stack),w(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||w("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(s.w)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){w("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),ze="";function We(t){ze=t}var Ge=null;"undefined"!=typeof MozWebSocket?Ge=MozWebSocket:"undefined"!=typeof WebSocket&&(Ge=WebSocket);var Qe=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=E(this.connId),this.stats_=Re.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(s.w)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if(Object(s.w)()){var r={headers:{"User-Agent":"Firebase/5/"+ze+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,o=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;o&&(r.proxy={origin:o}),this.mySock=new Ge(this.connURL,[],r)}else this.mySock=new Ge(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ge&&!t.forceDisallow_},t.previouslyFailed=function(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){f.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(s.A)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(s.e)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(s.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),$e=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Be,Qe]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=Qe&&Qe.isAvailable(),s=i&&!Qe.previouslyFailed();if(e.webSocketOnly&&(i||T("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Qe];else{var a=this.transports_=[];try{for(var u=Object(o.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Ke=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=E("c:"+this.id+":"),this.transportManager_=new $e(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=K((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=N("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?C("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&T("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),K((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):K((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Ye=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Xe=function(t){function e(n,r,i,o,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=o,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=E("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingPutCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(s.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Ue.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Ve.getInstance().on("online",l.onOnline_,l),l}return Object(o.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(s.G)(i)),Object(s.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Object(s.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(s.e)(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(s.i)(t,"w")){var n=Object(s.D)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();T("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(s.o)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(s.z)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(s.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(s.G)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):C("Unrecognized action received from server: "+Object(s.G)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(s.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(s.e)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(t){c?w("getToken() completed but was canceled"):(w("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new Ke(o,a.repoInfo_,a.applicationId_,n,r,i,(function(t){T(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),u))})).then(null,(function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&T(e),h())}))}},e.prototype.interrupt=function(t){w("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){w("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(s.s)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return P(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Y(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){w("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=Object(o.h)(this.listens.values()),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(s.w)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+ze.replace(/\./g,"-")]=1,Object(s.u)()?t["framework.cordova"]=1:Object(s.x)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Ve.getInstance().currentlyOnline();return Object(s.s)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Ye),Ze=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=E("p:rest:"),i.listens_={},i}return Object(o.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(s.e)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),Object(s.D)(o.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(s.C)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(s.A)(u.responseText)}catch(e){T("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&T("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()}))},e}(Ye),Je=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Le,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ae,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Re.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new Ze(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(s.G)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new Xe(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=Re.getOrCreateReporter(this.repoInfo_,(function(){return new je(t.stats_,t.server_)})),this.transactionsInit_(),this.infoData_=new Ne,this.infoSyncTree_=new ke({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new ke({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Y(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Y(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=Object(s.B)(e,(function(t){return qt(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=qt(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(s.B)(e,(function(t){return qt(t)}));o=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=qt(e);o=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;D(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new Y("/.info/"+t),r=qt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=qt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=re(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||T("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(D(e,(function(e,n){i=!1,s[e]=ne(t.child(e),qt(n),r.serverSyncTree_,o)})),i)w("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||T("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),D(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new ae;this.onDisconnect_.forEachTree(Y.Empty,(function(r,i){var o=ne(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(Y.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new ae,this.eventQueue_.raiseEventsForChangedPath(Y.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=qt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=qt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(s.s)(e))return w("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&D(e,(function(e,n){var i=qt(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new De(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);D(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),w.apply(void 0,Object(o.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&$((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new fn(this))},enumerable:!1,configurable:!0}),t}(),tn=function(){function t(e){this.indexedFilter_=new ve(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new bt(e,n))||(n=Ut.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Ut.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Ut.EMPTY_NODE);var i=this;return e.forEachChild(It,(function(t,e){i.matches(new bt(t,e))||(r=r.updateImmediateChild(t,Ut.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),en=function(){function t(t){this.rangedFilter_=new tn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new bt(e,n))||(n=Ut.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Ut.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Ut.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Ut.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Ut.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var u=t;Object(s.e)(u.numChildren()===this.limit_,"");var c=new bt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:o(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(me.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(me.childRemovedChange(e,f));var g=u.updateImmediateChild(e,Ut.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(me.childAddedChange(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&o(l,c)>=0?(null!=i&&(i.trackChildChange(me.childRemovedChange(l.name,l.node)),i.trackChildChange(me.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Ut.EMPTY_NODE)):t},t}(),nn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=It}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(s.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(s.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(s.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(s.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:x},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(s.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==It&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===It},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new ve(this.getIndex()):this.hasLimit()?new en(this):new tn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===It?e=n.PRIORITY_INDEX:this.index_===Ht?e=n.VALUE_INDEX:this.index_===Ct?e=n.KEY_INDEX:(Object(s.e)(this.index_ instanceof zt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(s.G)(e),this.startSet_&&(r[n.START_AT]=Object(s.G)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(s.G)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(s.G)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(s.G)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),rn=function(t){function e(e,n){if(!(e instanceof Je))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,nn.DEFAULT,!1)||this}return Object(o.c)(e,t),e.prototype.getKey=function(){return Object(s.H)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(s.H)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Y||(null===this.path.getFront()?dt("Reference.child",1,t,!1):ft("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(s.H)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(s.H)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(s.H)("Reference.set",1,2,arguments.length),pt("Reference.set",this.path),st("Reference.set",1,t,this.path,!1),Object(s.I)("Reference.set",2,e,!0);var n=new s.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(s.H)("Reference.update",1,2,arguments.length),pt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ut("Reference.update",1,t,this.path,!1),Object(s.I)("Reference.update",2,e,!0);var i=new s.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(s.H)("Reference.setWithPriority",2,3,arguments.length),pt("Reference.setWithPriority",this.path),st("Reference.setWithPriority",1,t,this.path,!1),ct("Reference.setWithPriority",2,e,!1),Object(s.I)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new s.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(s.H)("Reference.remove",0,1,arguments.length),pt("Reference.remove",this.path),Object(s.I)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(s.H)("Reference.transaction",1,3,arguments.length),pt("Reference.transaction",this.path),Object(s.I)("Reference.transaction",1,t,!1),Object(s.I)("Reference.transaction",2,e,!0),yt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new s.a;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new vt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(s.H)("Reference.setPriority",1,2,arguments.length),pt("Reference.setPriority",this.path),ct("Reference.setPriority",1,t,!1),Object(s.I)("Reference.setPriority",2,e,!0);var n=new s.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(s.H)("Reference.push",0,2,arguments.length),pt("Reference.push",this.path),st("Reference.push",1,t,this.path,!0),Object(s.I)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=_t(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return pt("Reference.onDisconnect",this.path),new mt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Yt);Yt.__referenceConstructor=rn,Oe.__referenceConstructor=rn;var on=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),sn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new on),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof Y?e:new Y(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,Object(s.D)(r.node_.children,i)||new on),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(s.e)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;D(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new Y(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(s.i)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),an=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});Je.MAX_TRANSACTION_RETRIES_=25,Je.prototype.transactionsInit_=function(){this.transactionQueueTree_=new sn},Je.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new rn(this,t);o.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:g(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new Wt(a.currentInputSnapshot,new rn(this,a.path),It);a.onComplete(null,!1,l)}}else{at("transaction failed: Data returned ",c,a.path),a.status=an.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var d=void 0;"object"==typeof c&&null!==c&&Object(s.i)(c,".priority")?(d=Object(s.D)(c,".priority"),Object(s.e)(ot(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||Ut.EMPTY_NODE).getPriority().val(),d=d;var p=this.generateServerValues(),y=qt(c,d),m=re(y,u,p);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(t,m,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_()}},Je.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Ut.EMPTY_NODE},Je.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(s.e)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===an.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},Je.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(s.e)(c.status===an.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=an.SENT,c.retryCount++;var l=Y.relativePath(t,c.path);o=o.updateChild(l,c.currentOutputSnapshotRaw)}var h=o.val(!0),f=t;this.server_.put(f.toString(),h,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=an.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new rn(n,e[s].path),c=new Wt(a,u,It);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)$(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===an.SENT_NEEDS_ABORT?an.NEEDS_ABORT:an.RUN;else for(T("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=an.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}}),a)},Je.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Je.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===an.RUN})).map((function(t){return t.currentWriteId})),o=0;o<t.length;o++){var a=t[o],u=Y.relativePath(e,a.path),c=!1,l=void 0;if(Object(s.e)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===an.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===an.RUN)if(a.retryCount>=Je.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[o].update(h.val());if(void 0!==f){at("transaction failed: Data returned ",f,a.path);var d=qt(f);"object"==typeof f&&null!=f&&Object(s.i)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=a.currentWriteId,g=this.generateServerValues(),y=re(d,h,g);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[o].status=an.COMPLETED,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete))if("nodata"===l){var m=new rn(this,t[o].path),v=new Wt(t[o].currentInputSnapshot,m,It);n.push(t[o].onComplete.bind(null,null,!1,v))}else n.push(t[o].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),o=0;o<n.length;o++)$(n[o]);this.sendReadyTransactions_()}},Je.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},Je.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},Je.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},Je.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==an.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},Je.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},Je.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===an.SENT_NEEDS_ABORT||(e[o].status===an.SENT?(Object(s.e)(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=an.SENT_NEEDS_ABORT,e[o].abortReason="set"):(Object(s.e)(e[o].status===an.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)$(n[o])}};var un,cn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(w("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';T(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),ln=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),hn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return un||(un=new t),un},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=Object(o.h)(Object.keys(this.repos_)),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=Object(o.h)(Object.keys(this.repos_)),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new Z(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new ln)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||S("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),w("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=J(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=J(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new ln:new cn(t,e);return gt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||S("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(s.D)(this.repos_,t.app.name);e&&Object(s.D)(e,t.key)===t||S("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(s.D)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(s.D)(r,t.toURLString());return i&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Je(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),fn=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(o.b)(e,void 0,void 0,(function(){return Object(o.d)(this,(function(t){return this.checkDeleted_("delete"),hn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof Je||S("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new rn(this.repo_,Y.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?S("Cannot call useEmulator() after instance has already been initialized."):hn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(s.H)("database.ref",0,1,arguments.length),t instanceof rn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(s.H)(e,1,1,arguments.length);var n=J(t,this.repo_.repoInfo_.nodeAdmin);gt(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||S(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&S("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(s.H)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(s.H)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),dn=Object.freeze({__proto__:null,forceLongPolling:function(){Qe.forceDisallow(),Be.forceAllow()},forceWebSockets:function(){Be.forceDisallow()},isWebSocketsAvailable:function(){return Qe.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;We(t.version);var a=new u.c("auth-internal",new u.b("database-standalone"));return a.setComponent(new u.a("auth-internal",(function(){return r}),"PRIVATE")),{instance:hn.getInstance().databaseFromApp(e,a,n,s),namespace:i}}}),pn=Xe;Xe.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Xe.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var gn=Object.freeze({__proto__:null,DataConnection:pn,RealTimeConnection:Ke,hijackHash:function(t){var e=Xe.prototype.put;return Xe.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Xe.prototype.put=e}},ConnectionTarget:Z,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){hn.getInstance().forceRestClient(t)}}),yn=fn.ServerValue;function mn(e){We(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new u.a("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return hn.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:rn,Query:Yt,Database:fn,DataSnapshot:Wt,enableLogging:b,INTERNAL:dn,ServerValue:yn,TEST_ACCESS:gn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.7.1"),Object(s.w)()&&(t.exports=n)}mn(i.a)}).call(this,n("3UD+")(t))},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return d}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return S})),n.d(e,"c",(function(){return C})),n.d(e,"d",(function(){return F})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"i",(function(){return P})),n.d(e,"j",(function(){return M})),n.d(e,"k",(function(){return l})),n.d(e,"l",(function(){return h})),n.d(e,"m",(function(){return B})),n.d(e,"n",(function(){return d})),n.d(e,"o",(function(){return N})),n.d(e,"p",(function(){return y})),n.d(e,"q",(function(){return m})),n.d(e,"r",(function(){return _})),n.d(e,"s",(function(){return D})),n.d(e,"t",(function(){return b})),n.d(e,"u",(function(){return p})),n.d(e,"v",(function(){return g})),n.d(e,"w",(function(){return E})),n.d(e,"x",(function(){return v})),n.d(e,"y",(function(){return w})),n.d(e,"z",(function(){return k})),n.d(e,"A",(function(){return I})),n.d(e,"B",(function(){return j})),n.d(e,"C",(function(){return L})),n.d(e,"D",(function(){return R})),n.d(e,"E",(function(){return G})),n.d(e,"F",(function(){return W})),n.d(e,"G",(function(){return x})),n.d(e,"H",(function(){return q})),n.d(e,"I",(function(){return H})),n.d(e,"J",(function(){return z}));var r=n("uXP2"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function m(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _(){return d().indexOf("Electron/")>=0}function b(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function E(){return!1}var C=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return Object(r.c)(e,t),e}(Error),S=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?T(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new C(i,a,r);return u},t}();function T(t,e){return t.replace(O,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var O=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var A=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},k=function(t){var e=A(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},N=function(t){var e=A(t).claims;return"object"==typeof e&&!0===e.admin};function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function D(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function j(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function L(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var F=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function M(t,e){var n=new U(t,e);return n.subscribe.bind(n)}var U=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function V(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function B(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(B(t,e,r)+"must be a valid function.")}function z(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(B(t,e,r)+"must be a valid context object.")}var W=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},uXP2:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return h}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},xsWp:function(t,e,n){"use strict";n.r(e),n.d(e,"__PRIVATE_registerFirestore",(function(){return vf}));var r=n("uXP2"),i=n("zIRd"),o=n("q/0M"),s=n("qOnz"),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var c,l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},h=h||{},f=l||self;function d(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function g(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var m="closure_uid_"+(1e9*Math.random()>>>0),v=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:b).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var C=Date.now;function S(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function T(){this.j=this.j,this.i=this.i}T.prototype.j=!1,T.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++v)}(this)},T.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var O=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},I=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function x(t){return Array.prototype.concat.apply([],arguments)}function A(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function k(t){return/^[\s\xa0]*$/.test(t)}var N,P=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function R(t,e){return-1!=t.indexOf(e)}function D(t,e){return t<e?-1:t>e?1:0}t:{var j=f.navigator;if(j){var L=j.userAgent;if(L){N=L;break t}}N=""}function F(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function M(t){var e={};for(var n in t)e[n]=t[n];return e}var U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<U.length;o++)n=U[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function q(t){return q[" "](t),t}q[" "]=d;var B,H,z=R(N,"Opera"),W=R(N,"Trident")||R(N,"MSIE"),G=R(N,"Edge"),Q=G||W,$=R(N,"Gecko")&&!(R(N.toLowerCase(),"webkit")&&!R(N,"Edge"))&&!(R(N,"Trident")||R(N,"MSIE"))&&!R(N,"Edge"),K=R(N.toLowerCase(),"webkit")&&!R(N,"Edge");function Y(){var t=f.document;return t?t.documentMode:void 0}t:{var X="",Z=(H=N,$?/rv:([^\);]+)(\)|;)/.exec(H):G?/Edge\/([\d\.]+)/.exec(H):W?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(H):K?/WebKit\/(\S+)/.exec(H):z?/(?:Version)[ \/]?(\S+)/.exec(H):void 0);if(Z&&(X=Z?Z[1]:""),W){var J=Y();if(null!=J&&J>parseFloat(X)){B=String(J);break t}}B=X}var tt={};function et(t){return function(t,e){var n=tt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=P(String(B)).split("."),r=P(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=D(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||D(0==s[2].length,0==a[2].length)||D(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var nt=f.document&&W&&(Y()||parseInt(B,10))||void 0,rt=!W||9<=Number(nt),it=W&&!et("9"),ot=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{f.addEventListener("test",d,e),f.removeEventListener("test",d,e)}catch(n){}return t}();function st(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function at(t,e){if(st.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if($){t:{try{q(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ut[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}st.prototype.b=function(){this.defaultPrevented=!0},S(at,st);var ut={2:"touch",3:"pen",4:"mouse"};at.prototype.b=function(){at.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,it)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(sr){}};var ct="closure_listenable_"+(1e6*Math.random()|0),lt=0;function ht(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++lt,this.Y=this.Z=!1}function ft(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function dt(t){this.src=t,this.a={},this.b=0}function pt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=O(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ft(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function gt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}dt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=gt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ht(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var yt="closure_lm_"+(1e6*Math.random()|0),mt={};function vt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Ot(r),e&&e[ct]?e.wa(n,r,y(i)?!!i.capture:!!i,o):_t(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)vt(t,e[o],n,r,i);return null}return n=Ot(n),t&&t[ct]?t.va(e,n,y(r)?!!r.capture:!!r,i):_t(t,e,n,!1,r,i)}function _t(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=y(i)?!!i.capture:!!i;if(s&&!rt)return null;var a=St(t);if(a||(t[yt]=a=new dt(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Ct,e=rt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ot||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(wt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function bt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ct])pt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(wt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=St(e))?(pt(n,t),0==n.b&&(n.src=null,e[yt]=null)):ft(t)}}}function wt(t){return t in mt?mt[t]:mt[t]="on"+t}function Et(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&bt(t),n.call(r,e)}function Ct(t,e){if(t.Y)return!0;if(!rt){if(!e)t:{e=["window","event"];for(var n=f,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Et(t,e=new at(e,this))}return Et(t,new at(e,this))}function St(t){return(t=t[yt])instanceof dt?t:null}var Tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ot(t){return"function"==p(t)?t:(t[Tt]||(t[Tt]=function(e){return t.handleEvent(e)}),t[Tt])}function It(){T.call(this),this.c=new dt(this),this.J=this,this.C=null}function xt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&pt(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}S(It,T),It.prototype[ct]=!0,(c=It.prototype).addEventListener=function(t,e,n,r){vt(this,t,e,n,r)},c.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=y(i)?!!i.capture:!!i,r=Ot(r),e&&e[ct]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=gt(s=e.a[n],r,i,o))&&(ft(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=St(e))&&(n=e.a[n.toString()],e=-1,n&&(e=gt(n,r,i,o)),(r=-1<e?n[e]:null)&&bt(r))}(this,t,e,n,r)},c.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new st(t,n);else if(t instanceof st)t.target=t.target||n;else{var i=t;V(t=new st(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=xt(s,r,!0,t)&&i}if(i=xt(s=t.a=n,r,!0,t)&&i,i=xt(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=xt(s=t.a=e[o],r,!1,t)&&i;return i},c.G=function(){if(It.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ft(n[r]);delete e.a[t],e.b--}}this.C=null},c.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},c.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var At=f.JSON.stringify;function kt(){this.b=this.a=null}var Nt,Pt=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new Dt}),(function(t){t.reset()}),100);function Rt(){var t=Mt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Dt(){this.next=this.b=this.a=null}function jt(t){f.setTimeout((function(){throw t}),0)}function Lt(t,e){Nt||function(){var t=f.Promise.resolve(void 0);Nt=function(){t.then(Ut)}}(),Ft||(Nt(),Ft=!0),Mt.add(t,e)}kt.prototype.add=function(t,e){var n=Pt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Dt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Dt.prototype.reset=function(){this.next=this.b=this.a=null};var Ft=!1,Mt=new kt;function Ut(){for(var t;t=Rt();){try{t.a.call(t.b)}catch(n){jt(n)}var e=Pt;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Ft=!1}function Vt(t,e){It.call(this),this.b=t||1,this.a=e||f,this.f=w(this.Ya,this),this.g=C()}function qt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Bt(t,e,n){if("function"==p(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:f.setTimeout(t,e||0)}function Ht(t){t.a=Bt((function(){t.a=null,t.c&&(t.c=!1,Ht(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}S(Vt,It),(c=Vt.prototype).aa=!1,c.M=null,c.Ya=function(){if(this.aa){var t=C()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(qt(this),this.start()))}},c.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=C())},c.G=function(){Vt.S.G.call(this),qt(this),delete this.a};var zt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ht(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(f.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(T);function Wt(t){T.call(this),this.b=t,this.a={}}S(Wt,T);var Gt=[];function Qt(t,e,n,r){Array.isArray(n)||(n&&(Gt[0]=n.toString()),n=Gt);for(var i=0;i<n.length;i++){var o=vt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function $t(t){F(t.a,(function(t,e){this.a.hasOwnProperty(e)&&bt(t)}),t),t.a={}}function Kt(){this.a=!0}function Yt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return At(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}Wt.prototype.G=function(){Wt.S.G.call(this),$t(this)},Wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Kt.prototype.info=function(){};var Xt=null;function Zt(){return Xt=Xt||new It}function Jt(t){st.call(this,"serverreachability",t)}function te(t){var e=Zt();e.dispatchEvent(new Jt(e,t))}function ee(t){st.call(this,"statevent",t)}function ne(t){var e=Zt();e.dispatchEvent(new ee(e,t))}function re(t){st.call(this,"timingevent",t)}function ie(t,e){if("function"!=p(t))throw Error("Fn must not be null and must be a function");return f.setTimeout((function(){t()}),e)}S(Jt,st),S(ee,st),S(re,st);var oe={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},se={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function ae(){}function ue(){}ae.prototype.a=null;var ce,le={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function he(){st.call(this,"d")}function fe(){st.call(this,"c")}function de(){}function pe(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new Wt(this),this.P=ge,this.R=new Vt(t=Q?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}S(he,st),S(fe,st),S(de,ae),ce=new de;var ge=45e3,ye={},me={};function ve(t,e,n){t.H=1,t.i=Ve(De(e)),t.j=n,t.I=!0,_e(t,null)}function _e(t,e){t.u=C(),Ee(t),t.l=De(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),Je(n.b,"t",r),t.D=0,t.a=$n(t.g,t.g.C?e:null),0<t.O&&(t.F=new zt(w(t.Ca,t,t.a),t.O)),Qt(t.J,t.a,"readystatechange",t.Wa),e=t.B?M(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),te(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.T,t.j)}function be(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=we(t,n);if(i==me){4==e&&(t.h=4,ne(14),r=!1),Yt(t.c,t.f,null,"[Incomplete Response]");break}if(i==ye){t.h=4,ne(15),Yt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Yt(t.c,t.f,i,null),Ie(t,i)}4==e&&0==n.length&&(t.h=1,ne(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Vn(e),e.F=!0)):(Yt(t.c,t.f,n,"[Invalid Chunked Response]"),Oe(t),Te(t))}function we(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?me:(n=Number(e.substring(n,r)),isNaN(n)?ye:(r+=1)+n>e.length?me:(e=e.substr(r,n),t.D=r+n,e))}function Ee(t){t.U=C()+t.P,Ce(t,t.P)}function Ce(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ie(w(t.Ua,t),e)}function Se(t){t.o&&(f.clearTimeout(t.o),t.o=null)}function Te(t){0==t.g.v||t.A||Hn(t.g,t)}function Oe(t){Se(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,qt(t.R),$t(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ie(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||an(n.b,t)))if(n.I=t.N,!t.C&&an(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Bn(n),Nn(n)}Un(n),ne(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ie(w(n.Ra,n),6e3));if(1>=sn(n.b)&&n.ea){try{n.ea()}catch(y){}n.ea=void 0}}else Wn(n,11)}else if((t.C||n.a==t)&&Bn(n),!k(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(R(l,"spdy")||R(l,"quic")||R(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(un(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Ue(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=C()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Qn(u,u.C?u.ga:null,u.fa),d.C){cn(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(Se(p),Ee(p)),u.a=d}else Mn(u);0<n.g.length&&Dn(n)}else"stop"!=i[0]&&"close"!=i[0]||Wn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Wn(n,7):kn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);te(4)}catch(y){}}function xe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(g(t)||"string"==typeof t)I(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(g(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(g(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ae(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ae)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ke(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ne(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ne(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ne(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(c=pe.prototype).setTimeout=function(t){this.P=t},c.Wa=function(t){t=t.target;var e=this.F;e&&3==On(t)?e.f():this.Ca(t)},c.Ca=function(t){try{if(t==this.a)t:{var e=On(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!Q&&!this.a.$())){this.A||4!=e||7==n||te(8==n||0>=r?3:2),Se(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,ne(12),Oe(this),Te(this);break t}Yt(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ie(this,u)}this.I?(be(this,e,o),Q&&this.b&&3==e&&(Qt(this.J,this.R,"tick",this.Va),this.R.start())):(Yt(this.c,this.f,o,null),Ie(this,o)),4==e&&Oe(this),this.b&&!this.A&&(4==e?Hn(this.g,this):(this.b=!1,Ee(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ne(12)):(this.h=0,ne(13)),Oe(this),Te(this)}}}catch(c){}},c.Va=function(){if(this.a){var t=On(this.a),e=this.a.$();this.D<e.length&&(Se(this),be(this,t,e),this.b&&4!=t&&Ee(this))}},c.cancel=function(){this.A=!0,Oe(this)},c.Ua=function(){this.o=null;var t=C();0<=t-this.U?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(te(3),ne(17)),Oe(this),this.h=2,Te(this)):Ce(this,this.U-t)},(c=Ae.prototype).K=function(){ke(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},c.L=function(){return ke(this),this.a.concat()},c.get=function(t,e){return Ne(this.b,t)?this.b[t]:e},c.set=function(t,e){Ne(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},c.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Re(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Re){this.a=void 0!==e?e:t.a,je(this,t.f),this.j=t.j,Le(this,t.c),Fe(this,t.h),this.g=t.g,e=t.b;var n=new Ke;n.c=e.c,e.a&&(n.a=new Ae(e.a),n.b=e.b),Me(this,n),this.i=t.i}else t&&(n=String(t).match(Pe))?(this.a=!!e,je(this,n[1]||"",!0),this.j=qe(n[2]||""),Le(this,n[3]||"",!0),Fe(this,n[4]),this.g=qe(n[5]||"",!0),Me(this,n[6]||"",!0),this.i=qe(n[7]||"")):(this.a=!!e,this.b=new Ke(null,this.a))}function De(t){return new Re(t)}function je(t,e,n){t.f=n?qe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Le(t,e,n){t.c=n?qe(e,!0):e}function Fe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Me(t,e,n){e instanceof Ke?(t.b=e,function(t,e){e&&!t.f&&(Ye(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xe(this,e),Je(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Be(e,Qe)),t.b=new Ke(e,t.a))}function Ue(t,e,n){t.b.set(e,n)}function Ve(t){return Ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^C()).toString(36)),t}function qe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Be(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,He),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function He(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Re.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Be(e,ze,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Be(e,ze,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Be(n,"/"==n.charAt(0)?Ge:We,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Be(n,$e)),t.join("")};var ze=/[#\/\?@]/g,We=/[#\?:]/g,Ge=/[#\?]/g,Qe=/[#\?@]/g,$e=/#/g;function Ke(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ye(t){t.a||(t.a=new Ae,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xe(t,e){Ye(t),e=tn(t,e),Ne(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ne((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ke(t)))}function Ze(t,e){return Ye(t),e=tn(t,e),Ne(t.a.b,e)}function Je(t,e,n){Xe(t,e),0<n.length&&(t.c=null,t.a.set(tn(t,e),A(n)),t.b+=n.length)}function tn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function en(t,e){this.b=t,this.a=e}function nn(t){this.g=t||rn,t=f.PerformanceNavigationTiming?0<(t=f.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(f.ia&&f.ia.ya&&f.ia.ya()&&f.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(c=Ke.prototype).add=function(t,e){Ye(this),this.c=null,t=tn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},c.forEach=function(t,e){Ye(this),this.a.forEach((function(n,r){I(n,(function(n){t.call(e,n,r,this)}),this)}),this)},c.L=function(){Ye(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},c.K=function(t){Ye(this);var e=[];if("string"==typeof t)Ze(this,t)&&(e=x(e,this.a.get(tn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=x(e,t[n])}return e},c.set=function(t,e){return Ye(this),this.c=null,Ze(this,t=tn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},c.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},c.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var rn=10;function on(t){return!!t.b||!!t.a&&t.a.size>=t.f}function sn(t){return t.b?1:t.a?t.a.size:0}function an(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function un(t,e){t.a?t.a.add(e):t.b=e}function cn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ln(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=u(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return A(t.c)}function hn(){}function fn(){this.a=new hn}function dn(t,e,n){var r=n||"";try{xe(t,(function(t,n){var i=t;y(t)&&(i=At(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function pn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}nn.prototype.cancel=function(){var t,e;if(this.c=ln(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=u(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},hn.prototype.stringify=function(t){return f.JSON.stringify(t,void 0)},hn.prototype.parse=function(t){return f.JSON.parse(t,void 0)};var gn=f.JSON.parse;function yn(t){It.call(this),this.headers=new Ae,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=mn,this.D=this.F=!1}S(yn,It);var mn="",vn=/^https?$/i,_n=["POST","PUT"];function bn(t){return"content-type"==t.toLowerCase()}function wn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,En(t),Sn(t)}function En(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Cn(t){if(t.b&&void 0!==h&&(!t.s[1]||4!=On(t)||2!=t.X()))if(t.l&&4==On(t))Bt(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==On(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Pe)[1]||null;if(!o&&f.self&&f.self.location){var s=f.self.location.protocol;o=s.substr(0,s.length-1)}i=!vn.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<On(t)?t.a.statusText:""}catch(u){a=""}t.f=a+" ["+t.X()+"]",En(t)}}finally{Sn(t)}}}function Sn(t,e){if(t.a){Tn(t);var n=t.a,r=t.s[0]?d:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function Tn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(f.clearTimeout(t.m),t.m=null)}function On(t){return t.a?t.a.readyState:0}function In(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return F(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ue(t,e,n))}function xn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function An(t){this.pa=0,this.g=[],this.c=new Kt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=xn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=xn("baseRetryDelayMs",5e3,t),this.Ma=xn("retryDelaySeedMs",1e4,t),this.Ja=xn("forwardChannelMaxRetries",2,t),this.ma=xn("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new nn(t&&t.concurrentRequestLimit),this.ka=new fn,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function kn(t){if(Pn(t),3==t.v){var e=t.R++,n=De(t.B);Ue(n,"SID",t.J),Ue(n,"RID",e),Ue(n,"TYPE","terminate"),Ln(t,n),(e=new pe(t,t.c,e,void 0)).H=2,e.i=Ve(De(n)),n=!1,f.navigator&&f.navigator.sendBeacon&&(n=f.navigator.sendBeacon(e.i.toString(),"")),!n&&f.Image&&((new Image).src=e.i,n=!0),n||(e.a=$n(e.g,null),e.a.ba(e.i)),e.u=C(),Ee(e)}Gn(t)}function Nn(t){t.a&&(Vn(t),t.a.cancel(),t.a=null)}function Pn(t){Nn(t),t.j&&(f.clearTimeout(t.j),t.j=null),Bn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&f.clearTimeout(t.h),t.h=null)}function Rn(t,e){t.g.push(new en(t.La++,e)),3==t.v&&Dn(t)}function Dn(t){on(t.b)||t.h||(t.h=!0,Lt(t.Ba,t),t.u=0)}function jn(t,e){var n;n=e?e.f:t.R++;var r=De(t.B);Ue(r,"SID",t.J),Ue(r,"RID",n),Ue(r,"AID",t.P),Ln(t,r),t.i&&t.l&&In(r,t.i,t.l),n=new pe(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Fn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),un(t.b,n),ve(n,r,e)}function Ln(t,e){t.f&&xe({},(function(t,n){Ue(e,n,t)}))}function Fn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?w(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{dn(l,s,"req"+c+"_")}catch(Ar){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Mn(t){t.a||t.j||(t.U=1,Lt(t.Aa,t),t.o=0)}function Un(t){return!(t.a||t.j||3<=t.o||(t.U++,t.j=ie(w(t.Aa,t),zn(t,t.o)),t.o++,0))}function Vn(t){null!=t.s&&(f.clearTimeout(t.s),t.s=null)}function qn(t){t.a=new pe(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=De(t.la);Ue(e,"RID","rpc"),Ue(e,"SID",t.J),Ue(e,"CI",t.H?"0":"1"),Ue(e,"AID",t.P),Ln(t,e),Ue(e,"TYPE","xmlhttp"),t.i&&t.l&&In(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ve(De(e)),n.j=null,n.I=!0,_e(n,t)}function Bn(t){null!=t.m&&(f.clearTimeout(t.m),t.m=null)}function Hn(t,e){var n=null;if(t.a==e){Bn(t),Vn(t),t.a=null;var r=2}else{if(!an(t.b,e))return;n=e.s,cn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=C()-e.u;var i=t.u;(r=Zt()).dispatchEvent(new re(r,n,e,i)),Dn(t)}else Mn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(sn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)||(t.h=ie(w(t.Ba,t,e),zn(t,t.u)),t.u++,0)))}(t,e)||2==r&&Un(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Wn(t,5);break;case 4:Wn(t,10);break;case 3:Wn(t,6);break;default:Wn(t,2)}}function zn(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function Wn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=w(t.Xa,t);n||(n=new Re("//www.google.com/images/cleardot.gif"),f.location&&"http"==f.location.protocol||je(n,"https"),Ve(n)),function(t,e){var n=new Kt;if(f.Image){var r=new Image;r.onload=E(pn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=E(pn,n,r,"TestLoadImage: error",!1,e),r.onabort=E(pn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=E(pn,n,r,"TestLoadImage: timeout",!1,e),f.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ne(2);t.v=0,t.f&&t.f.ra(e),Gn(t),Pn(t)}function Gn(t){t.v=0,t.I=-1,t.f&&(0==ln(t.b).length&&0==t.g.length||(t.b.c.length=0,A(t.g),t.g.length=0),t.f.qa())}function Qn(t,e,n){var r=function(t){return t instanceof Re?De(t):new Re(t,void 0)}(n);if(""!=r.c)e&&Le(r,e+"."+r.c),Fe(r,r.h);else{var i=f.location;r=function(t,e,n,r){var i=new Re(null,void 0);return t&&je(i,t),e&&Le(i,e),n&&Fe(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&F(t.W,(function(t,e){Ue(r,e,t)})),n=t.na,(e=t.A)&&n&&Ue(r,e,n),Ue(r,"VER",t.ha),Ln(t,r),r}function $n(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new yn(t.Ka)).F=t.C,e}function Kn(){}function Yn(){if(W&&!(10<=Number(nt)))throw Error("Environmental error: no available transport.")}function Xn(t,e){It.call(this),this.a=new An(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!k(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!k(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new tr(this)}function Zn(t){he.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Jn(){fe.call(this),this.status=1}function tr(t){this.a=t}(c=yn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:ce),this.a.onreadystatechange=w(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void wn(this,o)}t=n||"";var i=new Ae(this.headers);r&&xe(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=bn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=f.FormData&&t instanceof f.FormData,!(0<=O(_n,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Tn(this),0<this.o&&((this.D=function(t){return W&&et(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=w(this.xa,this)):this.m=Bt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){wn(this,o)}},c.xa=function(){void 0!==h&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},c.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Sn(this))},c.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Sn(this,!0)),yn.S.G.call(this)},c.za=function(){this.j||(this.A||this.l||this.g?Cn(this):this.Ta())},c.Ta=function(){Cn(this)},c.X=function(){try{return 2<On(this)?this.a.status:-1}catch(H){return-1}},c.$=function(){try{return this.a?this.a.responseText:""}catch(H){return""}},c.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),gn(e)}},c.ua=function(){return this.h},c.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(c=An.prototype).ha=8,c.v=1,c.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new pe(this,this.c,t,void 0),r=this.l;if(this.O&&(r?V(r=M(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Fn(this,n,e),Ue(i=De(this.B),"RID",t),Ue(i,"CVER",22),this.A&&Ue(i,"X-HTTP-Session-Id",this.A),Ln(this,i),this.i&&r&&In(i,this.i,r),un(this.b,n),this.Ga&&Ue(i,"TYPE","init"),this.da?(Ue(i,"$req",e),Ue(i,"SID","null"),n.V=!0,ve(n,i,null)):ve(n,i,e),this.v=2}}else 3==this.v&&(t?jn(this,t):0==this.g.length||on(this.b)||jn(this))},c.Aa=function(){if(this.j=null,qn(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ie(w(this.Sa,this),t)}},c.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Nn(this),qn(this))},c.Ra=function(){null!=this.m&&(this.m=null,Nn(this),Un(this),ne(19))},c.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),ne(2)):(this.c.info("Failed to ping google.com"),ne(1))},(c=Kn.prototype).ta=function(){},c.sa=function(){},c.ra=function(){},c.qa=function(){},c.Ha=function(){},Yn.prototype.a=function(t,e){return new Xn(t,e)},S(Xn,It),(c=Xn.prototype).addEventListener=function(t,e,n,r){Xn.S.addEventListener.call(this,t,e,n,r)},c.removeEventListener=function(t,e,n,r){Xn.S.removeEventListener.call(this,t,e,n,r)},c.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;ne(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Qn(t,null,t.fa),Dn(t)},c.close=function(){kn(this.a)},c.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,Rn(this.a,e)}else this.g?((e={}).__data__=At(t),Rn(this.a,e)):Rn(this.a,t)},c.G=function(){this.a.f=null,delete this.f,kn(this.a),delete this.a,Xn.S.G.call(this)},S(Zn,he),S(Jn,fe),S(tr,Kn),tr.prototype.ta=function(){this.a.dispatchEvent("a")},tr.prototype.sa=function(t){this.a.dispatchEvent(new Zn(t))},tr.prototype.ra=function(t){this.a.dispatchEvent(new Jn(t))},tr.prototype.qa=function(){this.a.dispatchEvent("b")},Yn.prototype.createWebChannel=Yn.prototype.a,Xn.prototype.send=Xn.prototype.Pa,Xn.prototype.open=Xn.prototype.Oa,Xn.prototype.close=Xn.prototype.close,oe.NO_ERROR=0,oe.TIMEOUT=8,oe.HTTP_ERROR=6,se.COMPLETE="complete",ue.EventType=le,le.OPEN="a",le.CLOSE="b",le.ERROR="c",le.MESSAGE="d",It.prototype.listen=It.prototype.va,yn.prototype.listenOnce=yn.prototype.wa,yn.prototype.getLastError=yn.prototype.Qa,yn.prototype.getLastErrorCode=yn.prototype.ua,yn.prototype.getStatus=yn.prototype.X,yn.prototype.getResponseJson=yn.prototype.Na,yn.prototype.getResponseText=yn.prototype.$,yn.prototype.send=yn.prototype.ba;var er=oe,nr=se,rr=ue,ir=yn,or=n("/6Yf"),sr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ar=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(r.c)(e,t),e}(Error),ur=new o.b("@firebase/firestore");function cr(){return ur.logLevel}function lr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ur.logLevel<=o.a.DEBUG){var i=e.map(dr);ur.debug.apply(ur,Object(r.g)(["Firestore (8.0.1): "+t],i))}}function hr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ur.logLevel<=o.a.ERROR){var i=e.map(dr);ur.error.apply(ur,Object(r.g)(["Firestore (8.0.1): "+t],i))}}function fr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ur.logLevel<=o.a.WARN){var i=e.map(dr);ur.warn.apply(ur,Object(r.g)(["Firestore (8.0.1): "+t],i))}}function dr(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function pr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.0.1) INTERNAL ASSERTION FAILED: "+t;throw hr(e),new Error(e)}function gr(t,e){t||pr()}function yr(t,e){return t}function mr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var vr=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=mr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function _r(t,e){return t<e?-1:t>e?1:0}function br(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function wr(t){return t+"\0"}var Er=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.i)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return _r(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();Er.h=new Er("");var Cr=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(Er.fromBase64String(e))}catch(e){throw new ar(sr.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Er.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}();function Sr(){if("undefined"==typeof Uint8Array)throw new ar(sr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Tr(){if("undefined"==typeof atob)throw new ar(sr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Or=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.fromBase64String=function(t){Tr();try{return new e(Er.fromBase64String(t))}catch(t){throw new ar(sr.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){return Sr(),new e(Er.fromUint8Array(t))},e.prototype.toBase64=function(){return Tr(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return Sr(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Cr),Ir=function(t,e,n,r,i,o){this._=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.T=o},xr=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"I",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.u=function(t){return _r(this.projectId,t.projectId)||_r(this.database,t.database)},t}();function Ar(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function kr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Nr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Pr=function(){function t(t,e){this.m=t,this.A=e,this.R={}}return t.prototype.get=function(t){var e=this.m(t),n=this.R[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.A(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.m(t),r=this.R[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.A(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.R[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.m(t),n=this.R[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.A(n[r][0],t))return 1===n.length?delete this.R[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){kr(this.R,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.P=function(){return Nr(this.R)},t}(),Rr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ar(sr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ar(sr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ar(sr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ar(sr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.g=function(t){return this.seconds===t.seconds?_r(this.nanoseconds,t.nanoseconds):_r(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Dr=function(){function t(t){this.timestamp=t}return t.V=function(e){return new t(e)},t.min=function(){return new t(new Rr(0,0))},t.prototype.u=function(t){return this.timestamp.g(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.p=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.v=function(){return this.timestamp},t}(),jr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&pr(),void 0===n?n=t.length-e:n>t.length-e&&pr(),this.segments=t,this.offset=e,this.S=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.S},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.D(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.C(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.N=function(t){return this.C(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.F=function(){return this.C(this.segments,this.offset,this.length-1)},t.prototype.O=function(){return this.segments[this.offset]},t.prototype.k=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.P=function(){return 0===this.length},t.prototype.M=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.$=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.L=function(){return this.segments.slice(this.offset,this.limit())},t.D=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Lr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.C=function(t,n,r){return new e(t,n,r)},e.prototype.B=function(){return this.L().join("/")},e.prototype.toString=function(){return this.B()},e.q=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new ar(sr.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.U=function(){return new e([])},e}(jr),Fr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.C=function(t,n,r){return new e(t,n,r)},e.K=function(t){return Fr.test(t)},e.prototype.B=function(){return this.L().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.K(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.B()},e.prototype.W=function(){return 1===this.length&&"__name__"===this.get(0)},e.j=function(){return new e(["__name__"])},e.G=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new ar(sr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new ar(sr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ar(sr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ar(sr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.U=function(){return new e([])},e}(jr),Ur=function(){function t(t){this.path=t}return t.H=function(e){return new t(Lr.q(e))},t.Y=function(e){return new t(Lr.q(e).N(5))},t.prototype.J=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Lr.D(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.D=function(t,e){return Lr.D(t.path,e.path)},t.X=function(t){return t.length%2==0},t.Z=function(e){return new t(new Lr(e.slice()))},t}();function Vr(t){return null==t}function qr(t){return 0===t&&1/t==-1/0}function Br(t){return"number"==typeof t&&Number.isInteger(t)&&!qr(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Hr=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.tt=null};function zr(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Hr(t,e,n,r,i,o,s)}function Wr(t){var e=yr(t);if(null===e.tt){var n=e.path.B();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.B()+t.op.toString()+ji(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.B()+e.dir;var e})).join(","),Vr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Fs(e.startAt)),e.endAt&&(n+="|ub:",n+=Fs(e.endAt)),e.tt=n}return e.tt}function Gr(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Bs(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Ni(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Us(t.startAt,e.startAt)&&Us(t.endAt,e.endAt)}function Qr(t){return Ur.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}var $r,Kr,Yr=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Dr.min()),void 0===o&&(o=Dr.min()),void 0===s&&(s=Er.h),this.target=t,this.targetId=e,this.et=n,this.sequenceNumber=r,this.nt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.st=function(e){return new t(this.target,this.targetId,this.et,e,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.it=function(e,n){return new t(this.target,this.targetId,this.et,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.rt=function(e){return new t(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,e,this.resumeToken)},t}(),Xr=function(t){this.count=t};function Zr(t){switch(t){case sr.OK:return pr();case sr.CANCELLED:case sr.UNKNOWN:case sr.DEADLINE_EXCEEDED:case sr.RESOURCE_EXHAUSTED:case sr.INTERNAL:case sr.UNAVAILABLE:case sr.UNAUTHENTICATED:return!1;case sr.INVALID_ARGUMENT:case sr.NOT_FOUND:case sr.ALREADY_EXISTS:case sr.PERMISSION_DENIED:case sr.FAILED_PRECONDITION:case sr.ABORTED:case sr.OUT_OF_RANGE:case sr.UNIMPLEMENTED:case sr.DATA_LOSS:return!0;default:return pr()}}function Jr(t){if(void 0===t)return hr("GRPC error has no .code"),sr.UNKNOWN;switch(t){case $r.OK:return sr.OK;case $r.CANCELLED:return sr.CANCELLED;case $r.UNKNOWN:return sr.UNKNOWN;case $r.DEADLINE_EXCEEDED:return sr.DEADLINE_EXCEEDED;case $r.RESOURCE_EXHAUSTED:return sr.RESOURCE_EXHAUSTED;case $r.INTERNAL:return sr.INTERNAL;case $r.UNAVAILABLE:return sr.UNAVAILABLE;case $r.UNAUTHENTICATED:return sr.UNAUTHENTICATED;case $r.INVALID_ARGUMENT:return sr.INVALID_ARGUMENT;case $r.NOT_FOUND:return sr.NOT_FOUND;case $r.ALREADY_EXISTS:return sr.ALREADY_EXISTS;case $r.PERMISSION_DENIED:return sr.PERMISSION_DENIED;case $r.FAILED_PRECONDITION:return sr.FAILED_PRECONDITION;case $r.ABORTED:return sr.ABORTED;case $r.OUT_OF_RANGE:return sr.OUT_OF_RANGE;case $r.UNIMPLEMENTED:return sr.UNIMPLEMENTED;case $r.DATA_LOSS:return sr.DATA_LOSS;default:return pr()}}(Kr=$r||($r={}))[Kr.OK=0]="OK",Kr[Kr.CANCELLED=1]="CANCELLED",Kr[Kr.UNKNOWN=2]="UNKNOWN",Kr[Kr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kr[Kr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kr[Kr.NOT_FOUND=5]="NOT_FOUND",Kr[Kr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kr[Kr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kr[Kr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kr[Kr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kr[Kr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kr[Kr.ABORTED=10]="ABORTED",Kr[Kr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kr[Kr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kr[Kr.INTERNAL=13]="INTERNAL",Kr[Kr.UNAVAILABLE=14]="UNAVAILABLE",Kr[Kr.DATA_LOSS=15]="DATA_LOSS";var ti=function(){function t(t,e){this.D=t,this.root=e||ni.EMPTY}return t.prototype.ot=function(e,n){return new t(this.D,this.root.ot(e,n,this.D).copy(null,null,ni.at,null,null))},t.prototype.remove=function(e){return new t(this.D,this.root.remove(e,this.D).copy(null,null,ni.at,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.P();){var n=this.D(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.P();){var r=this.D(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.P=function(){return this.root.P()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(){return this.root.ut()},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.forEach=function(t){this.ht((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ht((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.lt=function(t){return this.root.lt(t)},t.prototype._t=function(){return new ei(this.root,null,this.D,!1)},t.prototype.ft=function(t){return new ei(this.root,t,this.D,!1)},t.prototype.dt=function(){return new ei(this.root,null,this.D,!0)},t.prototype.wt=function(t){return new ei(this.root,t,this.D,!0)},t}(),ei=function(){function t(t,e,n,r){this.Et=r,this.Tt=[];for(var i=1;!t.P();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Et?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.Et?t.right:t.left}}return t.prototype.It=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.Et)for(t=t.left;!t.P();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.P();)this.Tt.push(t),t=t.left;return e},t.prototype.At=function(){return this.Tt.length>0},t.prototype.Rt=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},t}(),ni=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.P=function(){return!1},t.prototype.ht=function(t){return this.left.ht(t)||t(this.key,this.value)||this.right.ht(t)},t.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},t.prototype.min=function(){return this.left.P()?this:this.left.min()},t.prototype.ct=function(){return this.min().key},t.prototype.ut=function(){return this.right.P()?this.key:this.right.ut()},t.prototype.ot=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.ot(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.ot(t,e,n))).Pt()},t.prototype.gt=function(){if(this.left.P())return t.EMPTY;var e=this;return e.left.yt()||e.left.left.yt()||(e=e.Vt()),(e=e.copy(null,null,null,e.left.gt(),null)).Pt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.P()||i.left.yt()||i.left.left.yt()||(i=i.Vt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.yt()&&(i=i.bt()),i.right.P()||i.right.yt()||i.right.left.yt()||(i=i.vt()),0===n(e,i.key)){if(i.right.P())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.gt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Pt()},t.prototype.yt=function(){return this.color},t.prototype.Pt=function(){var t=this;return t.right.yt()&&!t.left.yt()&&(t=t.St()),t.left.yt()&&t.left.left.yt()&&(t=t.bt()),t.left.yt()&&t.right.yt()&&(t=t.Dt()),t},t.prototype.Vt=function(){var t=this.Dt();return t.right.left.yt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.bt())).St()).Dt()),t},t.prototype.vt=function(){var t=this.Dt();return t.left.left.yt()&&(t=(t=t.bt()).Dt()),t},t.prototype.St=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Dt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ct=function(){var t=this.Nt();return Math.pow(2,t)<=this.size+1},t.prototype.Nt=function(){if(this.yt()&&this.left.yt())throw pr();if(this.right.yt())throw pr();var t=this.left.Nt();if(t!==this.right.Nt())throw pr();return t+(this.yt()?0:1)},t}();ni.EMPTY=null,ni.RED=!0,ni.at=!1,ni.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw pr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.ot=function(t,e,n){return new ni(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.P=function(){return!0},t.prototype.ht=function(t){return!1},t.prototype.lt=function(t){return!1},t.prototype.ct=function(){return null},t.prototype.ut=function(){return null},t.prototype.yt=function(){return!1},t.prototype.Ct=function(){return!0},t.prototype.Nt=function(){return 0},t}());var ri=function(){function t(t){this.D=t,this.data=new ti(this.D)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ct()},t.prototype.last=function(){return this.data.ut()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ht((function(e,n){return t(e),!1}))},t.prototype.xt=function(t,e){for(var n=this.data.ft(t[0]);n.At();){var r=n.It();if(this.D(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ft=function(t,e){var n;for(n=void 0!==e?this.data.ft(e):this.data._t();n.At();)if(!t(n.It().key))return},t.prototype.Ot=function(t){var e=this.data.ft(t);return e.At()?e.It().key:null},t.prototype._t=function(){return new ii(this.data._t())},t.prototype.ft=function(t){return new ii(this.data.ft(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.P=function(){return this.data.P()},t.prototype.kt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data._t(),r=e.data._t();n.At();){var i=n.It().key,o=r.It().key;if(0!==this.D(i,o))return!1}return!0},t.prototype.L=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.D);return n.data=e,n},t}(),ii=function(){function t(t){this.Mt=t}return t.prototype.It=function(){return this.Mt.It().key},t.prototype.At=function(){return this.Mt.At()},t}(),oi=new ti(Ur.D);function si(){return oi}function ai(){return si()}var ui=new ti(Ur.D);function ci(){return ui}var li=new ti(Ur.D),hi=new ri(Ur.D);function fi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=hi,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var di=new ri(_r);function pi(){return di}var gi=function(){function t(t){this.D=t?function(e,n){return t(e,n)||Ur.D(e.key,n.key)}:function(t,e){return Ur.D(t.key,e.key)},this.$t=ci(),this.Lt=new ti(this.D)}return t.Bt=function(e){return new t(e.D)},t.prototype.has=function(t){return null!=this.$t.get(t)},t.prototype.get=function(t){return this.$t.get(t)},t.prototype.first=function(){return this.Lt.ct()},t.prototype.last=function(){return this.Lt.ut()},t.prototype.P=function(){return this.Lt.P()},t.prototype.indexOf=function(t){var e=this.$t.get(t);return e?this.Lt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Lt.ht((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.$t.ot(t.key,t),e.Lt.ot(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.$t.remove(t),this.Lt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Lt._t(),r=e.Lt._t();n.At();){var i=n.It().key,o=r.It().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.D=this.D,r.$t=e,r.Lt=n,r},t}(),yi=function(){function t(){this.qt=new ti(Ur.D)}return t.prototype.track=function(t){var e=t.doc.key,n=this.qt.get(e);n?0!==t.type&&3===n.type?this.qt=this.qt.ot(e,t):3===t.type&&1!==n.type?this.qt=this.qt.ot(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.qt=this.qt.ot(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.qt=this.qt.remove(e):1===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):pr():this.qt=this.qt.ot(e,t)},t.prototype.Ut=function(){var t=[];return this.qt.ht((function(e,n){t.push(n)})),t},t}(),mi=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Kt=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Wt=s,this.jt=a}return t.Gt=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,gi.Bt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Qt.P()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Wt===t.Wt&&this.Qt.isEqual(t.Qt)&&Es(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Kt.isEqual(t.Kt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),vi=function(){function t(t,e,n,r,i){this.nt=t,this.zt=e,this.Ht=n,this.Yt=r,this.Jt=i}return t.Xt=function(e,n){var r=new Map;return r.set(e,_i.Zt(e,n)),new t(Dr.min(),r,pi(),si(),fi())},t}(),_i=function(){function t(t,e,n,r,i){this.resumeToken=t,this.te=e,this.ee=n,this.ne=r,this.se=i}return t.Zt=function(e,n){return new t(Er.h,n,fi(),fi(),fi())},t}(),bi=function(t,e,n,r){this.ie=t,this.removedTargetIds=e,this.key=n,this.re=r},wi=function(t,e){this.targetId=t,this.oe=e},Ei=function(t,e,n,r){void 0===n&&(n=Er.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ci=function(){function t(){this.ae=0,this.ce=Oi(),this.ue=Er.h,this.he=!1,this.le=!0}return Object.defineProperty(t.prototype,"te",{get:function(){return this.he},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),t.prototype.de=function(t){t.o()>0&&(this.le=!0,this.ue=t)},t.prototype.we=function(){var t=fi(),e=fi(),n=fi();return this.ce.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:pr()}})),new _i(this.ue,this.he,t,e,n)},t.prototype.Ee=function(){this.le=!1,this.ce=Oi()},t.prototype.Te=function(t,e){this.le=!0,this.ce=this.ce.ot(t,e)},t.prototype.Ie=function(t){this.le=!0,this.ce=this.ce.remove(t)},t.prototype.me=function(){this.ae+=1},t.prototype.Ae=function(){this.ae-=1},t.prototype.Re=function(){this.le=!0,this.he=!0},t}(),Si=function(){function t(t){this.Pe=t,this.ge=new Map,this.ye=si(),this.Ve=Ti(),this.pe=new ri(_r)}return t.prototype.be=function(t){for(var e=0,n=t.ie;e<n.length;e++){var r=n[e];t.re instanceof ss?this.ve(r,t.re):t.re instanceof as&&this.Se(r,t.key,t.re)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Se(o[i],t.key,t.re)},t.prototype.De=function(t){var e=this;this.Ce(t,(function(n){var r=e.Ne(n);switch(t.state){case 0:e.xe(n)&&r.de(t.resumeToken);break;case 1:r.Ae(),r._e||r.Ee(),r.de(t.resumeToken);break;case 2:r.Ae(),r._e||e.removeTarget(n);break;case 3:e.xe(n)&&(r.Re(),r.de(t.resumeToken));break;case 4:e.xe(n)&&(e.Fe(n),r.de(t.resumeToken));break;default:pr()}}))},t.prototype.Ce=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ge.forEach((function(t,r){n.xe(r)&&e(r)}))},t.prototype.Oe=function(t){var e=t.targetId,n=t.oe.count,r=this.ke(e);if(r){var i=r.target;if(Qr(i))if(0===n){var o=new Ur(i.path);this.Se(e,o,new as(o,Dr.min()))}else gr(1===n);else this.Me(e)!==n&&(this.Fe(e),this.pe=this.pe.add(e))}},t.prototype.$e=function(t){var e=this,n=new Map;this.ge.forEach((function(r,i){var o=e.ke(i);if(o){if(r.te&&Qr(o.target)){var s=new Ur(o.target.path);null!==e.ye.get(s)||e.Le(i,s)||e.Se(i,s,new as(s,t))}r.fe&&(n.set(i,r.we()),r.Ee())}}));var r=fi();this.Ve.forEach((function(t,n){var i=!0;n.Ft((function(t){var n=e.ke(t);return!n||2===n.et||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new vi(t,n,this.pe,this.ye,r);return this.ye=si(),this.Ve=Ti(),this.pe=new ri(_r),i},t.prototype.ve=function(t,e){if(this.xe(t)){var n=this.Le(t,e.key)?2:0;this.Ne(t).Te(e.key,n),this.ye=this.ye.ot(e.key,e),this.Ve=this.Ve.ot(e.key,this.Be(e.key).add(t))}},t.prototype.Se=function(t,e,n){if(this.xe(t)){var r=this.Ne(t);this.Le(t,e)?r.Te(e,1):r.Ie(e),this.Ve=this.Ve.ot(e,this.Be(e).delete(t)),n&&(this.ye=this.ye.ot(e,n))}},t.prototype.removeTarget=function(t){this.ge.delete(t)},t.prototype.Me=function(t){var e=this.Ne(t).we();return this.Pe.qe(t).size+e.ee.size-e.se.size},t.prototype.me=function(t){this.Ne(t).me()},t.prototype.Ne=function(t){var e=this.ge.get(t);return e||(e=new Ci,this.ge.set(t,e)),e},t.prototype.Be=function(t){var e=this.Ve.get(t);return e||(e=new ri(_r),this.Ve=this.Ve.ot(t,e)),e},t.prototype.xe=function(t){var e=null!==this.ke(t);return e||lr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ke=function(t){var e=this.ge.get(t);return e&&e._e?null:this.Pe.Ue(t)},t.prototype.Fe=function(t){var e=this;this.ge.set(t,new Ci),this.Pe.qe(t).forEach((function(n){e.Se(t,n,null)}))},t.prototype.Le=function(t,e){return this.Pe.qe(t).has(e)},t}();function Ti(){return new ti(Ur.D)}function Oi(){return new ti(Ur.D)}function Ii(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function xi(t){var e=Li(t.mapValue.fields.__local_write_time__.timestampValue);return new Rr(e.seconds,e.nanos)}var Ai=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ki(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ii(t)?4:10:pr()}function Ni(t,e){var n=ki(t);if(n!==ki(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xi(t).isEqual(xi(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Li(t.timestampValue),r=Li(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Mi(t.bytesValue).isEqual(Mi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Fi(t.geoPointValue.latitude)===Fi(e.geoPointValue.latitude)&&Fi(t.geoPointValue.longitude)===Fi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Fi(t.integerValue)===Fi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Fi(t.doubleValue),r=Fi(e.doubleValue);return n===r?qr(n)===qr(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return br(t.arrayValue.values||[],e.arrayValue.values||[],Ni);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ar(n)!==Ar(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ni(n[i],r[i])))return!1;return!0}(t,e);default:return pr()}}function Pi(t,e){return void 0!==(t.values||[]).find((function(t){return Ni(t,e)}))}function Ri(t,e){var n=ki(t),r=ki(e);if(n!==r)return _r(n,r);switch(n){case 0:return 0;case 1:return _r(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Fi(t.integerValue||t.doubleValue),r=Fi(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Di(t.timestampValue,e.timestampValue);case 4:return Di(xi(t),xi(e));case 5:return _r(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Mi(t),r=Mi(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=_r(n[i],r[i]);if(0!==o)return o}return _r(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=_r(Fi(t.latitude),Fi(e.latitude));return 0!==n?n:_r(Fi(t.longitude),Fi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ri(n[i],r[i]);if(o)return o}return _r(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=_r(r[s],o[s]);if(0!==a)return a;var u=Ri(n[r[s]],i[o[s]]);if(0!==u)return u}return _r(r.length,o.length)}(t.mapValue,e.mapValue);default:throw pr()}}function Di(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return _r(t,e);var n=Li(t),r=Li(e),i=_r(n.seconds,r.seconds);return 0!==i?i:_r(n.nanos,r.nanos)}function ji(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=Li(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Mi(e.bytesValue).toBase64():"referenceValue"in e?Ur.Y(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):pr();var n}(t)}function Li(t){if(gr(!!t),"string"==typeof t){var e=0,n=Ai.exec(t);if(gr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Fi(t.seconds),nanos:Fi(t.nanos)}}function Fi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Mi(t){return"string"==typeof t?Er.fromBase64String(t):Er.fromUint8Array(t)}function Ui(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.B()}}function Vi(t){return!!t&&"integerValue"in t}function qi(t){return!!t&&"arrayValue"in t}function Bi(t){return!!t&&"nullValue"in t}function Hi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zi(t){return!!t&&"mapValue"in t}var Wi={asc:"ASCENDING",desc:"DESCENDING"},Gi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qi=function(t,e){this._=t,this.Ke=e};function $i(t){return{integerValue:""+t}}function Ki(t,e){if(t.Ke){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qr(e)?"-0":e}}function Yi(t,e){return Br(e)?$i(e):Ki(t,e)}function Xi(t,e){return t.Ke?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zi(t,e){return t.Ke?e.toBase64():e.toUint8Array()}function Ji(t,e){return Xi(t,e.v())}function to(t){return gr(!!t),Dr.V(function(t){var e=Li(t);return new Rr(e.seconds,e.nanos)}(t))}function eo(t,e){return function(t){return new Lr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).B()}function no(t){var e=Lr.q(t);return gr(So(e)),e}function ro(t,e){return eo(t._,e.path)}function io(t,e){var n=no(e);return gr(n.get(1)===t._.projectId),gr(!n.get(3)&&!t._.database||n.get(3)===t._.database),new Ur(uo(n))}function oo(t,e){return eo(t._,e)}function so(t){var e=no(t);return 4===e.length?Lr.U():uo(e)}function ao(t){return new Lr(["projects",t._.projectId,"databases",t._.database]).B()}function uo(t){return gr(t.length>4&&"documents"===t.get(4)),t.N(5)}function co(t,e,n){return{name:ro(t,e),fields:n.proto.mapValue.fields}}function lo(t,e){var n;if(e instanceof $o)n={update:co(t,e.key,e.value)};else if(e instanceof ts)n={delete:ro(t,e.key)};else if(e instanceof Ko)n={update:co(t,e.key,e.data),updateMask:Co(e.Qe)};else if(e instanceof Xo)n={transform:{document:ro(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Ao)return{fieldPath:e.field.B(),setToServerValue:"REQUEST_TIME"};if(n instanceof ko)return{fieldPath:e.field.B(),appendMissingElements:{values:n.elements}};if(n instanceof Po)return{fieldPath:e.field.B(),removeAllFromArray:{values:n.elements}};if(n instanceof Do)return{fieldPath:e.field.B(),increment:n.We};throw pr()}(0,t)}))}};else{if(!(e instanceof es))return pr();n={verify:ro(t,e.key)}}return e.Ge.je||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ji(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:pr()}(t,e.Ge)),n}function ho(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Vo.updateTime(to(t.updateTime)):void 0!==t.exists?Vo.exists(t.exists):Vo.ze()}(e.currentDocument):Vo.ze();if(e.update){var r=io(t,e.update.name),i=new ns({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new Fo((t.fieldPaths||[]).map((function(t){return Mr.G(t)})))}(e.updateMask);return new Ko(r,i,o,n)}return new $o(r,i,n)}if(e.delete){var s=io(t,e.delete);return new ts(s,n)}if(e.transform){var a=io(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(gr("REQUEST_TIME"===e.setToServerValue),n=new Ao):"appendMissingElements"in e?n=new ko(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Po(e.removeAllFromArray.values||[]):"increment"in e?n=new Do(t,e.increment):pr();var r=Mr.G(e.fieldPath);return new Mo(r,n)}(t,e)}));return gr(!0===n.exists),new Xo(a,u)}if(e.verify){var c=io(t,e.verify);return new es(c,n)}return pr()}function fo(t,e){return{documents:[oo(t,e.path)]}}function po(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=oo(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=oo(t,r.F()),n.structuredQuery.from=[{collectionId:r.k()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Hi(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NAN"}};if(Bi(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Hi(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NAN"}};if(Bi(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(t.field),op:vo(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:_o(t.field),direction:mo(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Ke||Vr(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=go(e.startAt)),e.endAt&&(n.structuredQuery.endAt=go(e.endAt)),n}function go(t){return{before:t.before,values:t.position}}function yo(t){return new Ls(t.values||[],!!t.before)}function mo(t){return Wi[t]}function vo(t){return Gi[t]}function _o(t){return{fieldPath:t.B()}}function bo(t){return Mr.G(t.fieldPath)}function wo(t){return Is.create(bo(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return pr()}}(t.fieldFilter.op),t.fieldFilter.value)}function Eo(t){switch(t.unaryFilter.op){case"IS_NAN":var e=bo(t.unaryFilter.field);return Is.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=bo(t.unaryFilter.field);return Is.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=bo(t.unaryFilter.field);return Is.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=bo(t.unaryFilter.field);return Is.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return pr()}}function Co(t){var e=[];return t.fields.forEach((function(t){return e.push(t.B())})),{fieldPaths:e}}function So(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var To=function(){this.He=void 0};function Oo(t,e,n){return t instanceof Ao?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ko?No(t,e):t instanceof Po?Ro(t,e):function(t,e){var n=xo(t,e),r=jo(n)+jo(t.We);return Vi(n)&&Vi(t.We)?$i(r):Ki(t.serializer,r)}(t,e)}function Io(t,e,n){return t instanceof ko?No(t,e):t instanceof Po?Ro(t,e):n}function xo(t,e){return t instanceof Do?Vi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e}(To),ko=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r.c)(e,t),e}(To);function No(t,e){for(var n=Lo(e),r=function(t){n.some((function(e){return Ni(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Po=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r.c)(e,t),e}(To);function Ro(t,e){for(var n=Lo(e),r=function(t){n=n.filter((function(e){return!Ni(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Do=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.We=n,r}return Object(r.c)(e,t),e}(To);function jo(t){return Fi(t.integerValue||t.doubleValue)}function Lo(t){return qi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Fo=function(){function t(t){this.fields=t,t.sort(Mr.D)}return t.prototype.Ye=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].M(t))return!0;return!1},t.prototype.isEqual=function(t){return br(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Mo=function(t,e){this.field=t,this.transform=e},Uo=function(t,e){this.version=t,this.transformResults=e},Vo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.ze=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"je",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function qo(t,e){return void 0!==t.updateTime?e instanceof ss&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof ss}var Bo=function(){};function Ho(t,e,n){return t instanceof $o?function(t,e,n){return new ss(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof Ko?function(t,e,n){if(!qo(t.Ge,e))return new us(t.key,n.version);var r=Yo(t,e);return new ss(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Xo?function(t,e,n){if(gr(null!=n.transformResults),!qo(t.Ge,e))return new us(t.key,n.version);var r=Zo(0,e),i=function(t,e,n){var r=[];gr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof ss&&(a=e.field(o.field)),r.push(Io(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=Jo(t,r.data(),i);return new ss(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new as(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function zo(t,e,n,r){return t instanceof $o?function(t,e){if(!qo(t.Ge,e))return e;var n=Qo(e);return new ss(t.key,n,t.value,{Je:!0})}(t,e):t instanceof Ko?function(t,e){if(!qo(t.Ge,e))return e;var n=Qo(e),r=Yo(t,e);return new ss(t.key,n,r,{Je:!0})}(t,e):t instanceof Xo?function(t,e,n,r){if(!qo(t.Ge,e))return e;var i=Zo(0,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof ss&&(c=n.field(a.field)),null===c&&r instanceof ss&&(c=r.field(a.field)),i.push(Oo(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=Jo(t,i.data(),o);return new ss(t.key,i.version,s,{Je:!0})}(t,e,r,n):function(t,e){return qo(t.Ge,e)?new as(t.key,Dr.min()):e}(t,e)}function Wo(t,e){return t instanceof Xo?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof ss?e.field(o.field):void 0,a=xo(o.transform,s||null);null!=a&&(n=null==n?(new rs).set(o.field,a):n.set(o.field,a))}return n?n.Xe():null}(t,e):null}function Go(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ge.isEqual(e.Ge)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||br(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ko&&e instanceof ko||t instanceof Po&&e instanceof Po?br(t.elements,e.elements,Ni):t instanceof Do&&e instanceof Do?Ni(t.We,e.We):t instanceof Ao&&e instanceof Ao}(t.transform,e.transform)}(t,e)})))}function Qo(t){return t instanceof ss?t.version:Dr.min()}var $o=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ge=r,i.type=0,i}return Object(r.c)(e,t),e}(Bo),Ko=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Qe=r,o.Ge=i,o.type=1,o}return Object(r.c)(e,t),e}(Bo);function Yo(t,e){return function(t,e){var n=new rs(e);return t.Qe.fields.forEach((function(e){if(!e.P()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Xe()}(t,e instanceof ss?e.data():ns.empty())}var Xo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ge=Vo.exists(!0),r}return Object(r.c)(e,t),e}(Bo);function Zo(t,e){return e}function Jo(t,e,n){for(var r=new rs(e),i=0;i<t.fieldTransforms.length;i++)r.set(t.fieldTransforms[i].field,n[i]);return r.Xe()}var ts=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=3,r}return Object(r.c)(e,t),e}(Bo),es=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=4,r}return Object(r.c)(e,t),e}(Bo),ns=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.P())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!zi(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.k()])||null},t.prototype.isEqual=function(t){return Ni(this.proto,t.proto)},t}(),rs=function(){function t(t){void 0===t&&(t=ns.empty()),this.Ze=t,this.tn=new Map}return t.prototype.set=function(t,e){return this.en(t,e),this},t.prototype.delete=function(t){return this.en(t,null),this},t.prototype.en=function(t,e){for(var n=this.tn,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===ki(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.k(),e)},t.prototype.Xe=function(){var t=this.nn(Mr.U(),this.tn);return null!=t?new ns(t):this.Ze},t.prototype.nn=function(t,e){var n=this,r=!1,i=this.Ze.field(t),o=zi(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.nn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function is(t){var e=[];return kr(t.fields||{},(function(t,n){var r=new Mr([t]);if(zi(n)){var i=is(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new Fo(e)}var os=function(t,e){this.key=t,this.version=e},ss=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).sn=r,o.Je=!!i.Je,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(r.c)(e,t),e.prototype.field=function(t){return this.sn.field(t)},e.prototype.data=function(){return this.sn},e.prototype.rn=function(){return this.sn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Je===t.Je&&this.hasCommittedMutations===t.hasCommittedMutations&&this.sn.isEqual(t.sn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(os),as=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(r.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(os),us=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(os),cs=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.on=n,this.filters=r,this.limit=i,this.an=o,this.startAt=s,this.endAt=a,this.cn=null,this.un=null};function ls(t,e,n,r,i,o,s,a){return new cs(t,e,n,r,i,o,s,a)}function hs(t){return new cs(t)}function fs(t){return!Vr(t.limit)&&"F"===t.an}function ds(t){return!Vr(t.limit)&&"L"===t.an}function ps(t){return t.on.length>0?t.on[0].field:null}function gs(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.hn())return r.field}return null}function ys(t){return null!==t.collectionGroup}function ms(t){var e=yr(t);if(null===e.cn){e.cn=[];var n=gs(e),r=ps(e);if(null!==n&&null===r)n.W()||e.cn.push(new Vs(n)),e.cn.push(new Vs(Mr.j(),"asc"));else{for(var i=!1,o=0,s=e.on;o<s.length;o++){var a=s[o];e.cn.push(a),a.field.W()&&(i=!0)}if(!i){var u=e.on.length>0?e.on[e.on.length-1].dir:"asc";e.cn.push(new Vs(Mr.j(),u))}}}return e.cn}function vs(t){var e=yr(t);if(!e.un)if("F"===e.an)e.un=zr(e.path,e.collectionGroup,ms(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ms(e);r<i.length;r++){var o=i[r];n.push(new Vs(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Ls(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Ls(e.startAt.position,!e.startAt.before):null;e.un=zr(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.un}function _s(t,e,n){return new cs(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bs(t,e){return new cs(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,e,t.endAt)}function ws(t,e){return new cs(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,e)}function Es(t,e){return Gr(vs(t),vs(e))&&t.an===e.an}function Cs(t){return Wr(vs(t))+"|lt:"+t.an}function Ss(t){return"Query(target="+function(t){var e=t.path.B();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.B()+" "+e.op+" "+ji(e.value);var e})).join(", ")+"]"),Vr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.B()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Fs(t.startAt)),t.endAt&&(e+=", endAt: "+Fs(t.endAt)),"Target("+e+")"}(vs(t))+"; limitType="+t.an+")"}function Ts(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.J(t.collectionGroup)&&t.path.M(n):Ur.X(t.path)?t.path.isEqual(n):t.path.$(n)}(t,e)&&function(t,e){for(var n=0,r=t.on;n<r.length;n++){var i=r[n];if(!i.field.W()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ms(t.startAt,ms(t),e)||t.endAt&&Ms(t.endAt,ms(t),e))}(t,e)}function Os(t){return function(e,n){for(var r=!1,i=0,o=ms(t);i<o.length;i++){var s=o[i],a=qs(s,e,n);if(0!==a)return a;r=r||s.field.W()}return 0}}var Is=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(r.c)(e,t),e.create=function(t,n,r){return t.W()?"in"===n||"not-in"===n?this.ln(t,n,r):new xs(t,n,r):"array-contains"===n?new Ps(t,r):"in"===n?new Rs(t,r):"not-in"===n?new Ds(t,r):"array-contains-any"===n?new js(t,r):new e(t,n,r)},e.ln=function(t,e,n){return"in"===e?new As(t,n):new ks(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this._n(Ri(e,this.value)):null!==e&&ki(this.value)===ki(e)&&this._n(Ri(e,this.value))},e.prototype._n=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return pr()}},e.prototype.hn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),xs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ur.Y(r.referenceValue),i}return Object(r.c)(e,t),e.prototype.matches=function(t){var e=Ur.D(t.key,this.key);return this._n(e)},e}(Is),As=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ns(0,n),r}return Object(r.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Is),ks=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ns(0,n),r}return Object(r.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Is);function Ns(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Ur.Y(t.referenceValue)}))}var Ps=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(r.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return qi(e)&&Pi(e.arrayValue,this.value)},e}(Is),Rs=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(r.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Pi(this.value.arrayValue,e)},e}(Is),Ds=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(r.c)(e,t),e.prototype.matches=function(t){if(Pi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Pi(this.value.arrayValue,e)},e}(Is),js=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(r.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!qi(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Pi(e.value.arrayValue,t)}))},e}(Is),Ls=function(t,e){this.position=t,this.before=e};function Fs(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return ji(t)})).join(",")}function Ms(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.W()?Ur.D(Ur.Y(s.referenceValue),n.key):Ri(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Us(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ni(t.position[n],e.position[n]))return!1;return!0}var Vs=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function qs(t,e,n){var r=t.field.W()?Ur.D(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Ri(r,i):pr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pr()}}function Bs(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Hs=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},zs=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.fn=t,this.dn=e,this.wn=n,this.En=r,this.Tn=i,this.In=0,this.mn=null,this.An=Date.now(),this.reset()}return t.prototype.reset=function(){this.In=0},t.prototype.Rn=function(){this.In=this.Tn},t.prototype.Pn=function(t){var e=this;this.cancel();var n=Math.floor(this.In+this.gn()),r=Math.max(0,Date.now()-this.An),i=Math.max(0,n-r);i>0&&lr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.In+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.mn=this.fn.yn(this.dn,i,(function(){return e.An=Date.now(),t()})),this.In*=this.En,this.In<this.wn&&(this.In=this.wn),this.In>this.Tn&&(this.In=this.Tn)},t.prototype.Vn=function(){null!==this.mn&&(this.mn.pn(),this.mn=null)},t.prototype.cancel=function(){null!==this.mn&&(this.mn.cancel(),this.mn=null)},t.prototype.gn=function(){return(Math.random()-.5)*this.In},t}(),Ws=function(){function t(t){var e=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,t((function(t){e.Sn=!0,e.result=t,e.bn&&e.bn(t)}),(function(t){e.Sn=!0,e.error=t,e.vn&&e.vn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Dn&&pr(),this.Dn=!0,this.Sn?this.error?this.Cn(n,this.error):this.Nn(e,this.result):new t((function(t,i){r.bn=function(n){r.Nn(e,n).next(t,i)},r.vn=function(e){r.Cn(n,e).next(t,i)}}))},t.prototype.xn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Fn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Nn=function(e,n){return e?this.Fn((function(){return e(n)})):t.resolve(n)},t.prototype.Cn=function(e,n){return e?this.Fn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.On=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.kn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.On(r)},t}(),Gs=function(){function t(e,n,r){this.name=e,this.version=n,this.Mn=r,12.2===t.$n(Object(s.n)())&&hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return lr("SimpleDb","Removing database:",t),Zs(window.indexedDB.deleteDatabase(t)).xn()},t.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(t.Bn())return!0;var e=Object(s.n)(),n=t.$n(e),r=0<n&&n<10,i=t.qn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Bn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Un)},t.Kn=function(t,e){return t.store(e)},t.$n=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.qn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Qn=function(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n=this;return Object(r.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(lr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new $s(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new ar(sr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new $s(t,n))},i.onupgradeneeded=function(t){lr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Mn.createOrUpgrade(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){lr("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Wn&&(this.db.onversionchange=function(t){return n.Wn(t)}),this.db)]}}))}))},t.prototype.jn=function(t){this.Wn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,i){return Object(r.b)(this,void 0,void 0,(function(){var o,s,a,u,c;return Object(r.d)(this,(function(l){switch(l.label){case 0:o="readonly"===e,s=0,a=function(){var e,a,c,l,h;return Object(r.d)(this,(function(r){switch(r.label){case 0:++s,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.Qn(t)];case 2:return u.db=r.sent(),e=Ys.open(u.db,t,o?"readonly":"readwrite",n),a=i(e).catch((function(t){return e.abort(t),Ws.reject(t)})).xn(),c={},a.catch((function(){})),[4,e.Gn];case 3:return[2,(c.value=(r.sent(),a),c)];case 4:return lr("SimpleDb","Transaction failed with error:",(l=r.sent()).message,"Retrying:",h="FirebaseError"!==l.name&&s<3),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Qs=function(){function t(t){this.zn=t,this.Hn=!1,this.Yn=null}return Object.defineProperty(t.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Jn",{get:function(){return this.Yn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Hn=!0},t.prototype.Xn=function(t){this.Yn=t},t.prototype.delete=function(){return Zs(this.zn.delete())},t}(),$s=function(t){function e(e,n){var r=this;return(r=t.call(this,sr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(r.c)(e,t),e}(ar);function Ks(t){return"IndexedDbTransactionError"===t.name}var Ys=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Zn=new Hs,this.transaction.oncomplete=function(){n.Zn.resolve()},this.transaction.onabort=function(){e.error?n.Zn.reject(new $s(t,e.error)):n.Zn.resolve()},this.transaction.onerror=function(e){var r=ta(e.target.error);n.Zn.reject(new $s(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new $s(n,e)}},Object.defineProperty(t.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Zn.reject(t),this.aborted||(lr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Xs(e)},t}(),Xs=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(lr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(lr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Zs(n)},t.prototype.add=function(t){return lr("SimpleDb","ADD",this.store.name,t,t),Zs(this.store.add(t))},t.prototype.get=function(t){var e=this;return Zs(this.store.get(t)).next((function(n){return void 0===n&&(n=null),lr("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return lr("SimpleDb","DELETE",this.store.name,t),Zs(this.store.delete(t))},t.prototype.count=function(){return lr("SimpleDb","COUNT",this.store.name),Zs(this.store.count())},t.prototype.ts=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.es(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.ns=function(t,e){lr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.ss=!1;var r=this.cursor(n);return this.es(r,(function(t,e,n){return n.delete()}))},t.prototype.rs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.es(r,e)},t.prototype.os=function(t){var e=this.cursor({});return new Ws((function(n,r){e.onerror=function(t){var e=ta(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.es=function(t,e){var n=[];return new Ws((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Qs(i),s=e(i.primaryKey,i.value,o);if(s instanceof Ws){var a=s.catch((function(t){return o.done(),Ws.reject(t)}));n.push(a)}o.Sn?r():null===o.Jn?i.continue():i.continue(o.Jn)}else r()}})).next((function(){return Ws.On(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ss?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Zs(t){return new Ws((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=ta(t.target.error);n(e)}}))}var Js=!1;function ta(t){var e=Gs.$n(Object(s.n)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new ar("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Js||(Js=!0,setTimeout((function(){throw r}),0)),r}}return t}function ea(){return"undefined"!=typeof window?window:null}function na(){return"undefined"!=typeof document?document:null}var ra=function(){function t(t,e,n,r,i){this.cs=t,this.dn=e,this.us=n,this.op=r,this.hs=i,this.ls=new Hs,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch((function(t){}))}return t._s=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.fs=setTimeout((function(){return e.ds()}),t)},t.prototype.pn=function(){return this.ds()},t.prototype.cancel=function(t){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new ar(sr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.ds=function(){var t=this;this.cs.ws((function(){return null!==t.fs?(t.clearTimeout(),t.op().then((function(e){return t.ls.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.fs&&(this.hs(this),clearTimeout(this.fs),this.fs=null)},t}(),ia=function(){function t(){var t=this;this.Es=Promise.resolve(),this.Ts=[],this.Is=!1,this.As=[],this.Rs=null,this.Ps=!1,this.gs=[],this.ys=new zs(this,"async_queue_retry"),this.Vs=function(){var e=na();e&&lr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ys.Vn()};var e=na();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Vs)}return Object.defineProperty(t.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),t.prototype.ws=function(t){this.enqueue(t)},t.prototype.bs=function(t){this.vs(),this.Ss(t)},t.prototype.Ds=function(){if(!this.Is){this.Is=!0;var t=na();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vs)}},t.prototype.enqueue=function(t){return this.vs(),this.Is?new Promise((function(t){})):this.Ss(t)},t.prototype.Cs=function(t){var e=this;this.ws((function(){return e.Ts.push(t),e.Ns()}))},t.prototype.Ns=function(){return Object(r.b)(this,void 0,void 0,(function(){var t,e=this;return Object(r.d)(this,(function(n){switch(n.label){case 0:if(0===this.Ts.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Ts[0]()];case 2:return n.sent(),this.Ts.shift(),this.ys.reset(),[3,4];case 3:if(!Ks(t=n.sent()))throw t;return lr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Ts.length>0&&this.ys.Pn((function(){return e.Ns()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ss=function(t){var e=this,n=this.Es.then((function(){return e.Ps=!0,t().catch((function(t){throw e.Rs=t,e.Ps=!1,hr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Ps=!1,t}))}));return this.Es=n,n},t.prototype.yn=function(t,e,n){var r=this;this.vs(),this.gs.indexOf(t)>-1&&(e=0);var i=ra._s(this,t,e,n,(function(t){return r.xs(t)}));return this.As.push(i),i},t.prototype.vs=function(){this.Rs&&pr()},t.prototype.Fs=function(){},t.prototype.Os=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.Es];case 1:e.sent(),e.label=2;case 2:if(t!==this.Es)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.ks=function(t){for(var e=0,n=this.As;e<n.length;e++)if(n[e].dn===t)return!0;return!1},t.prototype.Ms=function(t){var e=this;return this.Os().then((function(){e.As.sort((function(t,e){return t.us-e.us}));for(var n=0,r=e.As;n<r.length;n++){var i=r[n];if(i.pn(),"all"!==t&&i.dn===t)break}return e.Os()}))},t.prototype.$s=function(t){this.gs.push(t)},t.prototype.xs=function(t){var e=this.As.indexOf(t);this.As.splice(e,1)},t}();function oa(t,e){if(hr("AsyncQueue",e+": "+t),Ks(t))return new ar(sr.UNAVAILABLE,e+": "+t);throw t}var sa=function(){this.Ls=void 0,this.listeners=[]},aa=function(){this.Bs=new Pr((function(t){return Cs(t)}),Es),this.onlineState="Unknown",this.qs=new Set};function ua(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c;return Object(r.d)(this,(function(r){switch(r.label){case 0:if(n=yr(t),o=!1,(s=n.Bs.get(i=e.query))||(o=!0,s=new sa),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),a=s,[4,n.Us(i)];case 2:return a.Ls=r.sent(),[3,4];case 3:return u=r.sent(),c=oa(u,"Initialization of query '"+Ss(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.Bs.set(i,s),s.listeners.push(e),e.Ks(n.onlineState),s.Ls&&e.Qs(s.Ls)&&fa(n),[2]}}))}))}function ca(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a;return Object(r.d)(this,(function(r){return n=yr(t),o=!1,(s=n.Bs.get(i=e.query))&&(a=s.listeners.indexOf(e))>=0&&(s.listeners.splice(a,1),o=0===s.listeners.length),o?[2,(n.Bs.delete(i),n.Ws(i))]:[2]}))}))}function la(t,e){for(var n=yr(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.Bs.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Qs(s)&&(r=!0);a.Ls=s}}r&&fa(n)}function ha(t,e,n){var r=yr(t),i=r.Bs.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.Bs.delete(e)}function fa(t){t.qs.forEach((function(t){t.next()}))}var da=function(){function t(t,e,n){this.query=t,this.js=e,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new mi(t.query,t.docs,t.Kt,e,t.Qt,t.fromCache,t.Wt,!0)}var o=!1;return this.Gs?this.Hs(t)&&(this.js.next(t),o=!0):this.Ys(t,this.onlineState)&&(this.Js(t),o=!0),this.zs=t,o},t.prototype.onError=function(t){this.js.error(t)},t.prototype.Ks=function(t){this.onlineState=t;var e=!1;return this.zs&&!this.Gs&&this.Ys(this.zs,t)&&(this.Js(this.zs),e=!0),e},t.prototype.Ys=function(t,e){return!t.fromCache||!(this.options.Xs&&"Offline"!==e||t.docs.P()&&"Offline"!==e)},t.prototype.Hs=function(t){return t.docChanges.length>0||!!(t.Wt||this.zs&&this.zs.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.Js=function(t){t=mi.Gt(t.query,t.docs,t.Qt,t.fromCache),this.Gs=!0,this.js.next(t)},t}(),pa=function(){function t(t){this.uid=t}return t.prototype.Zs=function(){return null!=this.uid},t.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();pa.UNAUTHENTICATED=new pa(null),pa.ei=new pa("google-credentials-uid"),pa.ni=new pa("first-party-uid");var ga=function(t,e){this.user=e,this.type="OAuth",this.si={},this.si.Authorization="Bearer "+t},ya=function(){function t(){this.ii=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.ri=function(){},t.prototype.oi=function(t){this.ii=t,t(pa.UNAUTHENTICATED)},t.prototype.ai=function(){this.ii=null},t}(),ma=function(){function t(t){var e=this;this.ci=null,this.currentUser=pa.UNAUTHENTICATED,this.ui=!1,this.hi=0,this.ii=null,this.forceRefresh=!1,this.ci=function(){e.hi++,e.currentUser=e.li(),e.ui=!0,e.ii&&e.ii(e.currentUser)},this.hi=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.ci):(this.ci(null),t.get().then((function(t){e.auth=t,e.ci&&e.auth.addAuthTokenListener(e.ci)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.hi,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.hi!==e?(lr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(gr("string"==typeof n.accessToken),new ga(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.ri=function(){this.forceRefresh=!0},t.prototype.oi=function(t){this.ii=t,this.ui&&t(this.currentUser)},t.prototype.ai=function(){this.auth&&this.auth.removeAuthTokenListener(this.ci),this.ci=null,this.ii=null},t.prototype.li=function(){var t=this.auth&&this.auth.getUid();return gr(null===t||"string"==typeof t),new pa(t)},t}(),va=function(){function t(t,e){this._i=t,this.fi=e,this.type="FirstParty",this.user=pa.ni}return Object.defineProperty(t.prototype,"si",{get:function(){var t={"X-Goog-AuthUser":this.fi},e=this._i.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),_a=function(){function t(t,e){this._i=t,this.fi=e}return t.prototype.getToken=function(){return Promise.resolve(new va(this._i,this.fi))},t.prototype.oi=function(t){t(pa.ni)},t.prototype.ai=function(){},t.prototype.ri=function(){},t}(),ba=function(){function t(t,e,n,r){this.batchId=t,this.di=e,this.baseMutations=n,this.mutations=r}return t.prototype.wi=function(t,e,n){for(var r=n.Ei,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Ho(o,e,r[i]))}return e},t.prototype.Ti=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=zo(i,e,e,this.di))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=zo(u,e,o,this.di))}return e},t.prototype.Ii=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Ti(r.key,t.get(r.key));i&&(n=n.ot(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),fi())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&br(this.mutations,t.mutations,(function(t,e){return Go(t,e)}))&&br(this.baseMutations,t.baseMutations,(function(t,e){return Go(t,e)}))},t}(),wa=function(){function t(t,e,n,r){this.batch=t,this.mi=e,this.Ei=n,this.Ai=r}return t.from=function(e,n,r){gr(e.mutations.length===r.length);for(var i=li,o=e.mutations,s=0;s<o.length;s++)i=i.ot(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Ea=function(){function t(){this.Ri=new Pr((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Pi=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.gi},set:function(t){this.gi=t},enumerable:!1,configurable:!0}),t.prototype.yi=function(t,e){this.Vi(),this.readTime=e,this.Ri.set(t.key,t)},t.prototype.pi=function(t,e){this.Vi(),e&&(this.readTime=e),this.Ri.set(t,null)},t.prototype.bi=function(t,e){this.Vi();var n=this.Ri.get(e);return void 0!==n?Ws.resolve(n):this.vi(t,e)},t.prototype.getEntries=function(t,e){return this.Si(t,e)},t.prototype.apply=function(t){return this.Vi(),this.Pi=!0,this.Di(t)},t.prototype.Vi=function(){},t}(),Ca="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sa=function(){function t(){this.Ci=[]}return t.prototype.Ni=function(t){this.Ci.push(t)},t.prototype.xi=function(){this.Ci.forEach((function(t){return t()}))},t}(),Ta=function(){function t(t,e,n){this.Fi=t,this.Oi=e,this.ki=n}return t.prototype.Mi=function(t,e){var n=this;return this.Oi.$i(t,e).next((function(r){return n.Li(t,e,r)}))},t.prototype.Li=function(t,e,n){return this.Fi.bi(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Ti(e,t);return t}))},t.prototype.Bi=function(t,e,n){var r=ai();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Ti(t,e);r=r.ot(t,e)})),r},t.prototype.qi=function(t,e){var n=this;return this.Fi.getEntries(t,e).next((function(e){return n.Ui(t,e)}))},t.prototype.Ui=function(t,e){var n=this;return this.Oi.Ki(t,e).next((function(r){var i=n.Bi(t,e,r),o=si();return i.forEach((function(t,e){e||(e=new as(t,Dr.min())),o=o.ot(t,e)})),o}))},t.prototype.Qi=function(t,e,n){return function(t){return Ur.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Wi(t,e.path):ys(e)?this.ji(t,e,n):this.Gi(t,e,n)},t.prototype.Wi=function(t,e){return this.Mi(t,new Ur(e)).next((function(t){var e=ci();return t instanceof ss&&(e=e.ot(t.key,t)),e}))},t.prototype.ji=function(t,e,n){var r=this,i=e.collectionGroup,o=ci();return this.ki.zi(t,i).next((function(s){return Ws.forEach(s,(function(s){var a=function(t,e){return new cs(e,null,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(e,s.child(i));return r.Gi(t,a,n).next((function(t){t.forEach((function(t,e){o=o.ot(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Gi=function(t,e,n){var r,i,o=this;return this.Fi.Qi(t,e,n).next((function(n){return r=n,o.Oi.Hi(t,e)})).next((function(e){return o.Yi(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=zo(u,l,l,o.di);r=h instanceof ss?r.ot(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Ts(e,n)||(r=r.remove(t))})),r}))},t.prototype.Yi=function(t,e,n){for(var r=fi(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Ko&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Fi.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof ss&&(c=c.ot(t,e))})),c}))},t}(),Oa=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Ji=n,this.Xi=r}return t.Zi=function(e,n){for(var r=fi(),i=fi(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ia=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.tr=function(t){return n.er(t)},this.nr=function(t){return e.sr(t)})}return t.prototype.er=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.nr&&this.nr(t),t},t}();function xa(t,e){var n=t[1],r=e[1],i=_r(t[0],e[0]);return 0===i?_r(n,r):i}Ia.ir=-1;var Aa=function(){function t(t){this.rr=t,this.buffer=new ri(xa),this.ar=0}return t.prototype.cr=function(){return++this.ar},t.prototype.ur=function(t){var e=[t,this.cr()];if(this.buffer.size<this.rr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();xa(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ka={hr:!1,lr:0,_r:0,dr:0},Na=function(){function t(t,e,n){this.wr=t,this.Er=e,this.Tr=n}return t.Ir=function(e){return new t(e,t.mr,t.Ar)},t}();Na.mr=10,Na.Ar=1e3,Na.Rr=new Na(41943040,Na.mr,Na.Ar),Na.Pr=new Na(-1,0,0);var Pa=function(){function t(t,e){this.gr=t,this.cs=e,this.yr=!1,this.Vr=null}return t.prototype.start=function(t){-1!==this.gr.params.wr&&this.pr(t)},t.prototype.stop=function(){this.Vr&&(this.Vr.cancel(),this.Vr=null)},Object.defineProperty(t.prototype,"br",{get:function(){return null!==this.Vr},enumerable:!1,configurable:!0}),t.prototype.pr=function(t){var e=this,n=this.yr?3e5:6e4;lr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Vr=this.cs.yn("lru_garbage_collection",n,(function(){return Object(r.b)(e,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(n){switch(n.label){case 0:this.Vr=null,this.yr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.vr(this.gr)];case 2:return n.sent(),[3,7];case 3:return Ks(e=n.sent())?(lr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Zu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.pr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Ra=function(){function t(t,e){this.Sr=t,this.params=e}return t.prototype.Dr=function(t,e){return this.Sr.Cr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Nr=function(t,e){var n=this;if(0===e)return Ws.resolve(Ia.ir);var r=new Aa(e);return this.Sr.Ce(t,(function(t){return r.ur(t.sequenceNumber)})).next((function(){return n.Sr.Fr(t,(function(t){return r.ur(t)}))})).next((function(){return r.maxValue}))},t.prototype.Or=function(t,e,n){return this.Sr.Or(t,e,n)},t.prototype.kr=function(t,e){return this.Sr.kr(t,e)},t.prototype.Mr=function(t,e){var n=this;return-1===this.params.wr?(lr("LruGarbageCollector","Garbage collection skipped; disabled"),Ws.resolve(ka)):this.$r(t).next((function(r){return r<n.params.wr?(lr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.wr),ka):n.Lr(t,e)}))},t.prototype.$r=function(t){return this.Sr.$r(t)},t.prototype.Lr=function(t,e){var n,r,i,s,a,u,c,l=this,h=Date.now();return this.Dr(t,this.params.Er).next((function(e){return e>l.params.Tr?(lr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.Tr+" from "+e),r=l.params.Tr):r=e,s=Date.now(),l.Nr(t,r)})).next((function(r){return n=r,a=Date.now(),l.Or(t,n,e)})).next((function(e){return i=e,u=Date.now(),l.kr(t,n)})).next((function(t){return c=Date.now(),cr()<=o.a.DEBUG&&lr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-s)+"ms\n\tRemoved "+i+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms"),Ws.resolve({hr:!0,lr:r,_r:i,dr:t})}))},t}();function Da(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=La(e)),e=ja(t.get(n),e);return La(e)}function ja(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function La(t){return t+"\x01\x01"}function Fa(t){var e=t.length;if(gr(e>=2),2===e)return gr("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Lr.U();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&pr(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:pr()}o=s+2}return new Lr(r)}var Ma=function(t){this.Br=t};function Ua(t,e){if(e.document)return function(t,e,n){var r=io(t,e.name),i=to(e.updateTime),o=new ns({mapValue:{fields:e.fields}});return new ss(r,i,o,{hasCommittedMutations:!!n})}(t.Br,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ur.Z(e.noDocument.path),r=za(e.noDocument.readTime);return new as(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Ur.Z(e.unknownDocument.path),o=za(e.unknownDocument.version);return new us(i,o)}return pr()}function Va(t,e,n){var r=qa(n),i=e.key.path.F().L();if(e instanceof ss){var o=function(t,e){return{name:ro(t,e.key),fields:e.rn().mapValue.fields,updateTime:Xi(t,e.version.v())}}(t.Br,e);return new yu(null,null,o,e.hasCommittedMutations,r,i)}if(e instanceof as){var s=e.key.path.L(),a=Ha(e.version),u=e.hasCommittedMutations;return new yu(null,new pu(s,a),null,u,r,i)}if(e instanceof us){var c=e.key.path.L(),l=Ha(e.version);return new yu(new gu(c,l),null,null,!0,r,i)}return pr()}function qa(t){var e=t.v();return[e.seconds,e.nanoseconds]}function Ba(t){var e=new Rr(t[0],t[1]);return Dr.V(e)}function Ha(t){var e=t.v();return new cu(e.seconds,e.nanoseconds)}function za(t){var e=new Rr(t.seconds,t.nanoseconds);return Dr.V(e)}function Wa(t,e){var n=(e.baseMutations||[]).map((function(e){return ho(t.Br,e)})),r=e.mutations.map((function(e){return ho(t.Br,e)})),i=Rr.fromMillis(e.localWriteTimeMs);return new ba(e.batchId,i,n,r)}function Ga(t){var e,n,r=za(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?za(t.lastLimboFreeSnapshotVersion):Dr.min();return void 0!==t.query.documents?(gr(1===(n=t.query).documents.length),e=vs(hs(so(n.documents[0])))):e=function(t){var e=so(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){gr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[Eo(e)]:void 0!==e.fieldFilter?[wo(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):pr():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Vs(bo(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Vr(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=yo(n.startAt));var l=null;return n.endAt&&(l=yo(n.endAt)),vs(ls(e,i,a,s,u,"F",c,l))}(t.query),new Yr(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Er.fromBase64String(t.resumeToken))}function Qa(t,e){var n,r=Ha(e.nt),i=Ha(e.lastLimboFreeSnapshotVersion);n=Qr(e.target)?fo(t.Br,e.target):po(t.Br,e.target);var o=e.resumeToken.toBase64();return new vu(e.targetId,Wr(e.target),r,o,e.sequenceNumber,i,n)}var $a=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.ki=n,this.qr=r,this.Ur={}}return t.Kr=function(e,n,r,i){return gr(""!==e.uid),new t(e.Zs()?e.uid:"",n,r,i)},t.prototype.Qr=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xa(t).rs({index:fu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Wr=function(t,e,n,r){var i=this,o=Za(t),s=Xa(t);return s.add({}).next((function(a){gr("number"==typeof a);for(var u=new ba(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return lo(t.Br,e)})),i=n.mutations.map((function(e){return lo(t.Br,e)}));return new fu(e,n.batchId,n.di.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new ri((function(t,e){return _r(t.B(),e.B())})),f=0,d=r;f<d.length;f++){var p=d[f],g=du.key(i.userId,p.key.path,a);h=h.add(p.key.path.F()),l.push(s.put(c)),l.push(o.put(g,du.PLACEHOLDER))}return h.forEach((function(e){l.push(i.ki.jr(t,e))})),t.Ni((function(){i.Ur[a]=u.keys()})),Ws.On(l).next((function(){return u}))}))},t.prototype.Gr=function(t,e){var n=this;return Xa(t).get(e).next((function(t){return t?(gr(t.userId===n.userId),Wa(n.serializer,t)):null}))},t.prototype.zr=function(t,e){var n=this;return this.Ur[e]?Ws.resolve(this.Ur[e]):this.Gr(t,e).next((function(t){if(t){var r=t.keys();return n.Ur[e]=r,r}return null}))},t.prototype.Hr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Xa(t).rs({index:fu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(gr(e.batchId>=r),o=Wa(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.Yr=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Xa(t).rs({index:fu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Jr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xa(t).ts(fu.userMutationsIndex,n).next((function(t){return t.map((function(t){return Wa(e.serializer,t)}))}))},t.prototype.$i=function(t,e){var n=this,r=du.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Za(t).rs({range:i},(function(r,i,s){var a=r[0],u=r[2],c=Fa(r[1]);if(a===n.userId&&e.path.isEqual(c))return Xa(t).get(u).next((function(t){if(!t)throw pr();gr(t.userId===n.userId),o.push(Wa(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.Ki=function(t,e){var n=this,r=new ri(_r),i=[];return e.forEach((function(e){var o=du.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Za(t).rs({range:s},(function(t,i,o){var s=t[0],a=t[2],u=Fa(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),Ws.On(i).next((function(){return n.Xr(t,r)}))},t.prototype.Hi=function(t,e){var n=this,r=e.path,i=r.length+1,o=du.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ri(_r);return Za(t).rs({range:s},(function(t,e,o){var s=t[0],u=t[2],c=Fa(t[1]);s===n.userId&&r.M(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.Xr(t,a)}))},t.prototype.Xr=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Xa(t).get(e).next((function(t){if(null===t)throw pr();gr(t.userId===n.userId),r.push(Wa(n.serializer,t))})))})),Ws.On(i).next((function(){return r}))},t.prototype.Zr=function(t,e){var n=this;return Ya(t.eo,this.userId,e).next((function(r){return t.Ni((function(){n.no(e.batchId)})),Ws.forEach(r,(function(e){return n.qr.so(t,e)}))}))},t.prototype.no=function(t){delete this.Ur[t]},t.prototype.io=function(t){var e=this;return this.Qr(t).next((function(n){if(!n)return Ws.resolve();var r=IDBKeyRange.lowerBound(du.prefixForUser(e.userId)),i=[];return Za(t).rs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Fa(t[1]);i.push(o)}else r.done()})).next((function(){gr(0===i.length)}))}))},t.prototype.ro=function(t,e){return Ka(t,this.userId,e)},t.prototype.oo=function(t){var e=this;return Ja(t).get(this.userId).next((function(t){return t||new hu(e.userId,-1,"")}))},t}();function Ka(t,e,n){var r=du.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Za(t).rs({range:o,ss:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function Ya(t,e,n){var r=t.store(fu.store),i=t.store(du.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.rs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){gr(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=du.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Ws.On(o).next((function(){return c}))}function Xa(t){return Du.Kn(t,fu.store)}function Za(t){return Du.Kn(t,du.store)}function Ja(t){return Du.Kn(t,hu.store)}var tu=function(){function t(t,e){this.serializer=t,this.ki=e}return t.prototype.yi=function(t,e,n){return ru(t).put(iu(e),n)},t.prototype.pi=function(t,e){var n=ru(t),r=iu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.ao(t,r)}))},t.prototype.bi=function(t,e){var n=this;return ru(t).get(iu(e)).next((function(t){return n.co(t)}))},t.prototype.uo=function(t,e){var n=this;return ru(t).get(iu(e)).next((function(t){var e=n.co(t);return e?{ho:e,size:ou(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=ai();return this.lo(t,e,(function(t,e){var i=n.co(e);r=r.ot(t,i)})).next((function(){return r}))},t.prototype._o=function(t,e){var n=this,r=ai(),i=new ti(Ur.D);return this.lo(t,e,(function(t,e){var o=n.co(e);o?(r=r.ot(t,o),i=i.ot(t,ou(e))):(r=r.ot(t,null),i=i.ot(t,0))})).next((function(){return{fo:r,do:i}}))},t.prototype.lo=function(t,e,n){if(e.P())return Ws.resolve();var r=IDBKeyRange.bound(e.first().path.L(),e.last().path.L()),i=e._t(),o=i.It();return ru(t).rs({range:r},(function(t,e,r){for(var s=Ur.Z(t);o&&Ur.D(o,s)<0;)n(o,null),o=i.It();o&&o.isEqual(s)&&(n(o,e),o=i.At()?i.It():null),o?r.Xn(o.path.L()):r.done()})).next((function(){for(;o;)n(o,null),o=i.At()?i.It():null}))},t.prototype.Qi=function(t,e,n){var r=this,i=ci(),o=e.path.length+1,s={};if(n.isEqual(Dr.min())){var a=e.path.L();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.L(),c=qa(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=yu.collectionReadTimeIndex}return ru(t).rs(s,(function(t,n,s){if(t.length===o){var a=Ua(r.serializer,n);e.path.M(a.key.path)?a instanceof ss&&Ts(e,a)&&(i=i.ot(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.wo=function(t){return new eu(this,!!t&&t.Eo)},t.prototype.To=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return nu(t).get(mu.key).next((function(t){return gr(!!t),t}))},t.prototype.ao=function(t,e){return nu(t).put(mu.key,e)},t.prototype.co=function(t){if(t){var e=Ua(this.serializer,t);return e instanceof as&&e.version.isEqual(Dr.min())?null:e}return null},t}(),eu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Io=e,r.Eo=n,r.mo=new Pr((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(r.c)(e,t),e.prototype.Di=function(t){var e=this,n=[],r=0,i=new ri((function(t,e){return _r(t.B(),e.B())}));return this.Ri.forEach((function(o,s){var a=e.mo.get(o);if(s){var u=Va(e.Io.serializer,s,e.readTime);i=i.add(o.path.F());var c=ou(u);r+=c-a,n.push(e.Io.yi(t,o,u))}else if(r-=a,e.Eo){var l=Va(e.Io.serializer,new as(o,Dr.min()),e.readTime);n.push(e.Io.yi(t,o,l))}else n.push(e.Io.pi(t,o))})),i.forEach((function(r){n.push(e.Io.ki.jr(t,r))})),n.push(this.Io.updateMetadata(t,r)),Ws.On(n)},e.prototype.vi=function(t,e){var n=this;return this.Io.uo(t,e).next((function(t){return null===t?(n.mo.set(e,0),null):(n.mo.set(e,t.size),t.ho)}))},e.prototype.Si=function(t,e){var n=this;return this.Io._o(t,e).next((function(t){var e=t.fo;return t.do.forEach((function(t,e){n.mo.set(t,e)})),e}))},e}(Ea);function nu(t){return Du.Kn(t,mu.store)}function ru(t){return Du.Kn(t,yu.store)}function iu(t){return t.path.L()}function ou(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw pr();e=t.noDocument}return JSON.stringify(e).length}var su=function(){function t(){this.Ao=new au}return t.prototype.jr=function(t,e){return this.Ao.add(e),Ws.resolve()},t.prototype.zi=function(t,e){return Ws.resolve(this.Ao.getEntries(e))},t}(),au=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.k(),n=t.F(),r=this.index[e]||new ri(Lr.D),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.k(),n=t.F(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ri(Lr.D)).L()},t}(),uu=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;gr(n<r&&n>=0&&r<=10);var o=new Ys("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(lu.store)}(t),function(t){t.createObjectStore(hu.store,{keyPath:hu.keyPath}),t.createObjectStore(fu.store,{keyPath:fu.keyPath,autoIncrement:!0}).createIndex(fu.userMutationsIndex,fu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(du.store)}(t),Eu(t),function(t){t.createObjectStore(yu.store)}(t));var s=Ws.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(_u.store),t.deleteObjectStore(vu.store),t.deleteObjectStore(bu.store)}(t),Eu(t)),s=s.next((function(){return function(t){var e=t.store(bu.store),n=new bu(0,0,Dr.min().v(),0);return e.put(bu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(fu.store).ts().next((function(n){t.deleteObjectStore(fu.store),t.createObjectStore(fu.store,{keyPath:fu.keyPath,autoIncrement:!0}).createIndex(fu.userMutationsIndex,fu.userMutationsKeyPath,{unique:!0});var r=e.store(fu.store),i=n.map((function(t){return r.put(t)}));return Ws.On(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Cu.store,{keyPath:Cu.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(mu.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(yu.store);e.createIndex(yu.readTimeIndex,yu.readTimeIndexPath,{unique:!1}),e.createIndex(yu.collectionReadTimeIndex,yu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(yu.store).rs((function(t,n){e+=ou(n)})).next((function(){var n=new mu(e);return t.store(mu.store).put(mu.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(hu.store),r=t.store(fu.store);return n.ts().next((function(n){return Ws.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ts(fu.userMutationsIndex,i).next((function(r){return Ws.forEach(r,(function(r){gr(r.userId===n.userId);var i=Wa(e.serializer,r);return Ya(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(_u.store),n=t.store(yu.store);return t.store(bu.store).get(bu.key).next((function(t){var r=[];return n.rs((function(n,i){var o=new Lr(n),s=function(t){return[0,Da(t)]}(o);r.push(e.get(s).next((function(n){return n?Ws.resolve():function(n){return e.put(new _u(0,Da(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Ws.On(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(wu.store,{keyPath:wu.keyPath});var n=e.store(wu.store),r=new au,i=function(t){if(r.add(t)){var e=t.k(),i=t.F();return n.put({collectionId:e,parent:Da(i)})}};return e.store(yu.store).rs({ss:!0},(function(t,e){var n=new Lr(t);return i(n.F())})).next((function(){return e.store(du.store).rs({ss:!0},(function(t,e){var n=Fa(t[1]);return i(n.F())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(vu.store);return n.rs((function(t,r){var i=Ga(r),o=Qa(e.serializer,i);return n.put(o)}))},t}(),cu=function(t,e){this.seconds=t,this.nanoseconds=e},lu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};lu.store="owner",lu.key="owner";var hu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};hu.store="mutationQueues",hu.keyPath="userId";var fu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};fu.store="mutations",fu.keyPath="batchId",fu.userMutationsIndex="userMutationsIndex",fu.userMutationsKeyPath=["userId","batchId"];var du=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Da(e)]},t.key=function(t,e,n){return[t,Da(e),n]},t}();du.store="documentMutations",du.PLACEHOLDER=new du;var pu=function(t,e){this.path=t,this.readTime=e},gu=function(t,e){this.path=t,this.version=e},yu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};yu.store="remoteDocuments",yu.readTimeIndex="readTimeIndex",yu.readTimeIndexPath="readTime",yu.collectionReadTimeIndex="collectionReadTimeIndex",yu.collectionReadTimeIndexPath=["parentPath","readTime"];var mu=function(t){this.byteSize=t};mu.store="remoteDocumentGlobal",mu.key="remoteDocumentGlobalKey";var vu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};vu.store="targets",vu.keyPath="targetId",vu.queryTargetsIndexName="queryTargetsIndex",vu.queryTargetsKeyPath=["canonicalId","targetId"];var _u=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};_u.store="targetDocuments",_u.keyPath=["targetId","path"],_u.documentTargetsIndex="documentTargetsIndex",_u.documentTargetsKeyPath=["path","targetId"];var bu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};bu.key="targetGlobalKey",bu.store="targetGlobal";var wu=function(t,e){this.collectionId=t,this.parent=e};function Eu(t){t.createObjectStore(_u.store,{keyPath:_u.keyPath}).createIndex(_u.documentTargetsIndex,_u.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(vu.store,{keyPath:vu.keyPath}).createIndex(vu.queryTargetsIndexName,vu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(bu.store)}wu.store="collectionParents",wu.keyPath=["collectionId","parent"];var Cu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Cu.store="clientMetadata",Cu.keyPath="clientId";var Su=Object(r.g)(Object(r.g)(Object(r.g)([hu.store,fu.store,du.store,yu.store,vu.store,lu.store,bu.store,_u.store],[Cu.store]),[mu.store]),[wu.store]),Tu=function(){function t(){this.Ro=new au}return t.prototype.jr=function(t,e){var n=this;if(!this.Ro.has(e)){var r=e.k(),i=e.F();t.Ni((function(){n.Ro.add(e)}));var o={collectionId:r,parent:Da(i)};return Ou(t).put(o)}return Ws.resolve()},t.prototype.zi=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[wr(e),""],!1,!0);return Ou(t).ts(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Fa(o.parent))}return n}))},t}();function Ou(t){return Du.Kn(t,wu.store)}var Iu=function(){function t(t){this.Po=t}return t.prototype.next=function(){return this.Po+=2,this.Po},t.yo=function(){return new t(0)},t.Vo=function(){return new t(-1)},t}(),xu=function(){function t(t,e){this.qr=t,this.serializer=e}return t.prototype.po=function(t){var e=this;return this.bo(t).next((function(n){var r=new Iu(n.highestTargetId);return n.highestTargetId=r.next(),e.vo(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.So=function(t){return this.bo(t).next((function(t){return Dr.V(new Rr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Do=function(t){return this.bo(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Co=function(t,e,n){var r=this;return this.bo(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.v()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.vo(t,i)}))},t.prototype.No=function(t,e){var n=this;return this.xo(t,e).next((function(){return n.bo(t).next((function(r){return r.targetCount+=1,n.Fo(e,r),n.vo(t,r)}))}))},t.prototype.Oo=function(t,e){return this.xo(t,e)},t.prototype.ko=function(t,e){var n=this;return this.Mo(t,e.targetId).next((function(){return Au(t).delete(e.targetId)})).next((function(){return n.bo(t)})).next((function(e){return gr(e.targetCount>0),e.targetCount-=1,n.vo(t,e)}))},t.prototype.Or=function(t,e,n){var r=this,i=0,o=[];return Au(t).rs((function(s,a){var u=Ga(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.ko(t,u)))})).next((function(){return Ws.On(o)})).next((function(){return i}))},t.prototype.Ce=function(t,e){return Au(t).rs((function(t,n){var r=Ga(n);e(r)}))},t.prototype.bo=function(t){return ku(t).get(bu.key).next((function(t){return gr(null!==t),t}))},t.prototype.vo=function(t,e){return ku(t).put(bu.key,e)},t.prototype.xo=function(t,e){return Au(t).put(Qa(this.serializer,e))},t.prototype.Fo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.$o=function(t){return this.bo(t).next((function(t){return t.targetCount}))},t.prototype.Lo=function(t,e){var n=Wr(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Au(t).rs({range:r,index:vu.queryTargetsIndexName},(function(t,n,r){var o=Ga(n);Gr(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Bo=function(t,e,n){var r=this,i=[],o=Nu(t);return e.forEach((function(e){var s=Da(e.path);i.push(o.put(new _u(n,s))),i.push(r.qr.qo(t,n,e))})),Ws.On(i)},t.prototype.Uo=function(t,e,n){var r=this,i=Nu(t);return Ws.forEach(e,(function(e){var o=Da(e.path);return Ws.On([i.delete([n,o]),r.qr.Ko(t,n,e)])}))},t.prototype.Mo=function(t,e){var n=Nu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.Qo=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Nu(t),i=fi();return r.rs({range:n,ss:!0},(function(t,e,n){var r=Fa(t[1]),o=new Ur(r);i=i.add(o)})).next((function(){return i}))},t.prototype.ro=function(t,e){var n=Da(e.path),r=IDBKeyRange.bound([n],[wr(n)],!1,!0),i=0;return Nu(t).rs({index:_u.documentTargetsIndex,ss:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Ue=function(t,e){return Au(t).get(e).next((function(t){return t?Ga(t):null}))},t}();function Au(t){return Du.Kn(t,vu.store)}function ku(t){return Du.Kn(t,bu.store)}function Nu(t){return Du.Kn(t,_u.store)}var Pu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ru=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).eo=e,r.Wo=n,r}return Object(r.c)(e,t),e}(Sa),Du=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.fn=o,this.window=s,this.document=a,this.jo=c,this.Go=l,this.zo=null,this.Ho=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Yo=null,this.inForeground=!1,this.Jo=null,this.Xo=null,this.Zo=Number.NEGATIVE_INFINITY,this.ta=function(t){return Promise.resolve()},!t.Ln())throw new ar(sr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.qr=new Fu(this,i),this.ea=n+"main",this.serializer=new Ma(u),this.na=new Gs(this.ea,10,new uu(this.serializer)),this.sa=new xu(this.qr,this.serializer),this.ki=new Tu,this.Fi=function(t,e){return new tu(t,e)}(this.serializer,this.ki),this.window&&this.window.localStorage?this.ia=this.window.localStorage:(this.ia=null,!1===l&&hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Kn=function(t,e){if(t instanceof Ru)return Gs.Kn(t.eo,e);throw pr()},t.prototype.start=function(){var t=this;return this.ra().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ar(sr.FAILED_PRECONDITION,Pu);return t.oa(),t.aa(),t.ca(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.sa.Do(e)}))})).then((function(e){t.zo=new Ia(e,t.jo)})).then((function(){t.Ho=!0})).catch((function(e){return t.na&&t.na.close(),Promise.reject(e)}))},t.prototype.ua=function(t){var e=this;return this.ta=function(n){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.d)(this,(function(e){return this.br?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.ha=function(t){var e=this;this.na.jn((function(n){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.la=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fn.ws((function(){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.d)(this,(function(t){switch(t.label){case 0:return this.br?[4,this.ra()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.ra=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Lu(e).put(new Cu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t._a(e).next((function(e){e||(t.isPrimary=!1,t.fn.Cs((function(){return t.ta(!1)})))}))})).next((function(){return t.fa(e)})).next((function(n){return t.isPrimary&&!n?t.da(e).next((function(){return!1})):!!n&&t.wa(e).next((function(){return!0}))}))})).catch((function(e){if(Ks(e))return lr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return lr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.fn.Cs((function(){return t.ta(e)})),t.isPrimary=e}))},t.prototype._a=function(t){var e=this;return ju(t).get(lu.key).next((function(t){return Ws.resolve(e.Ea(t))}))},t.prototype.Ta=function(t){return Lu(t).delete(this.clientId)},t.prototype.Ia=function(){return Object(r.b)(this,void 0,void 0,(function(){var e,n,i,o=this;return Object(r.d)(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.ma(this.Zo,18e5)?[3,2]:(this.Zo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Kn(e,Cu.store);return n.ts().next((function(t){var e=o.Aa(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Ws.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=r.sent(),this.ia)for(n=0,i=e;n<i.length;n++)this.ia.removeItem(this.Ra(i[n].clientId));r.label=2;case 2:return[2]}}))}))},t.prototype.ca=function(){var t=this;this.Xo=this.fn.yn("client_metadata_refresh",4e3,(function(){return t.ra().then((function(){return t.Ia()})).then((function(){return t.ca()}))}))},t.prototype.Ea=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.fa=function(t){var e=this;return this.Go?Ws.resolve(!0):ju(t).get(lu.key).next((function(n){if(null!==n&&e.ma(n.leaseTimestampMs,5e3)&&!e.Pa(n.ownerId)){if(e.Ea(n)&&e.networkEnabled)return!0;if(!e.Ea(n)){if(!n.allowTabSynchronization)throw new ar(sr.FAILED_PRECONDITION,Pu);return!1}}return!(!e.networkEnabled||!e.inForeground)||Lu(t).ts().next((function(t){return void 0===e.Aa(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&lr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.ga=function(){return Object(r.b)(this,void 0,void 0,(function(){var t=this;return Object(r.d)(this,(function(e){switch(e.label){case 0:return this.Ho=!1,this.ya(),this.Xo&&(this.Xo.cancel(),this.Xo=null),this.Va(),this.pa(),[4,this.na.runTransaction("shutdown","readwrite",[lu.store,Cu.store],(function(e){var n=new Ru(e,Ia.ir);return t.da(n).next((function(){return t.Ta(n)}))}))];case 1:return e.sent(),this.na.close(),this.ba(),[2]}}))}))},t.prototype.Aa=function(t,e){var n=this;return t.filter((function(t){return n.ma(t.updateTimeMs,e)&&!n.Pa(t.clientId)}))},t.prototype.va=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Lu(e).ts().next((function(e){return t.Aa(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"br",{get:function(){return this.Ho},enumerable:!1,configurable:!0}),t.prototype.Sa=function(t){return $a.Kr(t,this.serializer,this.ki,this.qr)},t.prototype.Da=function(){return this.sa},t.prototype.Ca=function(){return this.Fi},t.prototype.Na=function(){return this.ki},t.prototype.runTransaction=function(t,e,n){var r,i=this;return lr("IndexedDbPersistence","Starting transaction:",t),this.na.runTransaction(t,"readonly"===e?"readonly":"readwrite",Su,(function(o){return r=new Ru(o,i.zo?i.zo.next():Ia.ir),"readwrite-primary"===e?i._a(r).next((function(t){return!!t||i.fa(r)})).next((function(e){if(!e)throw hr("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.fn.Cs((function(){return i.ta(!1)})),new ar(sr.FAILED_PRECONDITION,Ca);return n(r)})).next((function(t){return i.wa(r).next((function(){return t}))})):i.xa(r).next((function(){return n(r)}))})).then((function(t){return r.xi(),t}))},t.prototype.xa=function(t){var e=this;return ju(t).get(lu.key).next((function(t){if(null!==t&&e.ma(t.leaseTimestampMs,5e3)&&!e.Pa(t.ownerId)&&!e.Ea(t)&&!(e.Go||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ar(sr.FAILED_PRECONDITION,Pu)}))},t.prototype.wa=function(t){var e=new lu(this.clientId,this.allowTabSynchronization,Date.now());return ju(t).put(lu.key,e)},t.Ln=function(){return Gs.Ln()},t.prototype.da=function(t){var e=this,n=ju(t);return n.get(lu.key).next((function(t){return e.Ea(t)?(lr("IndexedDbPersistence","Releasing primary lease."),n.delete(lu.key)):Ws.resolve()}))},t.prototype.ma=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(hr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.oa=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Jo=function(){t.fn.ws((function(){return t.inForeground="visible"===t.document.visibilityState,t.ra()}))},this.document.addEventListener("visibilitychange",this.Jo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Va=function(){this.Jo&&(this.document.removeEventListener("visibilitychange",this.Jo),this.Jo=null)},t.prototype.aa=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Yo=function(){e.ya(),e.fn.ws((function(){return e.ga()}))},this.window.addEventListener("unload",this.Yo))},t.prototype.pa=function(){this.Yo&&(this.window.removeEventListener("unload",this.Yo),this.Yo=null)},t.prototype.Pa=function(t){var e;try{var n=null!==(null===(e=this.ia)||void 0===e?void 0:e.getItem(this.Ra(t)));return lr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return hr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.ya=function(){if(this.ia)try{this.ia.setItem(this.Ra(this.clientId),String(Date.now()))}catch(t){hr("Failed to set zombie client id.",t)}},t.prototype.ba=function(){if(this.ia)try{this.ia.removeItem(this.Ra(this.clientId))}catch(t){}},t.prototype.Ra=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function ju(t){return Du.Kn(t,lu.store)}function Lu(t){return Du.Kn(t,Cu.store)}var Fu=function(){function t(t,e){this.db=t,this.gr=new Ra(this,e)}return t.prototype.Cr=function(t){var e=this.Fa(t);return this.db.Da().$o(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Fa=function(t){var e=0;return this.Fr(t,(function(t){e++})).next((function(){return e}))},t.prototype.Ce=function(t,e){return this.db.Da().Ce(t,e)},t.prototype.Fr=function(t,e){return this.Oa(t,(function(t,n){return e(n)}))},t.prototype.qo=function(t,e,n){return Mu(t,n)},t.prototype.Ko=function(t,e,n){return Mu(t,n)},t.prototype.Or=function(t,e,n){return this.db.Da().Or(t,e,n)},t.prototype.so=function(t,e){return Mu(t,e)},t.prototype.ka=function(t,e){return function(t,e){var n=!1;return Ja(t).os((function(r){return Ka(t,r,e).next((function(t){return t&&(n=!0),Ws.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.kr=function(t,e){var n=this,r=this.db.Ca().wo(),i=[],o=0;return this.Oa(t,(function(s,a){if(a<=e){var u=n.ka(t,s).next((function(e){if(!e)return o++,r.bi(t,s).next((function(){return r.pi(s),Nu(t).delete([0,Da(s.path)])}))}));i.push(u)}})).next((function(){return Ws.On(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.st(t.Wo);return this.db.Da().Oo(t,n)},t.prototype.Ma=function(t,e){return Mu(t,e)},t.prototype.Oa=function(t,e){var n,r=Nu(t),i=Ia.ir;return r.rs({index:_u.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Ia.ir&&e(new Ur(Fa(n)),i),i=s,n=o):i=Ia.ir})).next((function(){i!==Ia.ir&&e(new Ur(Fa(n)),i)}))},t.prototype.$r=function(t){return this.db.Ca().To(t)},t}();function Mu(t,e){return Nu(t).put(function(t,e){return new _u(0,Da(t.path),e)}(e,t.Wo))}function Uu(t,e){var n=t.projectId;return t.I||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Vu=function(){function t(t,e,n){this.persistence=t,this.$a=e,this.La=new ti(_r),this.Ba=new Pr((function(t){return Wr(t)}),Gr),this.qa=Dr.min(),this.Oi=t.Sa(n),this.Ua=t.Ca(),this.sa=t.Da(),this.Ka=new Ta(this.Ua,this.Oi,this.persistence.Na()),this.$a.Qa(this.Ka)}return t.prototype.vr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Mr(n,e.La)}))},t}();function qu(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s;return Object(r.d)(this,(function(r){switch(r.label){case 0:return n=yr(t),i=n.Oi,o=n.Ka,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var r;return n.Oi.Jr(t).next((function(s){return r=s,i=n.persistence.Sa(e),o=new Ta(n.Ua,i,n.persistence.Na()),i.Jr(t)})).next((function(e){for(var n=[],i=[],s=fi(),a=0,u=r;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];i.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return o.qi(t,s).next((function(t){return{Wa:t,ja:n,Ga:i}}))}))}))];case 1:return s=r.sent(),[2,(n.Oi=i,n.Ka=o,n.$a.Qa(n.Ka),s)]}}))}))}function Bu(t,e){var n=yr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ua.wo({Eo:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Ws.resolve();return o.forEach((function(t){s=s.next((function(){return r.bi(e,t)})).next((function(e){var o=e,s=n.Ai.get(t);gr(null!==s),(!o||o.version.u(s)<0)&&(o=i.wi(t,o,n))&&r.yi(o,n.mi)}))})),s.next((function(){return t.Oi.Zr(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Oi.io(t)})).next((function(){return n.Ka.qi(t,r)}))}))}function Hu(t){var e=yr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.sa.So(t)}))}function zu(t,e){var n=yr(t),r=e.nt,i=n.La;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ua.wo({Eo:!0});i=n.La;var s=[];e.zt.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.sa.Uo(t,e.se,o).next((function(){return n.sa.Bo(t,e.ee,o)})));var u=e.resumeToken;if(u.o()>0){var c=a.it(u,r).st(t.Wo);i=i.ot(o,c),function(t,e,n){return gr(e.resumeToken.o()>0),0===t.resumeToken.o()||e.nt.p()-t.nt.p()>=3e8||n.ee.size+n.ne.size+n.se.size>0}(a,c,e)&&s.push(n.sa.Oo(t,c))}}}));var a=si(),u=fi();if(e.Yt.forEach((function(t,e){u=u.add(t)})),s.push(o.getEntries(t,u).next((function(i){e.Yt.forEach((function(u,c){var l=i.get(u);c instanceof as&&c.version.isEqual(Dr.min())?(o.pi(u,r),a=a.ot(u,c)):null==l||c.version.u(l.version)>0||0===c.version.u(l.version)&&l.hasPendingWrites?(o.yi(c,r),a=a.ot(u,c)):lr("LocalStore","Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),e.Jt.has(u)&&s.push(n.persistence.qr.Ma(t,u))}))}))),!r.isEqual(Dr.min())){var c=n.sa.So(t).next((function(e){return n.sa.Co(t,t.Wo,r)}));s.push(c)}return Ws.On(s).next((function(){return o.apply(t)})).next((function(){return n.Ka.Ui(t,a)}))})).then((function(t){return n.La=i,t}))}function Wu(t,e){var n=yr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Oi.Hr(t,e)}))}function Gu(t,e){var n=yr(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.sa.Lo(t,e).next((function(i){return i?Ws.resolve(r=i):n.sa.po(t).next((function(i){return r=new Yr(e,i,0,t.Wo),n.sa.No(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.La.get(t.targetId);return(null===r||t.nt.u(r.nt)>0)&&(n.La=n.La.ot(t.targetId,t),n.Ba.set(e,t.targetId)),t}))}function Qu(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a;return Object(r.d)(this,(function(r){switch(r.label){case 0:i=yr(t),o=i.La.get(e),s=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",s,(function(t){return i.persistence.qr.removeTarget(t,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!Ks(a=r.sent()))throw a;return lr("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return i.La=i.La.remove(e),i.Ba.delete(o.target),[2]}}))}))}function $u(t,e,n){var r=yr(t),i=Dr.min(),o=fi();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=yr(t),i=r.Ba.get(n);return void 0!==i?Ws.resolve(r.La.get(i)):r.sa.Lo(e,n)}(r,t,vs(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.sa.Qo(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.$a.Qi(t,e,n?i:Dr.min(),n?o:fi())})).next((function(t){return{documents:t,za:o}}))}))}function Ku(t,e){var n=yr(t),r=yr(n.sa),i=n.La.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Ue(t,e).next((function(t){return t?t.target:null}))}))}function Yu(t){var e=yr(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=yr(t),i=si(),o=qa(n),s=ru(e),a=IDBKeyRange.lowerBound(o,!0);return s.rs({index:yu.readTimeIndex,range:a},(function(t,e){var n=Ua(r.serializer,e);i=i.ot(n.key,n),o=e.readTime})).next((function(){return{Ha:i,readTime:Ba(o)}}))}(e.Ua,t,e.qa)})).then((function(t){var n=t.Ha;return e.qa=t.readTime,n}))}function Xu(t){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(n){return[2,(e=yr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=ru(t),n=Dr.min();return e.rs({index:yu.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Ba(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.qa=t}))]}))}))}function Zu(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){if(t.code!==sr.FAILED_PRECONDITION||t.message!==Ca)throw t;return lr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var Ju=function(){function t(t,e,n,r,i,o){this.fn=t,this.Ya=n,this.Ja=r,this.Xa=i,this.listener=o,this.state=0,this.Za=0,this.tc=null,this.stream=null,this.ys=new zs(t,e)}return t.prototype.ec=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.nc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.sc()},t.prototype.stop=function(){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(t){switch(t.label){case 0:return this.ec()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.ic=function(){this.state=0,this.ys.reset()},t.prototype.rc=function(){var t=this;this.nc()&&null===this.tc&&(this.tc=this.fn.yn(this.Ya,6e4,(function(){return t.oc()})))},t.prototype.ac=function(t){this.cc(),this.stream.send(t)},t.prototype.oc=function(){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(t){return this.nc()?[2,this.close(0)]:[2]}))}))},t.prototype.cc=function(){this.tc&&(this.tc.cancel(),this.tc=null)},t.prototype.close=function(t,e){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(n){switch(n.label){case 0:return this.cc(),this.ys.cancel(),this.Za++,3!==t?this.ys.reset():e&&e.code===sr.RESOURCE_EXHAUSTED?(hr(e.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.ys.Rn()):e&&e.code===sr.UNAUTHENTICATED&&this.Xa.ri(),null!==this.stream&&(this.uc(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.hc(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.uc=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.lc(this.Za),n=this.Za;this.Xa.getToken().then((function(e){t.Za===n&&t._c(e)}),(function(n){e((function(){var e=new ar(sr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.fc(e)}))}))},t.prototype._c=function(t){var e=this,n=this.lc(this.Za);this.stream=this.dc(t),this.stream.wc((function(){n((function(){return e.state=2,e.listener.wc()}))})),this.stream.hc((function(t){n((function(){return e.fc(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.sc=function(){var t=this;this.state=4,this.ys.Pn((function(){return Object(r.b)(t,void 0,void 0,(function(){return Object(r.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.fc=function(t){return lr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.lc=function(t){var e=this;return function(n){e.fn.ws((function(){return e.Za===t?n():(lr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),tc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return Object(r.c)(e,t),e.prototype.dc=function(t){return this.Ja.Ec("Listen",t)},e.prototype.onMessage=function(t){this.ys.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:pr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Ke?(gr(void 0===e||"string"==typeof e),Er.fromBase64String(e||"")):(gr(void 0===e||e instanceof Uint8Array),Er.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?sr.UNKNOWN:Jr(t.code);return new ar(e,t.message||"")}(s);n=new Ei(r,i,o,a||null)}else if("documentChange"in e){var u=e.documentChange,c=io(t,u.document.name),l=to(u.document.updateTime),h=new ns({mapValue:{fields:u.document.fields}}),f=new ss(c,l,h,{});n=new bi(u.targetIds||[],u.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){var d=e.documentDelete,p=io(t,d.document),g=d.readTime?to(d.readTime):Dr.min(),y=new as(p,g);n=new bi([],d.removedTargetIds||[],y.key,y)}else if("documentRemove"in e){var m=e.documentRemove,v=io(t,m.document);n=new bi([],m.removedTargetIds||[],v,null)}else{if(!("filter"in e))return pr();var _=e.filter,b=new Xr(_.count||0);n=new wi(_.targetId,b)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Dr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Dr.min():e.readTime?to(e.readTime):Dr.min()}(t);return this.listener.Tc(e,n)},e.prototype.Ic=function(t){var e={};e.database=ao(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=Qr(r)?{documents:fo(t,r)}:{query:po(t,r)}).targetId=e.targetId,e.resumeToken.o()>0&&(n.resumeToken=Zi(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pr()}}(0,e.et);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.ac(e)},e.prototype.mc=function(t){var e={};e.database=ao(this.serializer),e.removeTarget=t,this.ac(e)},e}(Ju),ec=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Ac=!1,s}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"Rc",{get:function(){return this.Ac},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Ac=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.uc=function(){this.Ac&&this.Pc([])},e.prototype.dc=function(t){return this.Ja.Ec("Write",t)},e.prototype.onMessage=function(t){if(gr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Ac){this.ys.reset();var e=function(t,e){return t&&t.length>0?(gr(void 0!==e),t.map((function(t){return function(t,e){var n=to(t.updateTime?t.updateTime:e);n.isEqual(Dr.min())&&(n=to(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Uo(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=to(t.commitTime);return this.listener.gc(n,e)}return gr(!t.writeResults||0===t.writeResults.length),this.Ac=!0,this.listener.yc()},e.prototype.Vc=function(){var t={};t.database=ao(this.serializer),this.ac(t)},e.prototype.Pc=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return lo(e.serializer,t)}))};this.ac(n)},e}(Ju),nc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ja=n,i.serializer=r,i.bc=!1,i}return Object(r.c)(e,t),e.prototype.vc=function(){if(this.bc)throw new ar(sr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Sc=function(t,e,n){var r=this;return this.vc(),this.credentials.getToken().then((function(i){return r.Ja.Sc(t,e,n,i)})).catch((function(t){throw t.code===sr.UNAUTHENTICATED&&r.credentials.ri(),t}))},e.prototype.Dc=function(t,e,n){var r=this;return this.vc(),this.credentials.getToken().then((function(i){return r.Ja.Dc(t,e,n,i)})).catch((function(t){throw t.code===sr.UNAUTHENTICATED&&r.credentials.ri(),t}))},e.prototype.terminate=function(){this.bc=!1},e}((function(){})),rc=function(){function t(t,e){this.cs=t,this.Cc=e,this.state="Unknown",this.Nc=0,this.xc=null,this.Fc=!0}return t.prototype.Oc=function(){var t=this;0===this.Nc&&(this.kc("Unknown"),this.xc=this.cs.yn("online_state_timeout",1e4,(function(){return t.xc=null,t.Mc("Backend didn't respond within 10 seconds."),t.kc("Offline"),Promise.resolve()})))},t.prototype.$c=function(t){"Online"===this.state?this.kc("Unknown"):(this.Nc++,this.Nc>=1&&(this.Lc(),this.Mc("Connection failed 1 times. Most recent error: "+t.toString()),this.kc("Offline")))},t.prototype.set=function(t){this.Lc(),this.Nc=0,"Online"===t&&(this.Fc=!1),this.kc(t)},t.prototype.kc=function(t){t!==this.state&&(this.state=t,this.Cc(t))},t.prototype.Mc=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fc?(hr(e),this.Fc=!1):lr("OnlineStateTracker",e)},t.prototype.Lc=function(){null!==this.xc&&(this.xc.cancel(),this.xc=null)},t}(),ic=function(t,e,n,i,o){var s=this;this.Bc=t,this.qc=e,this.cs=n,this.Uc={},this.Kc=[],this.Qc=new Map,this.Wc=new Set,this.jc=[],this.Gc=o,this.Gc.zc((function(t){n.ws((function(){return Object(r.b)(s,void 0,void 0,(function(){return Object(r.d)(this,(function(t){switch(t.label){case 0:return dc(this)?(lr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(n){switch(n.label){case 0:return(e=yr(t)).Wc.add(4),[4,sc(e)];case 1:return n.sent(),e.Hc.set("Unknown"),e.Wc.delete(4),[4,oc(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Hc=new rc(n,i)};function oc(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n;return Object(r.d)(this,(function(r){switch(r.label){case 0:if(!dc(t))return[3,4];e=0,n=t.jc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function sc(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n;return Object(r.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.jc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function ac(t,e){var n=yr(t);n.Qc.has(e.targetId)||(n.Qc.set(e.targetId,e),fc(n)?hc(n):xc(n).nc()&&cc(n,e))}function uc(t,e){var n=yr(t),r=xc(n);n.Qc.delete(e),r.nc()&&lc(n,e),0===n.Qc.size&&(r.nc()?r.rc():dc(n)&&n.Hc.set("Unknown"))}function cc(t,e){t.Yc.me(e.targetId),xc(t).Ic(e)}function lc(t,e){t.Yc.me(e),xc(t).mc(e)}function hc(t){t.Yc=new Si({qe:function(e){return t.Uc.qe(e)},Ue:function(e){return t.Qc.get(e)||null}}),xc(t).start(),t.Hc.Oc()}function fc(t){return dc(t)&&!xc(t).ec()&&t.Qc.size>0}function dc(t){return 0===yr(t).Wc.size}function pc(t){t.Yc=void 0}function gc(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){return t.Qc.forEach((function(e,n){cc(t,e)})),[2]}))}))}function yc(t,e){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(n){return pc(t),fc(t)?(t.Hc.$c(e),hc(t)):t.Hc.set("Unknown"),[2]}))}))}function mc(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s;return Object(r.d)(this,(function(a){switch(a.label){case 0:if(t.Hc.set("Online"),!(e instanceof Ei&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s;return Object(r.d)(this,(function(r){switch(r.label){case 0:n=e.cause,i=0,o=e.targetIds,r.label=1;case 1:return i<o.length?t.Qc.has(s=o[i])?[4,t.Uc.Jc(s,n)]:[3,3]:[3,5];case 2:r.sent(),t.Qc.delete(s),t.Yc.removeTarget(s),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return i=a.sent(),lr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),[4,vc(t,i)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof bi?t.Yc.be(e):e instanceof wi?t.Yc.Oe(e):t.Yc.De(e),n.isEqual(Dr.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Hu(t.Bc)];case 8:return o=a.sent(),n.u(o)>=0?[4,function(t,e){var n=t.Yc.$e(e);return n.zt.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Qc.get(r);i&&t.Qc.set(r,i.it(n.resumeToken,e))}})),n.Ht.forEach((function(e){var n=t.Qc.get(e);if(n){t.Qc.set(e,n.it(Er.h,n.nt)),lc(t,e);var r=new Yr(n.target,e,1,n.sequenceNumber);cc(t,r)}})),t.Uc.Xc(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return lr("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,vc(t,s)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function vc(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i=this;return Object(r.d)(this,(function(o){switch(o.label){case 0:if(!Ks(e))throw e;return t.Wc.add(1),[4,sc(t)];case 1:return o.sent(),t.Hc.set("Offline"),n||(n=function(){return Hu(t.Bc)}),t.cs.Cs((function(){return Object(r.b)(i,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return lr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Wc.delete(1),[4,oc(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function _c(t,e){return e().catch((function(n){return vc(t,n,e)}))}function bc(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n,i,o,s;return Object(r.d)(this,(function(r){switch(r.label){case 0:e=yr(t),n=Ac(e),i=e.Kc.length>0?e.Kc[e.Kc.length-1].batchId:-1,r.label=1;case 1:if(!function(t){return dc(t)&&t.Kc.length<10}(e))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,Wu(e.Bc,i)];case 3:return null===(o=r.sent())?(0===e.Kc.length&&n.rc(),[3,7]):(i=o.batchId,function(t,e){t.Kc.push(e);var n=Ac(t);n.nc()&&n.Rc&&n.Pc(e.mutations)}(e,o),[3,6]);case 4:return s=r.sent(),[4,vc(e,s)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return wc(e)&&Ec(e),[2]}}))}))}function wc(t){return dc(t)&&!Ac(t).ec()&&t.Kc.length>0}function Ec(t){Ac(t).start()}function Cc(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){return Ac(t).Vc(),[2]}))}))}function Sc(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n,i;return Object(r.d)(this,(function(r){for(e=Ac(t),n=0,i=t.Kc;n<i.length;n++)e.Pc(i[n].mutations);return[2]}))}))}function Tc(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o;return Object(r.d)(this,(function(r){switch(r.label){case 0:return i=t.Kc.shift(),o=wa.from(i,e,n),[4,_c(t,(function(){return t.Uc.Zc(o)}))];case 1:return r.sent(),[4,bc(t)];case 2:return r.sent(),[2]}}))}))}function Oc(t,e){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(n){switch(n.label){case 0:return e&&Ac(t).Rc?[4,function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i;return Object(r.d)(this,(function(r){switch(r.label){case 0:return Zr(i=e.code)&&i!==sr.ABORTED?(n=t.Kc.shift(),Ac(t).ic(),[4,_c(t,(function(){return t.Uc.tu(n.batchId,e)}))]):[3,3];case 1:return r.sent(),[4,bc(t)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return wc(t)&&Ec(t),[2]}}))}))}function Ic(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n;return Object(r.d)(this,(function(r){switch(r.label){case 0:return n=yr(t),e?(n.Wc.delete(2),[4,oc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Wc.add(2),[4,sc(n)]);case 3:r.sent(),n.Hc.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function xc(t){var e=this;return t.eu||(t.eu=function(t,e,n){var r=yr(t);return r.vc(),new tc(e,r.Ja,r.credentials,r.serializer,n)}(t.qc,t.cs,{wc:gc.bind(null,t),hc:yc.bind(null,t),Tc:mc.bind(null,t)}),t.jc.push((function(n){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return n?(t.eu.ic(),fc(t)?hc(t):t.Hc.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.eu.stop()];case 2:e.sent(),pc(t),e.label=3;case 3:return[2]}}))}))}))),t.eu}function Ac(t){var e=this;return t.nu||(t.nu=function(t,e,n){var r=yr(t);return r.vc(),new ec(e,r.Ja,r.credentials,r.serializer,n)}(t.qc,t.cs,{wc:Cc.bind(null,t),hc:Oc.bind(null,t),yc:Sc.bind(null,t),gc:Tc.bind(null,t)}),t.jc.push((function(n){return Object(r.b)(e,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return n?(t.nu.ic(),[4,bc(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.nu.stop()];case 3:e.sent(),t.Kc.length>0&&(lr("RemoteStore","Stopping write stream with "+t.Kc.length+" pending writes"),t.Kc=[]),e.label=4;case 4:return[2]}}))}))}))),t.nu}var kc=function(){function t(){this.su=new ri(Nc.iu),this.ru=new ri(Nc.ou)}return t.prototype.P=function(){return this.su.P()},t.prototype.qo=function(t,e){var n=new Nc(t,e);this.su=this.su.add(n),this.ru=this.ru.add(n)},t.prototype.au=function(t,e){var n=this;t.forEach((function(t){return n.qo(t,e)}))},t.prototype.Ko=function(t,e){this.cu(new Nc(t,e))},t.prototype.uu=function(t,e){var n=this;t.forEach((function(t){return n.Ko(t,e)}))},t.prototype.hu=function(t){var e=this,n=new Ur(new Lr([])),r=new Nc(n,t),i=new Nc(n,t+1),o=[];return this.ru.xt([r,i],(function(t){e.cu(t),o.push(t.key)})),o},t.prototype.lu=function(){var t=this;this.su.forEach((function(e){return t.cu(e)}))},t.prototype.cu=function(t){this.su=this.su.delete(t),this.ru=this.ru.delete(t)},t.prototype._u=function(t){var e=new Ur(new Lr([])),n=new Nc(e,t),r=new Nc(e,t+1),i=fi();return this.ru.xt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.ro=function(t){var e=new Nc(t,0),n=this.su.Ot(e);return null!==n&&t.isEqual(n.key)},t}(),Nc=function(){function t(t,e){this.key=t,this.fu=e}return t.iu=function(t,e){return Ur.D(t.key,e.key)||_r(t.fu,e.fu)},t.ou=function(t,e){return _r(t.fu,e.fu)||Ur.D(t.key,e.key)},t}();function Pc(t,e){return"firestore_clients_"+t+"_"+e}function Rc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Zs()&&(r+="_"+e.uid),r}function Dc(t,e){return"firestore_targets_"+t+"_"+e}var jc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.du=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new ar(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(hr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.wu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Lc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.du=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new ar(r.error.code,r.error.message)),i?new t(e,r.state,o):(hr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.wu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Fc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.du=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=pi(),s=0;i&&s<r.activeTargetIds.length;++s)i=Br(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(hr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Mc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.du=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(hr("SharedClientState","Failed to parse online state: "+e),null)},t}(),Uc=function(){function t(){this.activeTargetIds=pi()}return t.prototype.Eu=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Tu=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.wu=function(){var t={activeTargetIds:this.activeTargetIds.L(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Vc=function(){function t(t,e,n,r,i){this.window=t,this.fn=e,this.persistenceKey=n,this.Iu=r,this.mu=null,this.Cc=null,this.tr=null,this.Au=this.Ru.bind(this),this.Pu=new ti(_r),this.br=!1,this.gu=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.yu=Pc(this.persistenceKey,this.Iu),this.Vu=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Pu=this.Pu.ot(this.Iu,new Uc),this.pu=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.bu=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.vu=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Su=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Au)}return t.Ln=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(r.b)(this,void 0,void 0,(function(){var t,e,n,i,o,s,a,u,c,l,h=this;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,this.mu.va()];case 1:for(t=r.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this.Iu&&(o=this.getItem(Pc(this.persistenceKey,i)))&&(s=Fc.du(i,o))&&(this.Pu=this.Pu.ot(s.clientId,s));for(this.Du(),(a=this.storage.getItem(this.Su))&&(u=this.Cu(a))&&this.Nu(u),c=0,l=this.gu;c<l.length;c++)this.Ru(l[c]);return this.gu=[],this.window.addEventListener("unload",(function(){return h.ga()})),this.br=!0,[2]}}))}))},t.prototype.sr=function(t){this.setItem(this.Vu,JSON.stringify(t))},t.prototype.xu=function(){return this.Fu(this.Pu)},t.prototype.Ou=function(t){var e=!1;return this.Pu.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.ku=function(t){this.Mu(t,"pending")},t.prototype.$u=function(t,e,n){this.Mu(t,e,n),this.Lu(t)},t.prototype.Bu=function(t){var e="not-current";if(this.Ou(t)){var n=this.storage.getItem(Dc(this.persistenceKey,t));if(n){var r=Lc.du(t,n);r&&(e=r.state)}}return this.qu.Eu(t),this.Du(),e},t.prototype.Uu=function(t){this.qu.Tu(t),this.Du()},t.prototype.Ku=function(t){return this.qu.activeTargetIds.has(t)},t.prototype.Qu=function(t){this.removeItem(Dc(this.persistenceKey,t))},t.prototype.Wu=function(t,e,n){this.ju(t,e,n)},t.prototype.Gu=function(t,e,n){var r=this;e.forEach((function(t){r.Lu(t)})),this.currentUser=t,n.forEach((function(t){r.ku(t)}))},t.prototype.zu=function(t){this.Hu(t)},t.prototype.ga=function(){this.br&&(this.window.removeEventListener("storage",this.Au),this.removeItem(this.yu),this.br=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return lr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){lr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){lr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ru=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(lr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.yu)return void hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs((function(){return Object(r.b)(e,void 0,void 0,(function(){var t,e,i,o,s,a;return Object(r.d)(this,(function(r){if(this.br){if(null!==n.key)if(this.pu.test(n.key)){if(null==n.newValue)return t=this.Yu(n.key),[2,this.Ju(t,null)];if(e=this.Xu(n.key,n.newValue))return[2,this.Ju(e.clientId,e)]}else if(this.bu.test(n.key)){if(null!==n.newValue&&(i=this.Zu(n.key,n.newValue)))return[2,this.th(i)]}else if(this.vu.test(n.key)){if(null!==n.newValue&&(o=this.eh(n.key,n.newValue)))return[2,this.nh(o)]}else if(n.key===this.Su){if(null!==n.newValue&&(s=this.Cu(n.newValue)))return[2,this.Nu(s)]}else n.key===this.Vu&&(a=function(t){var e=Ia.ir;if(null!=t)try{var n=JSON.parse(t);gr("number"==typeof n),e=n}catch(t){hr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ia.ir&&this.tr(a)}else this.gu.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"qu",{get:function(){return this.Pu.get(this.Iu)},enumerable:!1,configurable:!0}),t.prototype.Du=function(){this.setItem(this.yu,this.qu.wu())},t.prototype.Mu=function(t,e,n){var r=new jc(this.currentUser,t,e,n),i=Rc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.wu())},t.prototype.Lu=function(t){var e=Rc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Hu=function(t){this.storage.setItem(this.Su,JSON.stringify({clientId:this.Iu,onlineState:t}))},t.prototype.ju=function(t,e,n){var r=Dc(this.persistenceKey,t),i=new Lc(t,e,n);this.setItem(r,i.wu())},t.prototype.Yu=function(t){var e=this.pu.exec(t);return e?e[1]:null},t.prototype.Xu=function(t,e){var n=this.Yu(t);return Fc.du(n,e)},t.prototype.Zu=function(t,e){var n=this.bu.exec(t),r=Number(n[1]);return jc.du(new pa(void 0!==n[2]?n[2]:null),r,e)},t.prototype.eh=function(t,e){var n=this.vu.exec(t),r=Number(n[1]);return Lc.du(r,e)},t.prototype.Cu=function(t){return Mc.du(t)},t.prototype.th=function(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.mu.sh(t.batchId,t.state,t.error)]:(lr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.nh=function(t){return this.mu.ih(t.targetId,t.state,t.error)},t.prototype.Ju=function(t,e){var n=this,r=e?this.Pu.ot(t,e):this.Pu.remove(t),i=this.Fu(this.Pu),o=this.Fu(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.mu.rh(s,a).then((function(){n.Pu=r}))},t.prototype.Nu=function(t){this.Pu.get(t.clientId)&&this.Cc(t.onlineState)},t.prototype.Fu=function(t){var e=pi();return t.forEach((function(t,n){e=e.kt(n.activeTargetIds)})),e},t}(),qc=function(){function t(){this.oh=new Uc,this.ah={},this.Cc=null,this.tr=null}return t.prototype.ku=function(t){},t.prototype.$u=function(t,e,n){},t.prototype.Bu=function(t){return this.oh.Eu(t),this.ah[t]||"not-current"},t.prototype.Wu=function(t,e,n){this.ah[t]=e},t.prototype.Uu=function(t){this.oh.Tu(t)},t.prototype.Ku=function(t){return this.oh.activeTargetIds.has(t)},t.prototype.Qu=function(t){delete this.ah[t]},t.prototype.xu=function(){return this.oh.activeTargetIds},t.prototype.Ou=function(t){return this.oh.activeTargetIds.has(t)},t.prototype.start=function(){return this.oh=new Uc,Promise.resolve()},t.prototype.Gu=function(t,e,n){},t.prototype.zu=function(t){},t.prototype.ga=function(){},t.prototype.sr=function(t){},t}(),Bc=function(t){this.key=t},Hc=function(t){this.key=t},zc=function(){function t(t,e){this.query=t,this.uh=e,this.hh=null,this.te=!1,this.lh=fi(),this.Qt=fi(),this._h=Os(t),this.fh=new gi(this._h)}return Object.defineProperty(t.prototype,"dh",{get:function(){return this.uh},enumerable:!1,configurable:!0}),t.prototype.wh=function(t,e){var n=this,r=e?e.Eh:new yi,i=e?e.fh:this.fh,o=e?e.Qt:this.Qt,s=i,a=!1,u=fs(this.query)&&i.size===this.query.limit?i.last():null,c=ds(this.query)&&i.size===this.query.limit?i.first():null;if(t.ht((function(t,e){var l=i.get(t),h=e instanceof ss?e:null;h&&(h=Ts(n.query,h)?h:null);var f=!!l&&n.Qt.has(l.key),d=!!h&&(h.Je||n.Qt.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Th(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n._h(h,u)>0||c&&n._h(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),fs(this.query)||ds(this.query))for(;s.size>this.query.limit;){var l=fs(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fh:s,Eh:r,Ih:a,Qt:o}},t.prototype.Th=function(t,e){return t.Je&&e.hasCommittedMutations&&!e.Je},t.prototype.Di=function(t,e,n){var r=this,i=this.fh;this.fh=t.fh,this.Qt=t.Qt;var o=t.Eh.Ut();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pr()}};return n(t)-n(e)}(t.type,e.type)||r._h(t.doc,e.doc)})),this.mh(n);var s=e?this.Ah():[],a=0===this.lh.size&&this.te?1:0,u=a!==this.hh;return this.hh=a,0!==o.length||u?{snapshot:new mi(this.query,t.fh,i,o,t.Qt,0===a,u,!1),Rh:s}:{Rh:s}},t.prototype.Ks=function(t){return this.te&&"Offline"===t?(this.te=!1,this.Di({fh:this.fh,Eh:new yi,Qt:this.Qt,Ih:!1},!1)):{Rh:[]}},t.prototype.Ph=function(t){return!this.uh.has(t)&&!!this.fh.has(t)&&!this.fh.get(t).Je},t.prototype.mh=function(t){var e=this;t&&(t.ee.forEach((function(t){return e.uh=e.uh.add(t)})),t.ne.forEach((function(t){})),t.se.forEach((function(t){return e.uh=e.uh.delete(t)})),this.te=t.te)},t.prototype.Ah=function(){var t=this;if(!this.te)return[];var e=this.lh;this.lh=fi(),this.fh.forEach((function(e){t.Ph(e.key)&&(t.lh=t.lh.add(e.key))}));var n=[];return e.forEach((function(e){t.lh.has(e)||n.push(new Hc(e))})),this.lh.forEach((function(t){e.has(t)||n.push(new Bc(t))})),n},t.prototype.gh=function(t){this.uh=t.za,this.lh=fi();var e=this.wh(t.documents);return this.Di(e,!0)},t.prototype.yh=function(){return mi.Gt(this.query,this.fh,this.Qt,0===this.hh)},t}(),Wc=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Gc=function(t){this.key=t,this.Vh=!1},Qc=function(){function t(t,e,n,r,i,o){this.Bc=t,this.ph=e,this.bh=n,this.Sh=r,this.currentUser=i,this.Dh=o,this.Ch={},this.Nh=new Pr((function(t){return Cs(t)}),Es),this.xh=new Map,this.Fh=[],this.Oh=new ti(Ur.D),this.kh=new Map,this.Mh=new kc,this.$h={},this.Lh=new Map,this.Bh=Iu.Vo(),this.onlineState="Unknown",this.qh=void 0}return Object.defineProperty(t.prototype,"Uh",{get:function(){return!0===this.qh},enumerable:!1,configurable:!0}),t}();function $c(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a;return Object(r.d)(this,(function(r){switch(r.label){case 0:return n=El(t),(o=n.Nh.get(e))?(n.Sh.Bu(o.targetId),i=o.view.yh(),[3,4]):[3,1];case 1:return[4,Gu(n.Bc,vs(e))];case 2:return s=r.sent(),a=n.Sh.Bu(s.targetId),[4,Kc(n,e,s.targetId,"current"===a)];case 3:i=r.sent(),n.Uh&&ac(n.ph,s),r.label=4;case 4:return[2,i]}}))}))}function Kc(t,e,n,i){return Object(r.b)(this,void 0,void 0,(function(){var o,s,a,u,c,l;return Object(r.d)(this,(function(h){switch(h.label){case 0:return t.Kh=function(e,n,i){return function(t,e,n,i){return Object(r.b)(this,void 0,void 0,(function(){var o,s,a;return Object(r.d)(this,(function(r){switch(r.label){case 0:return(o=e.view.wh(n)).Ih?[4,$u(t.Bc,e.query,!1).then((function(t){return e.view.wh(t.documents,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return s=i&&i.zt.get(e.targetId),a=e.view.Di(o,t.Uh,s),[2,(ul(t,e.targetId,a.Rh),a.snapshot)]}}))}))}(t,e,n,i)},[4,$u(t.Bc,e,!0)];case 1:return o=h.sent(),s=new zc(e,o.za),a=s.wh(o.documents),u=_i.Zt(n,i&&"Offline"!==t.onlineState),c=s.Di(a,t.Uh,u),ul(t,n,c.Rh),l=new Wc(e,n,s),[2,(t.Nh.set(e,l),t.xh.has(n)?t.xh.get(n).push(e):t.xh.set(n,[e]),c.snapshot)]}}))}))}function Yc(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o;return Object(r.d)(this,(function(r){switch(r.label){case 0:return n=yr(t),i=n.Nh.get(e),(o=n.xh.get(i.targetId)).length>1?[2,(n.xh.set(i.targetId,o.filter((function(t){return!Es(t,e)}))),void n.Nh.delete(e))]:n.Uh?(n.Sh.Uu(i.targetId),n.Sh.Ou(i.targetId)?[3,2]:[4,Qu(n.Bc,i.targetId,!1).then((function(){n.Sh.Qu(i.targetId),uc(n.ph,i.targetId),sl(n,i.targetId)})).catch(Zu)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return sl(n,i.targetId),[4,Qu(n.Bc,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function Xc(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a;return Object(r.d)(this,(function(r){switch(r.label){case 0:i=Cl(t),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(t,e){var n,r=yr(t),i=Rr.now(),o=e.reduce((function(t,e){return t.add(e.key)}),fi());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ka.qi(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Wo(c,n.get(c.key));null!=l&&s.push(new Ko(c.key,l,is(l.proto.mapValue),Vo.exists(!0)))}return r.Oi.Wr(t,i,s,e)}))})).then((function(t){var e=t.Ii(n);return{batchId:t.batchId,Ri:e}}))}(i.Bc,e)];case 2:return o=r.sent(),i.Sh.ku(o.batchId),function(t,e,n){var r=t.$h[t.currentUser.ti()];r||(r=new ti(_r)),r=r.ot(e,n),t.$h[t.currentUser.ti()]=r}(i,o.batchId,n),[4,hl(i,o.Ri)];case 3:return r.sent(),[4,bc(i.ph)];case 4:return r.sent(),[3,6];case 5:return s=r.sent(),a=oa(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Zc(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i;return Object(r.d)(this,(function(r){switch(r.label){case 0:n=yr(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,zu(n.Bc,e)];case 2:return i=r.sent(),e.zt.forEach((function(t,e){var r=n.kh.get(e);r&&(gr(t.ee.size+t.ne.size+t.se.size<=1),t.ee.size>0?r.Vh=!0:t.ne.size>0?gr(r.Vh):t.se.size>0&&(gr(r.Vh),r.Vh=!1))})),[4,hl(n,i,e)];case 3:return r.sent(),[3,6];case 4:return[4,Zu(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Jc(t,e,n){var r=yr(t);if(r.Uh&&0===n||!r.Uh&&1===n){var i=[];r.Nh.forEach((function(t,n){var r=n.view.Ks(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=yr(t);n.onlineState=e;var r=!1;n.Bs.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Ks(e)&&(r=!0)})),r&&fa(n)}(r.bh,e),i.length&&r.Ch.Tc(i),r.onlineState=e,r.Uh&&r.Sh.zu(e)}}function tl(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(r.d)(this,(function(r){switch(r.label){case 0:return(i=yr(t)).Sh.Wu(e,"rejected",n),o=i.kh.get(e),(s=o&&o.key)?(a=(a=new ti(Ur.D)).ot(s,new as(s,Dr.min())),u=fi().add(s),c=new vi(Dr.min(),new Map,new ri(_r),a,u),[4,Zc(i,c)]):[3,2];case 1:return r.sent(),i.Oh=i.Oh.remove(s),i.kh.delete(e),ll(i),[3,4];case 2:return[4,Qu(i.Bc,e,!1).then((function(){return sl(i,e,n)})).catch(Zu)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function el(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o;return Object(r.d)(this,(function(r){switch(r.label){case 0:n=yr(t),i=e.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Bu(n.Bc,e)];case 2:return o=r.sent(),ol(n,i,null),il(n,i),n.Sh.$u(i,"acknowledged"),[4,hl(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,Zu(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function nl(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o;return Object(r.d)(this,(function(r){switch(r.label){case 0:i=yr(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(t,e){var n=yr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Oi.Gr(t,e).next((function(e){return gr(null!==e),r=e.keys(),n.Oi.Zr(t,e)})).next((function(){return n.Oi.io(t)})).next((function(){return n.Ka.qi(t,r)}))}))}(i.Bc,e)];case 2:return o=r.sent(),ol(i,e,n),il(i,e),i.Sh.$u(e,"rejected",n),[4,hl(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,Zu(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function rl(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a;return Object(r.d)(this,(function(r){switch(r.label){case 0:dc((n=yr(t)).ph)||lr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(t){var e=yr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Oi.Yr(t)}))}(n.Bc)];case 2:return-1===(i=r.sent())?[2,void e.resolve()]:((o=n.Lh.get(i)||[]).push(e),n.Lh.set(i,o),[3,4]);case 3:return s=r.sent(),a=oa(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function il(t,e){(t.Lh.get(e)||[]).forEach((function(t){t.resolve()})),t.Lh.delete(e)}function ol(t,e,n){var r=yr(t),i=r.$h[r.currentUser.ti()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$h[r.currentUser.ti()]=i}}function sl(t,e,n){void 0===n&&(n=null),t.Sh.Uu(e);for(var r=0,i=t.xh.get(e);r<i.length;r++){var o=i[r];t.Nh.delete(o),n&&t.Ch.Qh(o,n)}t.xh.delete(e),t.Uh&&t.Mh.hu(e).forEach((function(e){t.Mh.ro(e)||al(t,e)}))}function al(t,e){var n=t.Oh.get(e);null!==n&&(uc(t.ph,n),t.Oh=t.Oh.remove(e),t.kh.delete(n),ll(t))}function ul(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Bc?(t.Mh.qo(o.key,e),cl(t,o)):o instanceof Hc?(lr("SyncEngine","Document no longer in limbo: "+o.key),t.Mh.Ko(o.key,e),t.Mh.ro(o.key)||al(t,o.key)):pr()}}function cl(t,e){var n=e.key;t.Oh.get(n)||(lr("SyncEngine","New document in limbo: "+n),t.Fh.push(n),ll(t))}function ll(t){for(;t.Fh.length>0&&t.Oh.size<t.Dh;){var e=t.Fh.shift(),n=t.Bh.next();t.kh.set(n,new Gc(e)),t.Oh=t.Oh.ot(e,n),ac(t.ph,new Yr(vs(hs(e.path)),n,2,Ia.ir))}}function hl(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a;return Object(r.d)(this,(function(u){switch(u.label){case 0:return i=yr(t),o=[],s=[],a=[],i.Nh.P()?[3,3]:(i.Nh.forEach((function(t,r){a.push(i.Kh(r,e,n).then((function(t){if(t){i.Uh&&i.Sh.Wu(r.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=Oa.Zi(r.targetId,t);s.push(e)}})))})),[4,Promise.all(a)]);case 1:return u.sent(),i.Ch.Tc(o),[4,function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,l;return Object(r.d)(this,(function(r){switch(r.label){case 0:n=yr(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Ws.forEach(e,(function(e){return Ws.forEach(e.Ji,(function(r){return n.persistence.qr.qo(t,e.targetId,r)})).next((function(){return Ws.forEach(e.Xi,(function(r){return n.persistence.qr.Ko(t,e.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!Ks(i=r.sent()))throw i;return lr("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,s=e;o<s.length;o++)u=(a=s[o]).targetId,a.fromCache||(c=n.La.get(u),l=c.rt(c.nt),n.La=n.La.ot(u,l));return[2]}}))}))}(i.Bc,s)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function fl(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i;return Object(r.d)(this,(function(r){switch(r.label){case 0:return(n=yr(t)).currentUser.isEqual(e)?[3,3]:(lr("SyncEngine","User change. New user:",e.ti()),[4,qu(n.Bc,e)]);case 1:return i=r.sent(),n.currentUser=e,function(t,e){t.Lh.forEach((function(t){t.forEach((function(t){t.reject(new ar(sr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Lh.clear()}(n),n.Sh.Gu(e,i.ja,i.Ga),[4,hl(n,i.Wa)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}function dl(t,e){var n=yr(t),r=n.kh.get(e);if(r&&r.Vh)return fi().add(r.key);var i=fi(),o=n.xh.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Nh.get(a[s]);i=i.kt(u.view.dh)}return i}function pl(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,$u((n=yr(t)).Bc,e.query,!0)];case 1:return i=r.sent(),o=e.view.gh(i),[2,(n.Uh&&ul(n,e.targetId,o.Rh),o)]}}))}))}function gl(t,e,n,i){return Object(r.b)(this,void 0,void 0,(function(){var o,s;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,function(t,e){var n=yr(t),r=yr(n.Oi);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.zr(t,e).next((function(e){return e?n.Ka.qi(t,e):Ws.resolve(null)}))}))}((o=yr(t)).Bc,e)];case 1:return null===(s=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,bc(o.ph)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(ol(o,e,i||null),il(o,e),function(t,e){yr(yr(t).Oi).no(e)}(o.Bc,e)):pr(),r.label=4;case 4:return[4,hl(o,s)];case 5:return r.sent(),[3,7];case 6:lr("SyncEngine","Cannot apply mutation batch with id: "+e),r.label=7;case 7:return[2]}}))}))}function yl(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c;return Object(r.d)(this,(function(r){switch(r.label){case 0:return El(n=yr(t)),Cl(n),!0!==e||!0===n.qh?[3,3]:(i=n.Sh.xu(),[4,ml(n,i.L())]);case 1:return o=r.sent(),n.qh=!0,[4,Ic(n.ph,!0)];case 2:for(r.sent(),s=0,a=o;s<a.length;s++)ac(n.ph,a[s]);return[3,7];case 3:return!1!==e||!1===n.qh?[3,7]:(u=[],c=Promise.resolve(),n.xh.forEach((function(t,e){n.Sh.Ku(e)?u.push(e):c=c.then((function(){return sl(n,e),Qu(n.Bc,e,!0)})),uc(n.ph,e)})),[4,c]);case 4:return r.sent(),[4,ml(n,u)];case 5:return r.sent(),function(t){var e=yr(t);e.kh.forEach((function(t,n){uc(e.ph,n)})),e.Mh.lu(),e.kh=new Map,e.Oh=new ti(Ur.D)}(n),n.qh=!1,[4,Ic(n.ph,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function ml(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,l,h,f,d,p,g;return Object(r.d)(this,(function(r){switch(r.label){case 0:n=yr(t),i=[],o=[],s=0,a=e,r.label=1;case 1:return s<a.length?(c=void 0,(l=n.xh.get(u=a[s]))&&0!==l.length?[4,Gu(n.Bc,vs(l[0]))]:[3,7]):[3,13];case 2:c=r.sent(),h=0,f=l,r.label=3;case 3:return h<f.length?(d=n.Nh.get(f[h]),[4,pl(n,d)]):[3,6];case 4:(p=r.sent()).snapshot&&o.push(p.snapshot),r.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Ku(n.Bc,u)];case 8:return g=r.sent(),[4,Gu(n.Bc,g)];case 9:return c=r.sent(),[4,Kc(n,vl(g),u,!1)];case 10:r.sent(),r.label=11;case 11:i.push(c),r.label=12;case 12:return s++,[3,1];case 13:return[2,(n.Ch.Tc(o),i)]}}))}))}function vl(t){return ls(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function _l(t){var e=yr(t);return yr(yr(e.Bc).persistence).va()}function bl(t,e,n,i){return Object(r.b)(this,void 0,void 0,(function(){var o,s,a;return Object(r.d)(this,(function(r){switch(r.label){case 0:return(o=yr(t)).qh?(lr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.xh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Yu(o.Bc)];case 3:return s=r.sent(),a=vi.Xt(e,"current"===n),[4,hl(o,s,a)];case 4:return r.sent(),[3,8];case 5:return[4,Qu(o.Bc,e,!0)];case 6:return r.sent(),sl(o,e,i),[3,8];case 7:pr(),r.label=8;case 8:return[2]}}))}))}function wl(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,h,f;return Object(r.d)(this,(function(d){switch(d.label){case 0:if(!(i=El(t)).qh)return[3,10];o=0,s=e,d.label=1;case 1:return o<s.length?i.xh.has(a=s[o])?(lr("SyncEngine","Adding an already active target "+a),[3,5]):[4,Ku(i.Bc,a)]:[3,6];case 2:return u=d.sent(),[4,Gu(i.Bc,u)];case 3:return c=d.sent(),[4,Kc(i,vl(u),c.targetId,!1)];case 4:d.sent(),ac(i.ph,c),d.label=5;case 5:return o++,[3,1];case 6:l=function(t){return Object(r.d)(this,(function(e){switch(e.label){case 0:return i.xh.has(t)?[4,Qu(i.Bc,t,!1).then((function(){uc(i.ph,t),sl(i,t)})).catch(Zu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,d.label=7;case 7:return h<f.length?[5,l(f[h])]:[3,10];case 8:d.sent(),d.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function El(t){var e=yr(t);return e.ph.Uc.Xc=Zc.bind(null,e),e.ph.Uc.qe=dl.bind(null,e),e.ph.Uc.Jc=tl.bind(null,e),e.Ch.Tc=la.bind(null,e.bh),e.Ch.Qh=ha.bind(null,e.bh),e}function Cl(t){var e=yr(t);return e.ph.Uc.Zc=el.bind(null,e),e.ph.Uc.tu=nl.bind(null,e),e}var Sl=function(){function t(){}return t.prototype.Qa=function(t){this.Wh=t},t.prototype.Qi=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.on.length||1===t.on.length&&t.on[0].field.W())}(e)||n.isEqual(Dr.min())?this.jh(t,e):this.Wh.qi(t,r).next((function(s){var a=i.Gh(e,s);return(fs(e)||ds(e))&&i.Ih(e.an,a,r,n)?i.jh(t,e):(cr()<=o.a.DEBUG&&lr("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ss(e)),i.Wh.Qi(t,e,n).next((function(t){return a.forEach((function(e){t=t.ot(e.key,e)})),t})))}))},t.prototype.Gh=function(t,e){var n=new ri(Os(t));return e.forEach((function(e,r){r instanceof ss&&Ts(t,r)&&(n=n.add(r))})),n},t.prototype.Ih=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.jh=function(t,e){return cr()<=o.a.DEBUG&&lr("IndexFreeQueryEngine","Using full collection scan to execute query:",Ss(e)),this.Wh.Qi(t,e,Dr.min())},t}(),Tl=function(){function t(t,e){this.ki=t,this.qr=e,this.Oi=[],this.zh=1,this.Hh=new ri(Nc.iu)}return t.prototype.Qr=function(t){return Ws.resolve(0===this.Oi.length)},t.prototype.Wr=function(t,e,n,r){var i=this.zh;this.zh++;var o=new ba(i,e,n,r);this.Oi.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Hh=this.Hh.add(new Nc(u.key,i)),this.ki.jr(t,u.key.path.F())}return Ws.resolve(o)},t.prototype.Gr=function(t,e){return Ws.resolve(this.Yh(e))},t.prototype.Hr=function(t,e){var n=this.Jh(e+1),r=n<0?0:n;return Ws.resolve(this.Oi.length>r?this.Oi[r]:null)},t.prototype.Yr=function(){return Ws.resolve(0===this.Oi.length?-1:this.zh-1)},t.prototype.Jr=function(t){return Ws.resolve(this.Oi.slice())},t.prototype.$i=function(t,e){var n=this,r=new Nc(e,0),i=new Nc(e,Number.POSITIVE_INFINITY),o=[];return this.Hh.xt([r,i],(function(t){var e=n.Yh(t.fu);o.push(e)})),Ws.resolve(o)},t.prototype.Ki=function(t,e){var n=this,r=new ri(_r);return e.forEach((function(t){var e=new Nc(t,0),i=new Nc(t,Number.POSITIVE_INFINITY);n.Hh.xt([e,i],(function(t){r=r.add(t.fu)}))})),Ws.resolve(this.Xh(r))},t.prototype.Hi=function(t,e){var n=e.path,r=n.length+1,i=n;Ur.X(i)||(i=i.child(""));var o=new Nc(new Ur(i),0),s=new ri(_r);return this.Hh.Ft((function(t){var e=t.key.path;return!!n.M(e)&&(e.length===r&&(s=s.add(t.fu)),!0)}),o),Ws.resolve(this.Xh(s))},t.prototype.Xh=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Yh(t);null!==r&&n.push(r)})),n},t.prototype.Zr=function(t,e){var n=this;gr(0===this.Zh(e.batchId,"removed")),this.Oi.shift();var r=this.Hh;return Ws.forEach(e.mutations,(function(i){var o=new Nc(i.key,e.batchId);return r=r.delete(o),n.qr.so(t,i.key)})).next((function(){n.Hh=r}))},t.prototype.no=function(t){},t.prototype.ro=function(t,e){var n=new Nc(e,0),r=this.Hh.Ot(n);return Ws.resolve(e.isEqual(r&&r.key))},t.prototype.io=function(t){return Ws.resolve()},t.prototype.Zh=function(t,e){return this.Jh(t)},t.prototype.Jh=function(t){return 0===this.Oi.length?0:t-this.Oi[0].batchId},t.prototype.Yh=function(t){var e=this.Jh(t);return e<0||e>=this.Oi.length?null:this.Oi[e]},t}(),Ol=function(){function t(t,e){this.ki=t,this.tl=e,this.docs=new ti(Ur.D),this.size=0}return t.prototype.yi=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.tl(e);return this.docs=this.docs.ot(r,{ho:e,size:s,readTime:n}),this.size+=s-o,this.ki.jr(t,r.path.F())},t.prototype.pi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.bi=function(t,e){var n=this.docs.get(e);return Ws.resolve(n?n.ho:null)},t.prototype.getEntries=function(t,e){var n=this,r=ai();return e.forEach((function(t){var e=n.docs.get(t);r=r.ot(t,e?e.ho:null)})),Ws.resolve(r)},t.prototype.Qi=function(t,e,n){for(var r=ci(),i=new Ur(e.path.child("")),o=this.docs.ft(i);o.At();){var s=o.It(),a=s.value,u=a.ho,c=a.readTime;if(!e.path.M(s.key.path))break;c.u(n)<=0||u instanceof ss&&Ts(e,u)&&(r=r.ot(u.key,u))}return Ws.resolve(r)},t.prototype.el=function(t,e){return Ws.forEach(this.docs,(function(t){return e(t)}))},t.prototype.wo=function(t){return new Il(this)},t.prototype.To=function(t){return Ws.resolve(this.size)},t}(),Il=function(t){function e(e){var n=this;return(n=t.call(this)||this).Io=e,n}return Object(r.c)(e,t),e.prototype.Di=function(t){var e=this,n=[];return this.Ri.forEach((function(r,i){i?n.push(e.Io.yi(t,i,e.readTime)):e.Io.pi(r)})),Ws.On(n)},e.prototype.vi=function(t,e){return this.Io.bi(t,e)},e.prototype.Si=function(t,e){return this.Io.getEntries(t,e)},e}(Ea),xl=function(){function t(t){this.persistence=t,this.nl=new Pr((function(t){return Wr(t)}),Gr),this.lastRemoteSnapshotVersion=Dr.min(),this.highestTargetId=0,this.sl=0,this.il=new kc,this.targetCount=0,this.rl=Iu.yo()}return t.prototype.Ce=function(t,e){return this.nl.forEach((function(t,n){return e(n)})),Ws.resolve()},t.prototype.So=function(t){return Ws.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Do=function(t){return Ws.resolve(this.sl)},t.prototype.po=function(t){return this.highestTargetId=this.rl.next(),Ws.resolve(this.highestTargetId)},t.prototype.Co=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.sl&&(this.sl=e),Ws.resolve()},t.prototype.xo=function(t){this.nl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.rl=new Iu(e),this.highestTargetId=e),t.sequenceNumber>this.sl&&(this.sl=t.sequenceNumber)},t.prototype.No=function(t,e){return this.xo(e),this.targetCount+=1,Ws.resolve()},t.prototype.Oo=function(t,e){return this.xo(e),Ws.resolve()},t.prototype.ko=function(t,e){return this.nl.delete(e.target),this.il.hu(e.targetId),this.targetCount-=1,Ws.resolve()},t.prototype.Or=function(t,e,n){var r=this,i=0,o=[];return this.nl.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.nl.delete(s),o.push(r.Mo(t,a.targetId)),i++)})),Ws.On(o).next((function(){return i}))},t.prototype.$o=function(t){return Ws.resolve(this.targetCount)},t.prototype.Lo=function(t,e){var n=this.nl.get(e)||null;return Ws.resolve(n)},t.prototype.Bo=function(t,e,n){return this.il.au(e,n),Ws.resolve()},t.prototype.Uo=function(t,e,n){this.il.uu(e,n);var r=this.persistence.qr,i=[];return r&&e.forEach((function(e){i.push(r.so(t,e))})),Ws.On(i)},t.prototype.Mo=function(t,e){return this.il.hu(e),Ws.resolve()},t.prototype.Qo=function(t,e){var n=this.il._u(e);return Ws.resolve(n)},t.prototype.ro=function(t,e){return Ws.resolve(this.il.ro(e))},t}(),Al=function(){function t(t){var e=this;this.ol={},this.zo=new Ia(0),this.Ho=!1,this.Ho=!0,this.qr=t(this),this.sa=new xl(this),this.ki=new su,this.Fi=function(t,n){return new Ol(t,(function(t){return e.qr.al(t)}))}(this.ki)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ga=function(){return this.Ho=!1,Promise.resolve()},Object.defineProperty(t.prototype,"br",{get:function(){return this.Ho},enumerable:!1,configurable:!0}),t.prototype.ha=function(){},t.prototype.la=function(){},t.prototype.Na=function(){return this.ki},t.prototype.Sa=function(t){var e=this.ol[t.ti()];return e||(e=new Tl(this.ki,this.qr),this.ol[t.ti()]=e),e},t.prototype.Da=function(){return this.sa},t.prototype.Ca=function(){return this.Fi},t.prototype.runTransaction=function(t,e,n){var r=this;lr("MemoryPersistence","Starting transaction:",t);var i=new kl(this.zo.next());return this.qr.cl(),n(i).next((function(t){return r.qr.ul(i).next((function(){return t}))})).xn().then((function(t){return i.xi(),t}))},t.prototype.hl=function(t,e){return Ws.kn(Object.values(this.ol).map((function(n){return function(){return n.ro(t,e)}})))},t}(),kl=function(t){function e(e){var n=this;return(n=t.call(this)||this).Wo=e,n}return Object(r.c)(e,t),e}(Sa),Nl=function(){function t(t){this.persistence=t,this.ll=new kc,this._l=null}return t.fl=function(e){return new t(e)},Object.defineProperty(t.prototype,"dl",{get:function(){if(this._l)return this._l;throw pr()},enumerable:!1,configurable:!0}),t.prototype.qo=function(t,e,n){return this.ll.qo(n,e),this.dl.delete(n.toString()),Ws.resolve()},t.prototype.Ko=function(t,e,n){return this.ll.Ko(n,e),this.dl.add(n.toString()),Ws.resolve()},t.prototype.so=function(t,e){return this.dl.add(e.toString()),Ws.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.ll.hu(e.targetId).forEach((function(t){return n.dl.add(t.toString())}));var r=this.persistence.Da();return r.Qo(t,e.targetId).next((function(t){t.forEach((function(t){return n.dl.add(t.toString())}))})).next((function(){return r.ko(t,e)}))},t.prototype.cl=function(){this._l=new Set},t.prototype.ul=function(t){var e=this,n=this.persistence.Ca().wo();return Ws.forEach(this.dl,(function(r){var i=Ur.H(r);return e.wl(t,i).next((function(t){t||n.pi(i)}))})).next((function(){return e._l=null,n.apply(t)}))},t.prototype.Ma=function(t,e){var n=this;return this.wl(t,e).next((function(t){t?n.dl.delete(e.toString()):n.dl.add(e.toString())}))},t.prototype.al=function(t){return 0},t.prototype.wl=function(t,e){var n=this;return Ws.kn([function(){return Ws.resolve(n.ll.ro(e))},function(){return n.persistence.Da().ro(t,e)},function(){return n.persistence.hl(t,e)}])},t}(),Pl=function(){function t(t){this.El=t.El,this.Tl=t.Tl}return t.prototype.wc=function(t){this.Il=t},t.prototype.hc=function(t){this.ml=t},t.prototype.onMessage=function(t){this.Al=t},t.prototype.close=function(){this.Tl()},t.prototype.send=function(t){this.El(t)},t.prototype.Rl=function(){this.Il()},t.prototype.Pl=function(t){this.ml(t)},t.prototype.gl=function(t){this.Al(t)},t}(),Rl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Dl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.T=e.T,n}return Object(r.c)(e,t),e.prototype.Sl=function(t,e,n,r){return new Promise((function(i,o){var s=new ir;s.listenOnce(nr.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case er.NO_ERROR:var e=s.getResponseJson();lr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case er.TIMEOUT:lr("Connection",'RPC "'+t+'" timed out'),o(new ar(sr.DEADLINE_EXCEEDED,"Request time out"));break;case er.HTTP_ERROR:var n=s.getStatus();if(lr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(sr).indexOf(e)>=0?e:sr.UNKNOWN}(r.status);o(new ar(a,r.message))}else o(new ar(sr.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new ar(sr.UNAVAILABLE,"Connection failed."));break;default:pr()}}finally{lr("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Ec=function(t,e){var n=[this.Vl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Yn,i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this._.projectId+"/databases/"+this._.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.T};this.vl(i.initMessageHeaders,e),Object(s.u)()||Object(s.x)()||Object(s.r)()||Object(s.t)()||Object(s.y)()||Object(s.q)()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");lr("Connection","Creating WebChannel: "+o,i);var a=r.createWebChannel(o,i),u=!1,c=!1,l=new Pl({El:function(t){c?lr("Connection","Not sending because WebChannel is closed:",t):(u||(lr("Connection","Opening WebChannel transport."),a.open(),u=!0),lr("Connection","WebChannel sending:",t),a.send(t))},Tl:function(){return a.close()}}),h=function(t,e){a.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(rr.EventType.OPEN,(function(){c||lr("Connection","WebChannel transport opened.")})),h(rr.EventType.CLOSE,(function(){c||(c=!0,lr("Connection","WebChannel transport closed"),l.Pl())})),h(rr.EventType.ERROR,(function(t){c||(c=!0,fr("Connection","WebChannel transport errored:",t),l.Pl(new ar(sr.UNAVAILABLE,"The operation could not be completed")))})),h(rr.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];gr(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){lr("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=$r[t];if(void 0!==e)return Jr(e)}(i),s=r.message;void 0===o&&(o=sr.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Pl(new ar(o,s)),a.close()}else lr("Connection","WebChannel received:",n),l.gl(n)}})),setTimeout((function(){l.Rl()}),0),l},e}(function(){function t(t){this.yl=t,this._=t._,this.Vl=(t.ssl?"https":"http")+"://"+t.host,this.pl="projects/"+this._.projectId+"/databases/"+this._.database+"/documents"}return t.prototype.Sc=function(t,e,n,r){var i=this.bl(t,e);lr("RestConnection","Sending: ",i,n);var o={};return this.vl(o,r),this.Sl(t,i,o,n).then((function(t){return lr("RestConnection","Received: ",t),t}),(function(e){throw fr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Dc=function(t,e,n,r){return this.Sc(t,e,n,r)},t.prototype.vl=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.0.1",t["Content-Type"]="text/plain",e)for(var n in e.si)e.si.hasOwnProperty(n)&&(t[n]=e.si[n])},t.prototype.bl=function(t,e){return this.Vl+"/v1/"+e+":"+Rl[t]},t}()),jl=function(){function t(){var t=this;this.Dl=function(){return t.Cl()},this.Nl=function(){return t.xl()},this.Fl=[],this.Ol()}return t.prototype.zc=function(t){this.Fl.push(t)},t.prototype.ga=function(){window.removeEventListener("online",this.Dl),window.removeEventListener("offline",this.Nl)},t.prototype.Ol=function(){window.addEventListener("online",this.Dl),window.addEventListener("offline",this.Nl)},t.prototype.Cl=function(){lr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Fl;t<e.length;t++)(0,e[t])(0)},t.prototype.xl=function(){lr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Fl;t<e.length;t++)(0,e[t])(1)},t.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ll=function(){function t(){}return t.prototype.zc=function(t){},t.prototype.ga=function(){},t}();function Fl(t){return new Qi(t,!0)}var Ml=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return this.Sh=this.kl(t),this.persistence=this.Ml(t),[4,this.persistence.start()];case 1:return e.sent(),this.$l=this.Ll(t),this.Bc=this.Bl(t),[2]}}))}))},t.prototype.Ll=function(t){return null},t.prototype.Bl=function(t){return e=this.persistence,n=new Sl,new Vu(e,n,t.ql);var e,n},t.prototype.Ml=function(t){return new Al(Nl.fl)},t.prototype.kl=function(t){return new qc},t.prototype.terminate=function(){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(t){switch(t.label){case 0:return this.$l&&this.$l.stop(),[4,this.Sh.ga()];case 1:return t.sent(),[4,this.persistence.ga()];case 2:return t.sent(),[2]}}))}))},t}(),Ul=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ul=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(r.c)(e,t),e.prototype.initialize=function(e){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Xu(this.Bc)];case 2:return n.sent(),[4,this.Ul.initialize(this,e)];case 3:return n.sent(),[4,Cl(this.Ul.mu)];case 4:return n.sent(),[4,bc(this.Ul.ph)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ll=function(t){return new Pa(this.persistence.qr.gr,t.cs)},e.prototype.Ml=function(t){var e=Uu(t.yl._,t.yl.persistenceKey),n=void 0!==this.cacheSizeBytes?Na.Ir(this.cacheSizeBytes):Na.Rr,r=Fl(t.yl._);return new Du(this.synchronizeTabs,e,t.clientId,n,t.cs,ea(),na(),r,this.Sh,!!this.forceOwnership)},e.prototype.kl=function(t){return new qc},e}(Ml),Vl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ul=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(r.c)(e,t),e.prototype.initialize=function(e){return Object(r.b)(this,void 0,void 0,(function(){var n,i=this;return Object(r.d)(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Ul.mu,this.Sh instanceof Vc?(this.Sh.mu={sh:gl.bind(null,n),ih:bl.bind(null,n),rh:wl.bind(null,n),va:_l.bind(null,n)},[4,this.Sh.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.ua((function(t){return Object(r.b)(i,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return[4,yl(this.Ul.mu,t)];case 1:return e.sent(),this.$l&&(t&&!this.$l.br?this.$l.start(this.Bc):t||this.$l.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},e.prototype.kl=function(t){var e=ea();if(!Vc.Ln(e))throw new ar(sr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Uu(t.yl._,t.yl.persistenceKey);return new Vc(e,t.cs,n,t.clientId,t.ql)},e}(Ul),ql=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n=this;return Object(r.d)(this,(function(r){switch(r.label){case 0:return this.Bc?[3,2]:(this.Bc=t.Bc,this.Sh=t.Sh,this.qc=this.Kl(e),this.ph=this.Ql(e),this.bh=this.Wl(e),this.mu=this.jl(e,!t.synchronizeTabs),this.Sh.Cc=function(t){return Jc(n.mu,t,1)},this.ph.Uc.Gl=fl.bind(null,this.mu),[4,Ic(this.ph,this.mu.Uh)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.Wl=function(t){return new aa},t.prototype.Kl=function(t){var e=Fl(t.yl._),n=new Dl(t.yl);return function(t,e,n){return new nc(t,e,n)}(t.credentials,n,e)},t.prototype.Ql=function(t){var e,n,r,i,o,s=this;return e=this.Bc,n=this.qc,r=t.cs,i=function(t){return Jc(s.mu,t,0)},o=jl.Ln()?new jl:new Ll,new ic(e,n,r,i,o)},t.prototype.jl=function(t,e){return function(t,e,n,r,i,o,s){var a=new Qc(t,e,n,r,i,o);return s&&(a.qh=!0),a}(this.Bc,this.ph,this.bh,this.Sh,t.ql,t.Dh,e)},t.prototype.terminate=function(){return function(t){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(n){switch(n.label){case 0:return e=yr(t),lr("RemoteStore","RemoteStore shutting down."),e.Wc.add(5),[4,sc(e)];case 1:return n.sent(),e.Gc.ga(),e.Hc.set("Unknown"),[2]}}))}))}(this.ph)},t}(),Bl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.zl(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.zl(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Hl=function(){this.muted=!0},t.prototype.zl=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function Hl(t,e,n){if(!n)throw new ar(sr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function zl(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ar(sr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Wl(t,e,n,r){if(!0===e&&!0===r)throw new ar(sr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Gl(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":pr()}function Ql(t,e){if(e<=0)throw new ar(sr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var $l=function(t){for(var e=0;e<t.length;++e)if(0===t[e].length)throw new ar(sr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Yl=new Mr(t)},Kl=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return Object(r.c)(e,t),e.documentId=function(){return new e(Mr.j().B())},e.prototype.isEqual=function(t){return t instanceof e&&this.Yl.isEqual(t.Yl)},e}($l),Yl=new RegExp("[~\\*/\\[\\]]"),Xl=function(t){this.Jl=t},Zl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.Xl=function(t){if(2!==t.Zl)throw t.t_(1===t.Zl?this.Jl+"() can only appear at the top level of your update data":this.Jl+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Xl);function Jl(t,e,n){return new hh({Zl:3,e_:e.settings.e_,methodName:t.Jl,n_:n},e._,e.serializer,e.ignoreUndefinedProperties)}var th=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.Xl=function(t){return new Mo(t.path,new Ao)},e.prototype.isEqual=function(t){return t instanceof e},e}(Xl),eh=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).s_=n,r}return Object(r.c)(e,t),e.prototype.Xl=function(t){var e=Jl(this,t,!0),n=this.s_.map((function(t){return mh(t,e)})),r=new ko(n);return new Mo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Xl),nh=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).s_=n,r}return Object(r.c)(e,t),e.prototype.Xl=function(t){var e=Jl(this,t,!0),n=this.s_.map((function(t){return mh(t,e)})),r=new Po(n);return new Mo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Xl),rh=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).i_=n,r}return Object(r.c)(e,t),e.prototype.Xl=function(t){var e=new Do(t.serializer,Yi(t.serializer,this.i_));return new Mo(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Xl),ih=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new ar(sr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ar(sr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.r_=t,this.o_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.r_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.o_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.r_===t.r_&&this.o_===t.o_},t.prototype.toJSON=function(){return{latitude:this.r_,longitude:this.o_}},t.prototype.g=function(t){return _r(this.r_,t.r_)||_r(this.o_,t.o_)},t}(),oh=function(t){this.a_=t},sh=/^__.*__$/,ah=function(t,e,n){this.c_=t,this.u_=e,this.h_=n},uh=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.l_=function(t,e){var n=[];return n.push(null!==this.Qe?new Ko(t,this.data,this.Qe,e):new $o(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Xo(t,this.fieldTransforms)),n},t}(),ch=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.l_=function(t,e){var n=[new Ko(t,this.data,this.Qe,e)];return this.fieldTransforms.length>0&&n.push(new Xo(t,this.fieldTransforms)),n},t}();function lh(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pr()}}var hh=function(){function t(t,e,n,r,i,o){this.settings=t,this._=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.__(),this.fieldTransforms=i||[],this.Qe=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Zl",{get:function(){return this.settings.Zl},enumerable:!1,configurable:!0}),t.prototype.f_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this._,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},t.prototype.d_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.f_({path:n,n_:!1});return r.w_(t),r},t.prototype.E_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.f_({path:n,n_:!1});return r.__(),r},t.prototype.T_=function(t){return this.f_({path:void 0,n_:!0})},t.prototype.t_=function(t){return Ch(t,this.settings.methodName,this.settings.I_||!1,this.path,this.settings.e_)},t.prototype.contains=function(t){return void 0!==this.Qe.find((function(e){return t.M(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.M(e.field)}))},t.prototype.__=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.w_(this.path.get(t))},t.prototype.w_=function(t){if(0===t.length)throw this.t_("Document fields must not be empty");if(lh(this.Zl)&&sh.test(t))throw this.t_('Document fields cannot begin and end with "__"')},t}(),fh=function(){function t(t,e,n){this._=t,this.ignoreUndefinedProperties=e,this.serializer=n||Fl(t)}return t.prototype.m_=function(t,e,n,r){return void 0===r&&(r=!1),new hh({Zl:t,methodName:e,e_:n,path:Mr.U(),n_:!1,I_:r},this._,this.serializer,this.ignoreUndefinedProperties)},t}();function dh(t,e,n,r,i,o){void 0===o&&(o={});var s=t.m_(o.merge||o.mergeFields?2:0,e,n,i);bh("Data must be an object, but it was:",s,r);var a,u,c=vh(r,s);if(o.merge)a=new Fo(s.Qe),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=f[h],p=void 0;if(d instanceof $l)p=d.Yl;else{if("string"!=typeof d)throw pr();p=Eh(e,d,n)}if(!s.contains(p))throw new ar(sr.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Sh(l,p)||l.push(p)}a=new Fo(l),u=s.fieldTransforms.filter((function(t){return a.Ye(t.field)}))}else a=null,u=s.fieldTransforms;return new uh(new ns(c),a,u)}function ph(t,e,n,r){var i=t.m_(1,e,n);bh("Data must be an object, but it was:",i,r);var o=[],s=new rs;kr(r,(function(t,r){var a=Eh(e,t,n),u=i.E_(a);if(r instanceof Zl||r instanceof oh&&r.a_ instanceof Zl)o.push(a);else{var c=mh(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Fo(o);return new ch(s.Xe(),a,i.fieldTransforms)}function gh(t,e,n,r,i,o){var s=t.m_(1,e,n),a=[wh(e,r,n)],u=[i];if(o.length%2!=0)throw new ar(sr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(wh(e,o[c])),u.push(o[c+1]);for(var l=[],h=new rs,f=a.length-1;f>=0;--f)if(!Sh(l,a[f])){var d=a[f],p=u[f],g=s.E_(d);if(p instanceof Zl||p instanceof oh&&p.a_ instanceof Zl)l.push(d);else{var y=mh(p,g);null!=y&&(l.push(d),h.set(d,y))}}var m=new Fo(l);return new ch(h.Xe(),m,s.fieldTransforms)}function yh(t,e,n,r){return void 0===r&&(r=!1),mh(n,t.m_(r?4:3,e))}function mh(t,e){if(t instanceof oh&&(t=t.a_),_h(t))return bh("Unsupported field value:",e,t),vh(t,e);if(t instanceof Xl)return function(t,e){if(!lh(e.Zl))throw e.t_(t.Jl+"() can only be used with update() and set()");if(!e.path)throw e.t_(t.Jl+"() is not currently supported inside arrays");var n=t.Xl(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Qe.push(e.path),t instanceof Array){if(e.settings.n_&&4!==e.Zl)throw e.t_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=mh(o[i],e.T_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Yi(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Rr.fromDate(t);return{timestampValue:Xi(e.serializer,n)}}if(t instanceof Rr){var r=new Rr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Xi(e.serializer,r)}}if(t instanceof ih)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Cr)return{bytesValue:Zi(e.serializer,t.l)};if(t instanceof ah){var i=e._,o=t.c_;if(!o.isEqual(i))throw e.t_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:eo(t.c_||e._,t.u_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.t_("Unsupported field value: "+Gl(t))}(t,e)}function vh(t,e){var n={};return Nr(t)?e.path&&e.path.length>0&&e.Qe.push(e.path):kr(t,(function(t,r){var i=mh(r,e.d_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function _h(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Rr||t instanceof ih||t instanceof Cr||t instanceof ah||t instanceof Xl)}function bh(t,e,n){if(!_h(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Gl(n);throw e.t_("an object"===r?t+" a custom object":t+" "+r)}}function wh(t,e,n){if(e instanceof $l)return e.Yl;if("string"==typeof e)return Eh(t,e);throw Ch("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Eh(t,e,n){try{return function(t){if(t.search(Yl)>=0)throw new ar(sr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Kl.bind.apply(Kl,Object(r.g)([void 0],t.split("."))))}catch(e){throw new ar(sr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Yl}catch(e){throw Ch((i=e)instanceof Error?i.message:i.toString(),t,!1,void 0,n)}var i}function Ch(t,e,n,r,i){var o=r&&!r.P(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new ar(sr.INVALID_ARGUMENT,(a+=". ")+t+u)}function Sh(t,e){return t.some((function(t){return t.isEqual(e)}))}var Th=function(){function t(t){this.qc=t,this.A_=new Map,this.mutations=[],this.R_=!1,this.P_=null,this.g_=new Set}return t.prototype.y_=function(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n=this;return Object(r.d)(this,(function(i){switch(i.label){case 0:if(this.V_(),this.mutations.length>0)throw new ar(sr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o,s,a,u;return Object(r.d)(this,(function(r){switch(r.label){case 0:return n=yr(t),i=ao(n.serializer)+"/documents",o={documents:e.map((function(t){return ro(n.serializer,t)}))},[4,n.Dc("BatchGetDocuments",i,o)];case 1:return s=r.sent(),a=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){gr(!!e.found);var n=io(t,e.found.name),r=to(e.found.updateTime),i=new ns({mapValue:{fields:e.found.fields}});return new ss(n,r,i,{})}(t,e):"missing"in e?function(t,e){gr(!!e.missing),gr(!!e.readTime);var n=io(t,e.missing),r=to(e.readTime);return new as(n,r)}(t,e):pr()}(n.serializer,t);a.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=a.get(t.toString());gr(!!e),u.push(e)})),u)]}}))}))}(this.qc,t)];case 1:return[2,((e=i.sent()).forEach((function(t){t instanceof as||t instanceof ss?n.p_(t):pr()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.l_(t,this.Ge(t))),this.g_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.l_(t,this.b_(t)))}catch(t){this.P_=t}this.g_.add(t.toString())},t.prototype.delete=function(t){this.write([new ts(t,this.Ge(t))]),this.g_.add(t.toString())},t.prototype.commit=function(){return Object(r.b)(this,void 0,void 0,(function(){var t,e=this;return Object(r.d)(this,(function(n){switch(n.label){case 0:if(this.V_(),this.P_)throw this.P_;return t=this.A_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Ur.H(n);e.mutations.push(new es(r,e.Ge(r)))})),[4,function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i,o;return Object(r.d)(this,(function(r){switch(r.label){case 0:return n=yr(t),i=ao(n.serializer)+"/documents",o={writes:e.map((function(t){return lo(n.serializer,t)}))},[4,n.Sc("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.qc,this.mutations)];case 1:return n.sent(),this.R_=!0,[2]}}))}))},t.prototype.p_=function(t){var e;if(t instanceof ss)e=t.version;else{if(!(t instanceof as))throw pr();e=Dr.min()}var n=this.A_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ar(sr.ABORTED,"Document version changed between two reads.")}else this.A_.set(t.key.toString(),e)},t.prototype.Ge=function(t){var e=this.A_.get(t.toString());return!this.g_.has(t.toString())&&e?Vo.updateTime(e):Vo.ze()},t.prototype.b_=function(t){var e=this.A_.get(t.toString());if(!this.g_.has(t.toString())&&e){if(e.isEqual(Dr.min()))throw new ar(sr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vo.updateTime(e)}return Vo.exists(!0)},t.prototype.write=function(t){this.V_(),this.mutations=this.mutations.concat(t)},t.prototype.V_=function(){},t}(),Oh=function(){function t(t,e,n,r){this.cs=t,this.qc=e,this.updateFunction=n,this.ls=r,this.v_=5,this.ys=new zs(this.cs,"transaction_retry")}return t.prototype.run=function(){this.S_()},t.prototype.S_=function(){var t=this;this.ys.Pn((function(){return Object(r.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(r.d)(this,(function(r){return t=new Th(this.qc),(e=this.D_(t))&&e.then((function(e){n.cs.ws((function(){return t.commit().then((function(){n.ls.resolve(e)})).catch((function(t){n.C_(t)}))}))})).catch((function(t){n.C_(t)})),[2]}))}))}))},t.prototype.D_=function(t){try{var e=this.updateFunction(t);return!Vr(e)&&e.catch&&e.then?e:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ls.reject(t),null}},t.prototype.C_=function(t){var e=this;this.v_>0&&this.N_(t)?(this.v_-=1,this.cs.ws((function(){return e.S_(),Promise.resolve()}))):this.ls.reject(t)},t.prototype.N_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Zr(e)}return!1},t}(),Ih=function(){function t(t,e,n){var r=this;this.credentials=t,this.cs=e,this.yl=n,this.user=pa.UNAUTHENTICATED,this.clientId=vr.t(),this.x_=function(){},this.ui=new Hs,this.credentials.oi((function(t){lr("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.x_(t)),r.ui.resolve()}))}return t.prototype.getConfiguration=function(){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(t){switch(t.label){case 0:return[4,this.ui.promise];case 1:return[2,(t.sent(),{cs:this.cs,yl:this.yl,clientId:this.clientId,credentials:this.credentials,ql:this.user,Dh:100})]}}))}))},t.prototype.F_=function(t){var e=this;this.x_=t,this.ui.promise.then((function(){return e.x_(e.user)}))},t.prototype.O_=function(){if(this.cs.ps)throw new ar(sr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.cs.Ds();var e=new Hs;return this.cs.bs((function(){return Object(r.b)(t,void 0,void 0,(function(){var t,n;return Object(r.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.k_?[4,this.k_.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.M_?[4,this.M_.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.ai(),e.resolve(),[3,6];case 5:return t=r.sent(),n=oa(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function xh(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i=this;return Object(r.d)(this,(function(o){switch(o.label){case 0:return t.cs.Fs(),lr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),t.F_((function(n){return t.cs.Cs((function(){return Object(r.b)(i,void 0,void 0,(function(){return Object(r.d)(this,(function(t){switch(t.label){case 0:return[4,qu(e.Bc,n)];case 1:return t.sent(),[2]}}))}))}))})),e.persistence.ha((function(){return t.terminate()})),t.M_=e,[2]}}))}))}function Ah(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i;return Object(r.d)(this,(function(o){switch(o.label){case 0:return t.cs.Fs(),[4,kh(t)];case 1:return n=o.sent(),lr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return i=o.sent(),[4,e.initialize(n,i)];case 3:return o.sent(),t.F_((function(n){return t.cs.Cs((function(){return function(t,e){return Object(r.b)(this,void 0,void 0,(function(){var n,i;return Object(r.d)(this,(function(r){switch(r.label){case 0:return(n=yr(t)).cs.Fs(),lr("RemoteStore","RemoteStore received new credentials"),i=dc(n),n.Wc.add(3),[4,sc(n)];case 1:return r.sent(),i&&n.Hc.set("Unknown"),[4,n.Uc.Gl(e)];case 2:return r.sent(),n.Wc.delete(3),[4,oc(n)];case 3:return r.sent(),[2]}}))}))}(e.ph,n)}))})),t.k_=e,[2]}}))}))}function kh(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return t.M_?[3,2]:(lr("FirestoreClient","Using default OfflineComponentProvider"),[4,xh(t,new Ml)]);case 1:e.sent(),e.label=2;case 2:return[2,t.M_]}}))}))}function Nh(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return t.k_?[3,2]:(lr("FirestoreClient","Using default OnlineComponentProvider"),[4,Ah(t,new ql)]);case 1:e.sent(),e.label=2;case 2:return[2,t.k_]}}))}))}function Ph(t){return kh(t).then((function(t){return t.persistence}))}function Rh(t){return kh(t).then((function(t){return t.Bc}))}function Dh(t){return Nh(t).then((function(t){return t.ph}))}function jh(t){return Nh(t).then((function(t){return t.mu}))}function Lh(t){return Object(r.b)(this,void 0,void 0,(function(){var e,n;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,Nh(t)];case 1:return e=r.sent(),[2,((n=e.bh).Us=$c.bind(null,e.mu),n.Ws=Yc.bind(null,e.mu),n)]}}))}))}function Fh(t,e,n,i){var o=this,s=new Bl(i),a=new da(e,s,n);return t.cs.ws((function(){return Object(r.b)(o,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(n){switch(n.label){case 0:return e=ua,[4,Lh(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){s.Hl(),t.cs.ws((function(){return Object(r.b)(o,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(n){switch(n.label){case 0:return e=ca,[4,Lh(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}function Mh(t,e){var n=this,i=new Hs;return t.cs.ws((function(){return Object(r.b)(n,void 0,void 0,(function(){var n;return Object(r.d)(this,(function(r){switch(r.label){case 0:return n=Xc,[4,jh(t)];case 1:return[2,n.apply(void 0,[r.sent(),e,i])]}}))}))})),i.promise}function Uh(t,e){var n=this,i=new Bl(e);return t.cs.ws((function(){return Object(r.b)(n,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){yr(t).qs.add(e),e.next()},[4,Lh(t)];case 1:return[2,e.apply(void 0,[n.sent(),i])]}}))}))})),function(){i.Hl(),t.cs.ws((function(){return Object(r.b)(n,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){yr(t).qs.delete(e)},[4,Lh(t)];case 1:return[2,e.apply(void 0,[n.sent(),i])]}}))}))}))}}function Vh(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var qh=function(){function t(t,e,n,r){this._=t,this.L_=e,this.B_=n,this.q_=r}return t.prototype.U_=function(t){switch(ki(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Fi(t.integerValue||t.doubleValue);case 3:return this.K_(t.timestampValue);case 4:return this.Q_(t);case 5:return t.stringValue;case 6:return this.q_(Mi(t.bytesValue));case 7:return this.W_(t.referenceValue);case 8:return this.j_(t.geoPointValue);case 9:return this.G_(t.arrayValue);case 10:return this.z_(t.mapValue);default:throw pr()}},t.prototype.z_=function(t){var e=this,n={};return kr(t.fields||{},(function(t,r){n[t]=e.U_(r)})),n},t.prototype.j_=function(t){return new ih(Fi(t.latitude),Fi(t.longitude))},t.prototype.G_=function(t){var e=this;return(t.values||[]).map((function(t){return e.U_(t)}))},t.prototype.Q_=function(t){switch(this.L_){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Ii(n)?t(n):n}(t);return null==e?null:this.U_(e);case"estimate":return this.K_(xi(t));default:return null}},t.prototype.K_=function(t){var e=Li(t);return new Rr(e.seconds,e.nanos)},t.prototype.W_=function(t){var e=Lr.q(t);gr(So(e));var n=new xr(e.get(1),e.get(3)),r=new Ur(e.N(5));return n.isEqual(this._)||hr("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this._.projectId+"/"+this._.database+") instead."),this.B_(r)},t}(),Bh=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ar(sr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ar(sr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Wl("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}();function Hh(t){Gh(t);var e=Xh(t),n=t.H_(),r=new ql;return zh(e,r,new Vl(r,n.cacheSizeBytes))}function zh(t,e,n){var i=this,o=new Hs;return t.cs.enqueue((function(){return Object(r.b)(i,void 0,void 0,(function(){var i;return Object(r.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,xh(t,n)];case 1:return r.sent(),[4,Ah(t,e)];case 2:return r.sent(),o.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===sr.FAILED_PRECONDITION||t.code===sr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(i=r.sent()))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),o.reject(i),[3,4];case 4:return[2]}}))}))})).then((function(){return o.promise}))}function Wh(t){var e=this;if(t.Y_&&!t.J_)throw new ar(sr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Hs;return t.X_.bs((function(){return Object(r.b)(e,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return Gs.Ln()?[4,Gs.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(Uu(t.c_,t.Z_))];case 1:return i.sent(),n.resolve(),[3,3];case 2:return e=i.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}function Gh(t){if(t.Y_||t.J_)throw new ar(sr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Qh="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",$h=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){throw new ar(sr.FAILED_PRECONDITION,Qh)},t.prototype.enableMultiTabIndexedDbPersistence=function(t){throw new ar(sr.FAILED_PRECONDITION,Qh)},t.prototype.clearIndexedDbPersistence=function(t){throw new ar(sr.FAILED_PRECONDITION,Qh)},t}(),Kh=function(){function t(){this.enableMultiTabIndexedDbPersistence=Hh.bind(null),this.clearIndexedDbPersistence=Wh.bind(null)}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Gh(t);var n=Xh(t),r=t.H_(),i=new ql;return zh(n,i,new Ul(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t,{forceOwnership:e})},t}(),Yh=function(){function t(e,n,i){var o=this;if(void 0===i&&(i=new $h),this.tf=i,this.ef=null,this.X_=new ia,this.INTERNAL={delete:function(){return Object(r.b)(o,void 0,void 0,(function(){return Object(r.d)(this,(function(t){switch(t.label){case 0:return this.nf||Zh(this),[4,this.nf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var s=e;this.ef=s,this.c_=t.sf(s),this.Z_=s.name,this.if=new ma(n)}else{var a=e;if(!a.projectId)throw new ar(sr.INVALID_ARGUMENT,"Must provide projectId");this.c_=new xr(a.projectId,a.database),this.Z_="[DEFAULT]",this.if=new ya}this.rf=new Bh({})}return Object.defineProperty(t.prototype,"Y_",{get:function(){return!!this.nf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"J_",{get:function(){return this.X_.ps},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"af",{get:function(){return this.cf||(this.cf=new fh(this.c_,this.rf.ignoreUndefinedProperties)),this.cf},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.rf),t)).merge;var e=new Bh(t);if(this.nf&&!this.rf.isEqual(e))throw new ar(sr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.rf=e,void 0!==e.credentials&&(this.if=function(t){if(!t)return new ya;switch(t.type){case"gapi":var e=t.client;return gr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new _a(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new ar(sr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.rf.host&&fr("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},t.prototype.enableNetwork=function(){return Xh(this),function(t){var e=this;return t.cs.enqueue((function(){return Object(r.b)(e,void 0,void 0,(function(){var e,n;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,Ph(t)];case 1:return e=r.sent(),[4,Dh(t)];case 2:return n=r.sent(),[2,(e.la(!0),function(t){var e=yr(t);return e.Wc.delete(0),oc(e)}(n))]}}))}))}))}(this.nf)},t.prototype.disableNetwork=function(){return Xh(this),function(t){var e=this;return t.cs.enqueue((function(){return Object(r.b)(e,void 0,void 0,(function(){var e,n;return Object(r.d)(this,(function(i){switch(i.label){case 0:return[4,Ph(t)];case 1:return e=i.sent(),[4,Dh(t)];case 2:return n=i.sent(),[2,(e.la(!1),function(t){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(n){switch(n.label){case 0:return(e=yr(t)).Wc.add(0),[4,sc(e)];case 1:return n.sent(),e.Hc.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(this.nf)},t.prototype.enablePersistence=function(t){if(this.nf)throw new ar(sr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1,n=!1;return t&&Wl("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.tf.enableMultiTabIndexedDbPersistence(this):this.tf.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(t){return[2,this.tf.clearIndexedDbPersistence(this)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},t.prototype.waitForPendingWrites=function(){return Xh(this),function(t){var e=this,n=new Hs;return t.cs.ws((function(){return Object(r.b)(e,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(r){switch(r.label){case 0:return e=rl,[4,jh(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(this.nf)},t.prototype.onSnapshotsInSync=function(t){return Xh(this),Vh(t)?Uh(this.nf,t):Uh(this.nf,{next:t})},t.sf=function(t){if(!Object.prototype.hasOwnProperty.call(t.options,"projectId"))throw new ar(sr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e=t.options.projectId;if(!e||"string"!=typeof e)throw new ar(sr.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new xr(e)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.ef)throw new ar(sr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.ef},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return Hl("Firestore.collection","path",t),Xh(this),new ff(Lr.q(t),this,null)},t.prototype.doc=function(t){return Hl("Firestore.doc","path",t),Xh(this),ef.uf(Lr.q(t),this,null)},t.prototype.collectionGroup=function(t){if(Hl("Firestore.collectionGroup","collectionId",t),t.indexOf("/")>=0)throw new ar(sr.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return Xh(this),new lf(function(t){return new cs(Lr.U(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return function(t,e){var n=this,i=new Hs;return t.cs.ws((function(){return Object(r.b)(n,void 0,void 0,(function(){var n;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,function(t){return Nh(t).then((function(t){return t.qc}))}(t)];case 1:return n=r.sent(),new Oh(t.cs,n,e,i).run(),[2]}}))}))})),i.promise}(Xh(this),(function(n){return t(new Jh(e,n))}))},t.prototype.batch=function(){return Xh(this),new tf(this)},t.prototype.H_=function(){return this.rf},t}();function Xh(t){return t.nf||Zh(t),t.nf.O_(),t.nf}function Zh(t){var e=t.H_(),n=function(t,e,n){return new Ir(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.c_,t.Z_,e);t.nf=new Ih(t.if,t.X_,n)}var Jh=function(){function t(t,e){this.hf=t,this.lf=e}return t.prototype.get=function(t){var e=this,n=df(0,t,this.hf);return this.lf.y_([n.u_]).then((function(t){if(!t||1!==t.length)return pr();var r=t[0];if(r instanceof as)return new rf(e.hf,n.u_,null,!1,!1,n.h_);if(r instanceof ss)return new rf(e.hf,n.u_,r,!1,!1,n.h_);throw pr()}))},t.prototype.set=function(t,e,n){var r=df(0,t,this.hf);n=zl("Transaction.set",n);var i=gf(r.h_,e,n),o=dh(this.hf.af,"Transaction.set",r.u_,i,null!==r.h_,n);return this.lf.set(r.u_,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof Kl?(r=df(0,t,this.hf),i=gh(this.hf.af,"Transaction.update",r.u_,e,n,o)):(r=df(0,t,this.hf),i=ph(this.hf.af,"Transaction.update",r.u_,e)),this.lf.update(r.u_,i),this},t.prototype.delete=function(t){var e=df(0,t,this.hf);return this.lf.delete(e.u_),this},t}(),tf=function(){function t(t){this.hf=t,this._f=[],this.ff=!1}return t.prototype.set=function(t,e,n){this.df();var r=df(0,t,this.hf);n=zl("WriteBatch.set",n);var i=gf(r.h_,e,n),o=dh(this.hf.af,"WriteBatch.set",r.u_,i,null!==r.h_,n);return this._f=this._f.concat(o.l_(r.u_,Vo.ze())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.df(),"string"==typeof e||e instanceof Kl?(r=df(0,t,this.hf),i=gh(this.hf.af,"WriteBatch.update",r.u_,e,n,o)):(r=df(0,t,this.hf),i=ph(this.hf.af,"WriteBatch.update",r.u_,e)),this._f=this._f.concat(i.l_(r.u_,Vo.exists(!0))),this},t.prototype.delete=function(t){this.df();var e=df(0,t,this.hf);return this._f=this._f.concat(new ts(e.u_,Vo.ze())),this},t.prototype.commit=function(){return this.df(),this.ff=!0,this._f.length>0?Mh(Xh(this.hf),this._f):Promise.resolve()},t.prototype.df=function(){if(this.ff)throw new ar(sr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),ef=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.c_,e,r)||this).u_=e,i.firestore=n,i.h_=r,i.nf=Xh(n),i}return Object(r.c)(e,t),e.uf=function(t,n,r){if(t.length%2!=0)throw new ar(sr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.B()+" has "+t.length);return new e(new Ur(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.u_.path.k()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new ff(this.u_.path.F(),this.firestore,this.h_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.u_.path.B()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(Hl("DocumentReference.collection","path",t),!t)throw new ar(sr.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Lr.q(t);return new ff(this.u_.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){return t instanceof e&&this.firestore===t.firestore&&this.u_.isEqual(t.u_)&&this.h_===t.h_},e.prototype.set=function(t,e){e=zl("DocumentReference.set",e);var n=gf(this.h_,t,e),r=dh(this.firestore.af,"DocumentReference.set",this.u_,n,null!==this.h_,e);return Mh(this.nf,r.l_(this.u_,Vo.ze()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof Kl?gh(this.firestore.af,"DocumentReference.update",this.u_,t,e,r):ph(this.firestore.af,"DocumentReference.update",this.u_,t),Mh(this.nf,n.l_(this.u_,Vo.exists(!0)))},e.prototype.delete=function(){return Mh(this.nf,[new ts(this.u_,Vo.ze())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Vh(i[a])||(s=i[a],a++);var u={includeMetadataChanges:s.includeMetadataChanges};if(Vh(i[a])){var c=i[a];i[a]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[a+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[a+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}var l={next:function(t){i[a]&&i[a](r.wf(t))},error:i[a+1],complete:i[a+2]};return Fh(this.nf,hs(this.u_.path),u,l)},e.prototype.get=function(t){var e=this;return t&&"cache"===t.source?function(t,e){var n=this,i=new Hs;return t.cs.ws((function(){return Object(r.b)(n,void 0,void 0,(function(){var n;return Object(r.d)(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s;return Object(r.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t,e){var n=yr(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ka.Mi(t,e)}))}(t,e)];case 1:return(i=r.sent())instanceof ss?n.resolve(i):i instanceof as?n.resolve(null):n.reject(new ar(sr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=r.sent(),s=oa(o,"Failed to get document '"+e+" from cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,Rh(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,i])]}}))}))})),i.promise}(this.nf,this.u_).then((function(t){return new rf(e.firestore,e.u_,t,!0,t instanceof ss&&t.Je,e.h_)})):function(t,e,n){var i=this;void 0===n&&(n={});var o=new Hs;return t.cs.ws((function(){return Object(r.b)(i,void 0,void 0,(function(){var i;return Object(r.d)(this,(function(r){switch(r.label){case 0:return i=function(t,e,n,r,i){var o=new Bl({next:function(o){e.ws((function(){return ca(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new ar(sr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new ar(sr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new da(hs(n.path),o,{includeMetadataChanges:!0,Xs:!0});return ua(t,s)},[4,Lh(t)];case 1:return[2,i.apply(void 0,[r.sent(),t.cs,e,n,o])]}}))}))})),o.promise}(this.nf,this.u_,t).then((function(t){return e.wf(t)}))},e.prototype.withConverter=function(t){return new e(this.u_,this.firestore,t)},e.prototype.wf=function(t){var e=t.docs.get(this.u_);return new rf(this.firestore,this.u_,e,t.fromCache,t.hasPendingWrites,this.h_)},e}(ah),nf=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),rf=function(){function t(t,e,n,r,i,o){this.hf=t,this.u_=e,this.Ef=n,this.Tf=r,this.If=i,this.h_=o}return t.prototype.data=function(t){var e=this;if(void 0===t&&(t={}),this.Ef){if(this.h_){var n=new of(this.hf,this.u_,this.Ef,this.Tf,this.If,null);return this.h_.fromFirestore(n,t)}return new qh(this.hf.c_,t.serverTimestamps||"none",(function(t){return new ef(t,e.hf,null)}),(function(t){return new Or(t)})).U_(this.Ef.rn())}},t.prototype.get=function(t,e){var n=this;if(void 0===e&&(e={}),this.Ef){var r=this.Ef.data().field(wh("DocumentSnapshot.get",t,this.u_));if(null!==r)return new qh(this.hf.c_,e.serverTimestamps||"none",(function(t){return new ef(t,n.hf,n.h_)}),(function(t){return new Or(t)})).U_(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.u_.path.k()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ef(this.u_,this.hf,this.h_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Ef},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new nf(this.If,this.Tf)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&this.hf===e.hf&&this.Tf===e.Tf&&this.u_.isEqual(e.u_)&&(null===this.Ef?null===e.Ef:this.Ef.isEqual(e.Ef))&&this.h_===e.h_},t}(),of=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(rf);function sf(t,e,n){if("string"==typeof n){if(""===n)throw new ar(sr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ys(e)&&-1!==n.indexOf("/"))throw new ar(sr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Lr.q(n));if(!Ur.X(r))throw new ar(sr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ui(t,new Ur(r))}if(n instanceof ah)return Ui(t,n.u_);throw new ar(sr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Gl(n)+".")}function af(t,e){if(!Array.isArray(t)||0===t.length)throw new ar(sr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ar(sr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function uf(t,e,n){if(!n.isEqual(e))throw new ar(sr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function cf(t){if(ds(t)&&0===t.on.length)throw new ar(sr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var lf=function(){function t(t,e,n){this.mf=t,this.firestore=e,this.h_=n}return t.prototype.where=function(e,n,r){var i=wh("Query.where",e),o=function(t,e,n,r,i,o,s){var a;if(i.W()){if("array-contains"===o||"array-contains-any"===o)throw new ar(sr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){af(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(sf(r,t,l[c]));a={arrayValue:{values:u}}}else a=sf(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||af(s,o),a=yh(n,"Query.where",s,"in"===o||"not-in"===o);var h=Is.create(i,o,a);return function(t,e){if(e.hn()){var n=gs(t);if(null!==n&&!n.isEqual(e.field))throw new ar(sr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=ps(t);null!==r&&uf(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new ar(sr.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(this.mf,0,this.firestore.af,this.firestore.c_,i,n,r);return new t(function(t,e){var n=t.filters.concat([e]);return new cs(t.path,t.collectionGroup,t.on.slice(),n,t.limit,t.an,t.startAt,t.endAt)}(this.mf,o),this.firestore,this.h_)},t.prototype.orderBy=function(e,n){var r;if(void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new ar(sr.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=wh("Query.orderBy",e),o=function(t,e,n){if(null!==t.startAt)throw new ar(sr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ar(sr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Vs(e,n);return function(t,e){if(null===ps(t)){var n=gs(t);null!==n&&uf(0,n,e.field)}}(t,r),r}(this.mf,i,r);return new t(function(t,e){var n=t.on.concat([e]);return new cs(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(this.mf,o),this.firestore,this.h_)},t.prototype.limit=function(e){return Ql("Query.limit",e),new t(_s(this.mf,e,"F"),this.firestore,this.h_)},t.prototype.limitToLast=function(e){return Ql("Query.limitToLast",e),new t(_s(this.mf,e,"L"),this.firestore,this.h_)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Af("Query.startAt",e,n,!0);return new t(bs(this.mf,i),this.firestore,this.h_)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Af("Query.startAfter",e,n,!1);return new t(bs(this.mf,i),this.firestore,this.h_)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Af("Query.endBefore",e,n,!0);return new t(ws(this.mf,i),this.firestore,this.h_)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Af("Query.endAt",e,n,!1);return new t(ws(this.mf,i),this.firestore,this.h_)},t.prototype.isEqual=function(e){return e instanceof t&&this.firestore===e.firestore&&Es(this.mf,e.mf)&&this.h_===e.h_},t.prototype.withConverter=function(e){return new t(this.mf,this.firestore,e)},t.prototype.Af=function(t,e,n,r){if(e instanceof rf)return function(t,e,n,r,i){if(!r)throw new ar(sr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=ms(t);s<a.length;s++){var u=a[s];if(u.field.W())o.push(Ui(e,r.key));else{var c=r.field(u.field);if(Ii(c))throw new ar(sr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.B();throw new ar(sr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Ls(o,i)}(this.mf,this.firestore.c_,t,e.Ef,r);var i=[e].concat(n);return function(t,e,n,r,i,o){var s=t.on;if(i.length>s.length)throw new ar(sr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.W()){if("string"!=typeof c)throw new ar(sr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ys(t)&&-1!==c.indexOf("/"))throw new ar(sr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Lr.q(c));if(!Ur.X(l))throw new ar(sr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Ur(l);a.push(Ui(e,h))}else{var f=yh(n,r,c);a.push(f)}}return new Ls(a,o)}(this.mf,this.firestore.c_,this.firestore.af,t,i,r)},t.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s={},a=0;if("object"!=typeof i[a]||Vh(i[a])||(s=i[a],a++),Vh(i[a])){var u=i[a];i[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}var c={next:function(t){i[a]&&i[a](new hf(r.firestore,r.mf,t,r.h_))},error:i[a+1],complete:i[a+2]};return cf(this.mf),Fh(Xh(this.firestore),this.mf,s,c)},t.prototype.get=function(t){var e=this;cf(this.mf);var n=Xh(this.firestore);return(t&&"cache"===t.source?function(t,e){var n=this,i=new Hs;return t.cs.ws((function(){return Object(r.b)(n,void 0,void 0,(function(){var n;return Object(r.d)(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return Object(r.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(r.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,$u(t,e,!0)];case 1:return i=r.sent(),o=new zc(e,i.za),s=o.wh(i.documents),a=o.Di(s,!1),n.resolve(a.snapshot),[3,3];case 2:return u=r.sent(),c=oa(u,"Failed to execute query '"+e+" against cache"),n.reject(c),[3,3];case 3:return[2]}}))}))},[4,Rh(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,i])]}}))}))})),i.promise}(n,this.mf):function(t,e,n){var i=this;void 0===n&&(n={});var o=new Hs;return t.cs.ws((function(){return Object(r.b)(i,void 0,void 0,(function(){var i;return Object(r.d)(this,(function(r){switch(r.label){case 0:return i=function(t,e,n,r,i){var o=new Bl({next:function(n){e.ws((function(){return ca(t,s)})),n.fromCache&&"server"===r.source?i.reject(new ar(sr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new da(n,o,{includeMetadataChanges:!0,Xs:!0});return ua(t,s)},[4,Lh(t)];case 1:return[2,i.apply(void 0,[r.sent(),t.cs,e,n,o])]}}))}))})),o.promise}(n,this.mf,t)).then((function(t){return new hf(e.firestore,e.mf,t,e.h_)}))},t}(),hf=function(){function t(t,e,n,r){this.hf=t,this.Rf=e,this.Pf=n,this.h_=r,this.gf=null,this.yf=null,this.metadata=new nf(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.Pf.docs.P()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Pf.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.Pf.docs.forEach((function(r){t.call(e,n.Vf(r,n.metadata.fromCache,n.Pf.Qt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new lf(this.Rf,this.hf,this.h_)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=!(!t||!t.includeMetadataChanges);if(e&&this.Pf.jt)throw new ar(sr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.gf&&this.yf===e||(this.gf=function(t,e,n){if(t.Kt.P()){var r=0;return t.docChanges.map((function(e){return{type:"added",doc:n(e.doc,t.fromCache,t.Qt.has(e.doc.key)),oldIndex:-1,newIndex:r++}}))}var i=t.Kt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Qt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:pf(e.type),doc:r,oldIndex:o,newIndex:s}}))}(this.Pf,e,this.Vf.bind(this)),this.yf=e),this.gf},t.prototype.isEqual=function(e){return e instanceof t&&this.hf===e.hf&&Es(this.Rf,e.Rf)&&this.Pf.isEqual(e.Pf)&&this.h_===e.h_},t.prototype.Vf=function(t,e,n){return new of(this.hf,t.key,t,e,n,this.h_)},t}(),ff=function(t){function e(e,n,r){var i=this;if((i=t.call(this,hs(e),n,r)||this).pf=e,e.length%2!=1)throw new ar(sr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.B()+" has "+e.length);return i}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.mf.path.k()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.mf.path.F();return t.P()?null:new ef(new Ur(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.mf.path.B()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){0===arguments.length&&(t=vr.t()),Hl("CollectionReference.doc","path",t);var e=Lr.q(t);return ef.uf(this.mf.path.child(e),this.firestore,this.h_)},e.prototype.add=function(t){var e=this.h_?this.h_.toFirestore(t):t,n=this.doc();return new ef(n.u_,this.firestore,null).set(e).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.pf,this.firestore,t)},e}(lf);function df(t,e,n){var r=function(t,e){if(!(t instanceof e)){if(e.name===t.constructor.name)throw new ar(sr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Gl(t);throw new ar(sr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}(e,ef);if(r.firestore!==n)throw new ar(sr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function pf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pr()}}function gf(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var yf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.serverTimestamp=function(){var t=new th("serverTimestamp");return t.Jl="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Zl("deleteField");return t.Jl="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new eh("arrayUnion",t)}).apply(void 0,t);return r.Jl="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nh("arrayRemove",t)}).apply(void 0,t);return r.Jl="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new rh("increment",t)}(t);return n.Jl="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.a_.isEqual(t.a_)},e}(oh),mf={Firestore:Yh,GeoPoint:ih,Timestamp:Rr,Blob:Or,Transaction:Jh,WriteBatch:tf,DocumentReference:ef,DocumentSnapshot:rf,Query:lf,QueryDocumentSnapshot:of,QuerySnapshot:hf,CollectionReference:ff,FieldPath:Kl,FieldValue:yf,setLogLevel:function(t){ur.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function vf(t){!function(t,e){t.INTERNAL.registerComponent(new or.a("firestore",(function(t){return function(t,e){return new Yh(t,e,new Kh)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},mf)))}(t),t.registerVersion("@firebase/firestore","2.0.1")}vf(i.a)},zIRd:function(t,e,n){"use strict";var r,i,o=n("uXP2"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),f=new u.b("@firebase/app"),d=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.k)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return u}),"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){f.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();d.prototype.name&&d.prototype.options||d.prototype.delete||console.log("dc");var p=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.i)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=h[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void f.warn(u.join(" "))}c(new a.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||"[DEFAULT]",!Object(s.i)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return f.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var d=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&Object(s.l)(d,a.serviceProps),r[h]=d,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,h);return n.apply(this,a.multipleInstances?t:[])}}try{for(var p=Object(o.h)(Object.keys(e)),g=p.next();!g.done;g=p.next())e[g.value]._addComponent(a)}catch(y){u={error:y}}finally{try{g&&!g.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(d);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.l)(e,t)},createSubscribe:s.j,ErrorFactory:s.b,deepExtend:s.l}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.p)()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var m=p.initializeApp;p.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.v)()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),m.apply(void 0,t)};var v=p;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new g(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.13",void 0),t.registerVersion("fire-js","")}(v),e.a=v},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);let i=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function s(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete(){}},u=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function c(t){return null!==t&&"object"==typeof t}const l=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:i,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(i))try{i.call(this)}catch(s){e=s instanceof l?f(s.errors):[s]}if(u(o)){let t=-1,n=o.length;for(;++t<n;){const n=o[t];if(c(n))try{n.unsubscribe()}catch(s){e=e||[],s instanceof l?e=e.concat(f(s.errors)):e.push(s)}}}if(e)throw new l(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function f(t){return t.reduce((t,e)=>t.concat(e instanceof l?e.errors:e),[])}const d=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof p?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[d](){return this}static create(t,e,n){const r=new p(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends p{constructor(t,e,n,i){let o;super(),this._parentSubscriber=t;let s=this;r(e)?o=e:e&&(o=e.next,n=e.error,i=e.complete,e!==a&&(s=Object.create(e),r(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(t,e,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(s(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const y=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function m(t){return t}let v=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof p)return t;if(t[d])return t[d]()}return t||e||n?new p(t,e,n):new p(a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof p?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=_(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[y](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?m:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=_(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function _(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const b=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class w extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class E extends p{constructor(t){super(t),this.destination=t}}let C=(()=>{class t extends v{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[d](){return new E(this)}lift(t){const e=new S(this,this);return e.operator=t,e}next(t){if(this.closed)throw new b;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new b;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new b;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new b;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new b;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new w(this,t))}asObservable(){const t=new v;return t.source=this,t}}return t.create=(t,e)=>new S(t,e),t})();class S extends C{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function T(t){return t&&"function"==typeof t.schedule}class O extends p{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const I=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function x(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const A=x(),k=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function N(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const P=t=>{if(t&&"function"==typeof t[y])return r=t,t=>{const e=r[y]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(k(t))return I(t);if(N(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,s),t);if(t&&"function"==typeof t[A])return e=t,t=>{const n=e[A]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=c(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,r};function R(t,e,n,r,i=new O(t,n,r)){if(!i.closed)return e instanceof v?e.subscribe(i):P(e)(i)}class D extends p{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}function j(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new L(t,e))}}class L{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new F(t,this.project,this.thisArg))}}class F extends p{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function M(t,e){return new v(n=>{const r=new h;let i=0;return r.add(e.schedule((function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}function U(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[y]}(t))return function(t,e){return new v(n=>{const r=new h;return r.add(e.schedule(()=>{const i=t[y]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(N(t))return function(t,e){return new v(n=>{const r=new h;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(k(t))return M(t,e);if(function(t){return t&&"function"==typeof t[A]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new v(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[A](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof v?t:new v(P(t))}function V(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(V((n,r)=>U(t(n,r)).pipe(j((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new q(t,n)))}class q{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new B(t,this.project,this.concurrent))}}class B extends D{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const r=new O(this,e,n),i=this.destination;i.add(r);const o=R(this,t,void 0,void 0,r);o!==r&&i.add(o)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function H(t=Number.POSITIVE_INFINITY){return V(m,t)}function z(t,e){return e?M(t,e):new v(I(t))}function W(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return T(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof v?t[0]:H(e)(z(t,n))}function G(){return function(t){return t.lift(new Q(t))}}class Q{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new $(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class $ extends p{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class K extends v{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new X(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return G()(this)}}const Y=(()=>{const t=K.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class X extends E{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function Z(){return new C}function J(){return t=>{return G()((e=Z,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,Y);return r.source=t,r.subjectFactory=n,r})(t));var e}}function tt(t){return{toString:t}.toString()}function et(t,e,n){return tt(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const nt=et("Inject",t=>({token:t})),rt=et("Optional"),it=et("Self"),ot=et("SkipSelf");var st=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function at(t){for(let e in t)if(t[e]===at)return e;throw Error("Could not find renamed property on target object.")}function ut(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ct(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function lt(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function ht(t){return ft(t,t[pt])||ft(t,t[mt])}function ft(t,e){return e&&e.token===t?e:null}function dt(t){return t&&(t.hasOwnProperty(gt)||t.hasOwnProperty(vt))?t[gt]:null}const pt=at({"\u0275prov":at}),gt=at({"\u0275inj":at}),yt=at({"\u0275provFallback":at}),mt=at({ngInjectableDef:at}),vt=at({ngInjectorDef:at});function _t(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(_t).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function bt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const wt=at({__forward_ref__:at});function Et(t){return t.__forward_ref__=Et,t.toString=function(){return _t(this())},t}function Ct(t){return St(t)?t():t}function St(t){return"function"==typeof t&&t.hasOwnProperty(wt)&&t.__forward_ref__===Et}const Tt="undefined"!=typeof globalThis&&globalThis,Ot="undefined"!=typeof window&&window,It="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,xt="undefined"!=typeof global&&global,At=Tt||xt||Ot||It,kt=at({"\u0275cmp":at}),Nt=at({"\u0275dir":at}),Pt=at({"\u0275pipe":at}),Rt=at({"\u0275mod":at}),Dt=at({"\u0275loc":at}),jt=at({"\u0275fac":at}),Lt=at({__NG_ELEMENT_ID__:at});class Ft{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ct({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const Mt=new Ft("INJECTOR",-1),Ut={},Vt=/\n/gm,qt=at({provide:String,useValue:at});let Bt,Ht=void 0;function zt(t){const e=Ht;return Ht=t,e}function Wt(t){const e=Bt;return Bt=t,e}function Gt(t,e=st.Default){if(void 0===Ht)throw new Error("inject() must be called from an injection context");return null===Ht?$t(t,void 0,e):Ht.get(t,e&st.Optional?null:void 0,e)}function Qt(t,e=st.Default){return(Bt||Gt)(Ct(t),e)}function $t(t,e,n){const r=ht(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&st.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${_t(t)}]`)}function Kt(t){const e=[];for(let n=0;n<t.length;n++){const r=Ct(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=st.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof rt||"Optional"===i.ngMetadataName||i===rt?n|=st.Optional:i instanceof ot||"SkipSelf"===i.ngMetadataName||i===ot?n|=st.SkipSelf:i instanceof it||"Self"===i.ngMetadataName||i===it?n|=st.Self:t=i instanceof nt||i===nt?i.token:i}e.push(Qt(t,n))}else e.push(Qt(r))}return e}class Yt{get(t,e=Ut){if(e===Ut){const e=new Error(`NullInjectorError: No provider for ${_t(t)}!`);throw e.name="NullInjectorError",e}return e}}class Xt{}class Zt{}function Jt(t,e){t.forEach(t=>Array.isArray(t)?Jt(t,e):e(t))}function te(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ee(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ne(t,e,n){let r=ie(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function re(t,e){const n=ie(t,e);if(n>=0)return t[1|n]}function ie(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}var oe=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),se=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const ae={},ue=[];let ce=0;function le(t){return tt(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===oe.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||ue,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||se.Emulated,id:"c",styles:t.styles||ue,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=ce++,n.inputs=ge(t.inputs,e),n.outputs=ge(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(he):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(fe):null,n})}function he(t){return me(t)||function(t){return t[Nt]||null}(t)}function fe(t){return function(t){return t[Pt]||null}(t)}const de={};function pe(t){const e={type:t.type,bootstrap:t.bootstrap||ue,declarations:t.declarations||ue,imports:t.imports||ue,exports:t.exports||ue,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&tt(()=>{de[t.id]=t.type}),e}function ge(t,e){if(null==t)return ae;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const ye=le;function me(t){return t[kt]||null}function ve(t,e){return t.hasOwnProperty(jt)?t[jt]:null}function _e(t,e){const n=t[Rt]||null;if(!n&&!0===e)throw new Error(`Type ${_t(t)} does not have '\u0275mod' property.`);return n}function be(t){return Array.isArray(t)&&"object"==typeof t[1]}function we(t){return Array.isArray(t)&&!0===t[1]}function Ee(t){return 0!=(8&t.flags)}function Ce(t){return 2==(2&t.flags)}function Se(t){return 1==(1&t.flags)}function Te(t){return null!==t.template}function Oe(t){return 0!=(512&t[2])}class Ie{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function xe(){return Ae}function Ae(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ne),ke}function ke(){const t=Pe(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===ae)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ne(t,e,n,r){const i=Pe(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:ae,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new Ie(u&&u.currentValue,e,s===ae),t[r]=e}function Pe(t){return t.__ngSimpleChanges__||null}xe.ngInherit=!0;let Re=void 0;function De(){return void 0!==Re?Re:"undefined"!=typeof document?document:void 0}function je(t){return!!t.listen}const Le={createRenderer:(t,e)=>De()};function Fe(t){for(;Array.isArray(t);)t=t[0];return t}function Me(t,e){return Fe(e[t+20])}function Ue(t,e){return Fe(e[t.index])}function Ve(t,e){return t.data[e+20]}function qe(t,e){const n=e[t];return be(n)?n:n[0]}function Be(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function He(t){return 4==(4&t[2])}function ze(t){return 128==(128&t[2])}function We(t,e){return null===t||null==e?null:t[e]}function Ge(t){t[18]=0}function Qe(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const $e={lFrame:yn(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Ke(){return $e.bindingsEnabled}function Ye(){return $e.lFrame.lView}function Xe(){return $e.lFrame.tView}function Ze(t){$e.lFrame.contextLView=t}function Je(){return $e.lFrame.previousOrParentTNode}function tn(t,e){$e.lFrame.previousOrParentTNode=t,$e.lFrame.isParent=e}function en(){return $e.lFrame.isParent}function nn(){$e.lFrame.isParent=!1}function rn(){return $e.checkNoChangesMode}function on(t){$e.checkNoChangesMode=t}function sn(){return $e.lFrame.bindingIndex++}function an(t){const e=$e.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function un(t,e){const n=$e.lFrame;n.bindingIndex=n.bindingRootIndex=t,cn(e)}function cn(t){$e.lFrame.currentDirectiveIndex=t}function ln(t){const e=$e.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function hn(){return $e.lFrame.currentQueryIndex}function fn(t){$e.lFrame.currentQueryIndex=t}function dn(t,e){const n=gn();$e.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function pn(t,e){const n=gn(),r=t[1];$e.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex}function gn(){const t=$e.lFrame,e=null===t?null:t.child;return null===e?yn(t):e}function yn(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function mn(){const t=$e.lFrame;return $e.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}const vn=mn;function _n(){const t=mn();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function bn(){return $e.lFrame.selectedIndex}function wn(t){$e.lFrame.selectedIndex=t}function En(){const t=$e.lFrame;return Ve(t.tView,t.selectedIndex)}function Cn(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Sn(t,e,n){In(t,e,3,n)}function Tn(t,e,n,r){(3&t[2])===n&&In(t,e,n,r)}function On(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function In(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(xn(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function xn(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}class An{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function kn(t,e,n){const r=je(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Pn(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Nn(t){return 3===t||4===t||6===t}function Pn(t){return 64===t.charCodeAt(0)}function Rn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Dn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Dn(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function jn(t){return-1!==t}function Ln(t){return 32767&t}function Fn(t){return t>>16}function Mn(t,e){let n=Fn(t),r=e;for(;n>0;)r=r[15],n--;return r}function Un(t){return"string"==typeof t?t:null==t?"":""+t}function Vn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Un(t)}const qn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(At))();function Bn(t){return t instanceof Function?t():t}let Hn=!0;function zn(t){const e=Hn;return Hn=t,e}let Wn=0;function Gn(t,e){const n=$n(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Qn(r.data,t),Qn(e,null),Qn(r.blueprint,null));const i=Kn(t,e),o=t.injectorIndex;if(jn(i)){const t=Ln(i),n=Mn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Qn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function $n(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function Kn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[6],r=1;for(;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function Yn(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Lt)&&(r=n[Lt]),null==r&&(r=n[Lt]=Wn++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function Xn(t,e,n,r=st.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Lt)?t[Lt]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){dn(e,t);try{const t=i();if(null!=t||r&st.Optional)return t;throw new Error(`No provider for ${Vn(n)}!`)}finally{vn()}}else if("number"==typeof i){if(-1===i)return new ir(t,e);let o=null,s=$n(t,e),a=-1,u=r&st.Host?e[16][6]:null;for((-1===s||r&st.SkipSelf)&&(a=-1===s?Kn(t,e):e[s+8],rr(r,!1)?(o=e[1],s=Ln(a),e=Mn(a,e)):s=-1);-1!==s;){a=e[s+8];const t=e[1];if(nr(i,s,t.data)){const t=Jn(s,e,n,o,r,u);if(t!==Zn)return t}rr(r,e[1].data[s+8]===u)&&nr(i,s,e)?(o=t,s=Ln(a),e=Mn(a,e)):s=-1}}}if(r&st.Optional&&void 0===i&&(i=null),0==(r&(st.Self|st.Host))){const t=e[9],o=Wt(void 0);try{return t?t.get(n,i,r&st.Optional):$t(n,i,r&st.Optional)}finally{Wt(o)}}if(r&st.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${Vn(n)}]`)}const Zn={};function Jn(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=tr(a,s,n,null==r?Ce(a)&&Hn:r!=s&&3===a.type,i&st.Host&&o===a);return null!==u?er(e,s,u,a):Zn}function tr(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&Te(t)&&t.type===n)return u}return null}function er(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof An){const s=i;if(s.resolving)throw new Error("Circular dep for "+Vn(o[n]));const a=zn(s.canSeeViewProviders);let u;s.resolving=!0,s.injectImpl&&(u=Wt(s.injectImpl)),dn(t,r);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Ae(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{s.injectImpl&&Wt(u),zn(a),s.resolving=!1,vn()}}return i}function nr(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function rr(t,e){return!(t&st.Self||t&st.Host&&e)}class ir{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Xn(this._tNode,this._lView,t,void 0,e)}}function or(t){const e=t;if(St(t))return()=>{const t=or(Ct(e));return t?t():null};let n=ve(e);if(null===n){const t=dt(e);n=t&&t.factory}return n||null}function sr(t){return tt(()=>{const e=t.prototype.constructor,n=e[jt]||or(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[jt]||or(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function ar(t){return t.ngDebugContext}function ur(t){return t.ngOriginalError}function cr(t,...e){t.error(...e)}class lr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||cr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?ar(t)?ar(t):this._findContext(ur(t)):null}_findOriginalError(t){let e=ur(t);for(;e&&ur(e);)e=ur(e);return e}}class hr{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class fr extends hr{getTypeName(){return"HTML"}}class dr extends hr{getTypeName(){return"Style"}}class pr extends hr{getTypeName(){return"Script"}}class gr extends hr{getTypeName(){return"URL"}}class yr extends hr{getTypeName(){return"ResourceURL"}}function mr(t){return t instanceof hr?t.changingThisBreaksApplicationSecurity:t}function vr(t,e){const n=_r(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function _r(t){return t instanceof hr&&t.getTypeName()||null}let br=!0,wr=!1;function Er(){return wr=!0,br}class Cr{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class Sr{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Tr=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Or=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ir(t){return(t=String(t)).match(Tr)||t.match(Or)?t:(Er()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function xr(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Ar(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const kr=xr("area,br,col,hr,img,wbr"),Nr=xr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Pr=xr("rp,rt"),Rr=Ar(Pr,Nr),Dr=Ar(kr,Ar(Nr,xr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ar(Pr,xr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Rr),jr=xr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Lr=xr("srcset"),Fr=Ar(jr,Lr,xr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),xr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Mr=xr("script,style,template");class Ur{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Dr.hasOwnProperty(e))return this.sanitizedSomething=!0,!Mr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Fr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;jr[o]&&(s=Ir(s)),Lr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Ir(t.trim())).join(", ")),this.buf.push(" ",e,'="',Br(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Dr.hasOwnProperty(e)&&!kr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Br(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const Vr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qr=/([^\#-~ |!])/g;function Br(t){return t.replace(/&/g,"&amp;").replace(Vr,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(qr,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Hr;function zr(t,e){let n=null;try{Hr=Hr||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new Cr:new Sr(t)}(t);let r=e?String(e):"";n=Hr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Hr.getInertBodyElement(r)}while(r!==o);const s=new Ur,a=s.sanitizeChildren(Wr(n)||n);return Er()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=Wr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Wr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Gr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function Qr(t){const e=Kr();return e?e.sanitize(Gr.HTML,t)||"":vr(t,"HTML")?mr(t):zr(De(),Un(t))}function $r(t){const e=Kr();return e?e.sanitize(Gr.URL,t)||"":vr(t,"URL")?mr(t):Ir(Un(t))}function Kr(){const t=Ye();return t&&t[12]}function Yr(t,e){t.__ngContext__=e}function Xr(t){throw new Error("Multiple components match node with tagname "+t.tagName)}function Zr(){throw new Error("Cannot mix multi providers and regular providers")}function Jr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function ti(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Jr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ei(t){return 0===t.type&&"ng-template"!==t.tagName}function ni(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function ri(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Nn(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!ni(t,u,n)||""===u&&1===e.length){if(ii(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!ti(t.attrs,c,n)){if(ii(r))return!1;s=!0}continue}const l=oi(8&r?"class":u,i,ei(t),n);if(-1===l){if(ii(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Jr(e,c,0)||2&r&&c!==t){if(ii(r))return!1;s=!0}}}}else{if(!s&&!ii(r)&&!ii(u))return!1;if(s&&ii(u))continue;s=!1,r=u|1&r}}return ii(r)||s}function ii(t){return 0==(1&t)}function oi(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function si(t,e,n=!1){for(let r=0;r<e.length;r++)if(ri(t,e[r],n))return!0;return!1}function ai(t,e){return t?":not("+e.trim()+")":e}function ui(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||ii(s)||(e+=ai(o,i),i=""),r=s,o=o||!ii(r);n++}return""!==i&&(e+=ai(o,i)),e}const ci={};function li(t){const e=t[3];return we(e)?e[3]:e}function hi(t){return di(t[13])}function fi(t){return di(t[4])}function di(t){for(;null!==t&&!we(t);)t=t[4];return t}function pi(t){gi(Xe(),Ye(),bn()+t,rn())}function gi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Sn(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Tn(e,r,0,n)}wn(n)}function yi(t,e){return t<<17|e<<2}function mi(t){return t>>17&32767}function vi(t){return 2|t}function _i(t){return(131068&t)>>2}function bi(t,e){return-131069&t|e<<2}function wi(t){return 1|t}function Ei(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];fn(i),n.contentQueries(2,e[o],o)}}}function Ci(t,e,n){return je(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Si(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ge(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Ti(t,e,n,r,i,o){const s=n+20,a=t.data[s]||function(t,e,n,r,i,o){const s=Je(),a=en(),u=a?s:s&&s.parent,c=t.data[n]=Li(0,u&&u!==e?u:null,r,n,i,o);return null===t.firstChild&&(t.firstChild=c),s&&(!a||null!=s.child||null===c.parent&&2!==s.type?a||(s.next=c):s.child=c),c}(t,e,s,r,i,o);return tn(a,!0),a}function Oi(t,e,n){pn(e,e[6]);try{const r=t.viewQuery;null!==r&&io(1,r,n);const i=t.template;null!==i&&Ai(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ei(t,e),t.staticViewQueries&&io(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ji(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,_n()}}function Ii(t,e,n,r){const i=e[2];if(256==(256&i))return;pn(e,e[6]);const o=rn();try{Ge(e),$e.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ai(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Sn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Tn(e,n,0,null),On(e,0)}if(function(t){for(let e=hi(t);null!==e;e=fi(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Qe(r,1),n[2]|=1024}}}(e),function(t){for(let e=hi(t);null!==e;e=fi(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];ze(n)&&Ii(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Ei(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Sn(e,n)}else{const n=t.contentHooks;null!==n&&Tn(e,n,1),On(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,wn(o),r+=9+n[++t],i=r):r+=s:(null!==s&&(un(r,i),s(2,e[i])),i++)}}}finally{wn(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Zi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&io(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Sn(e,n)}else{const n=t.viewHooks;null!==n&&Tn(e,n,2),On(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Qe(e[3],-1))}finally{_n()}}function xi(t,e,n,r){const i=e[10],o=!rn(),s=He(e);try{o&&!s&&i.begin&&i.begin(),s&&Oi(t,e,r),Ii(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Ai(t,e,n,r,i){const o=bn();try{wn(-1),2&r&&e.length>20&&gi(t,e,0,rn()),n(r,i)}finally{wn(o)}}function ki(t,e,n){if(Ee(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Ni(t,e,n){Ke()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Gn(n,e),Yr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=Te(r);o&&$i(e,n,r);const u=er(e,t,a,n);Yr(u,e),null!==s&&Ki(0,a-i,u,r,0,s),o&&(qe(n.index,e)[8]=u)}}(t,e,n,Ue(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-20,u=$e.lFrame.currentDirectiveIndex;try{wn(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];cn(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?Bi(r,i):s&&o.push(null)}}finally{wn(-1),cn(u)}}(t,e,n))}function Pi(t,e,n=Ue){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Ri(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Di(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Di(t,e,n,r,i,o,s,a,u,c){const l=20+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ci);return n}(l,h);return f[1]={type:t,id:e,blueprint:f,template:n,queries:null,viewQuery:a,node:null,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:c,incompleteFirstPass:!1}}function ji(t,e,n,r){const i=so(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function Li(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Fi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Mi(t,e,n,r,i,o,s,a){const u=Ue(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(uo(t,n,c,r,i),Ce(e)&&function(t,e){const n=qe(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3===e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.tagName||"",r):i,je(o)?o.setProperty(u,r,i):Pn(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ui(t,e,n,r){let i=!1;if(Ke()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];si(n,s.selectors,!1)&&(i||(i=[]),Yn(Gn(n,e),t,s.type),Te(s)?(2&n.flags&&Xr(n),zi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,Gi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}Hi(t,n,o.length);let a=!1,u=!1;for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Rn(n.mergedAttrs,c.hostAttrs),Qi(t,e,c),Wi(t.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!a&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-20),a=!0),u||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-20),u=!0),Vi(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||ei(e)?null:Yi(n,i);o.push(c),s=Fi(n,u,s),a=Fi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),qi(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Rn(n.mergedAttrs,n.attrs),i}function Vi(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function qi(t,e,n){for(let r=0;r<n;r++)e.push(ci),t.blueprint.push(ci),t.data.push(null)}function Bi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Hi(t,e,n){const r=20-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function zi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Wi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Te(e)&&(n[""]=t)}}function Gi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Qi(t,e,n){t.data.push(n);const r=n.factory||(n.factory=ve(n.type)),i=new An(r,Te(n),null);t.blueprint.push(i),e.push(i)}function $i(t,e,n){const r=Ue(e,t),i=Ri(n),o=t[10],s=to(t,Si(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n)));t[e.index]=s}function Ki(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Yi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Xi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Zi(t,e){const n=qe(e,t);if(ze(n)){const t=n[1];80&n[2]?Ii(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=hi(e);null!==r;r=fi(r))for(let e=10;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];Ii(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=qe(n[r],e);ze(i)&&i[5]>0&&t(i)}}(n)}}function Ji(t,e){const n=qe(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Oi(r,n,n[8])}function to(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function eo(t){for(;t;){t[2]|=64;const e=li(t);if(Oe(t)&&!e)return t;t=e}return null}function no(t,e,n){const r=e[10];r.begin&&r.begin();try{Ii(t,e,t.template,n)}catch(i){throw ao(e,i),i}finally{r.end&&r.end()}}function ro(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Be(n),i=r[1];xi(i,r,i.template,n)}}(t[8])}function io(t,e,n){fn(0),e(t,n)}const oo=(()=>Promise.resolve(null))();function so(t){return t[7]||(t[7]=[])}function ao(t,e){const n=t[9],r=n?n.get(lr,null):null;r&&r.handleError(e)}function uo(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function co(t,e){const n=e[3];return-1===t.index?we(n)?n:null:n}function lo(t,e){const n=co(t,e);return n?Eo(e[11],n[7]):null}function ho(t,e,n,r,i){if(null!=r){let o,s=!1;we(r)?o=r:be(r)&&(s=!0,r=r[0]);const a=Fe(r);0===t&&null!==n?null==i?bo(e,n,a):_o(e,n,a,i||null):1===t&&null!==n?_o(e,n,a,i||null):2===t?function(t,e,n){const r=Eo(t,e);r&&function(t,e,n,r){je(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Fe(n)&&ho(e,t,r,o,i);for(let s=10;s<n.length;s++){const i=n[s];Oo(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function fo(t,e,n,r){const i=lo(t.node,e);i&&Oo(t,e,e[11],n?1:2,i,r)}function po(t,e){const n=t[9],r=n.indexOf(e);1024&e[2]&&Qe(e[3],-1),n.splice(r,1)}function go(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&po(i,r),e>0&&(t[n-1][4]=r[4]);const o=ee(t,10+e);fo(r[1],r,!1,null);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function yo(t,e){if(!(256&e[2])){const n=e[11];je(n)&&n.destroyNode&&Oo(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return vo(t[1],t);for(;e;){let n=null;if(be(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)be(e)&&vo(e[1],e),e=mo(e,t);null===e&&(e=t),be(e)&&vo(e[1],e),n=e&&e[4]}e=n}}(e)}}function mo(t,e){let n;return be(t)&&(n=t[6])&&2===n.type?co(n,t):t[3]===e?null:t[3]}function vo(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof An)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):Fe(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e);const n=e[6];n&&3===n.type&&je(e[11])&&e[11].destroy();const r=e[17];if(null!==r&&we(e[3])){r!==e[3]&&po(r,e);const n=e[19];null!==n&&n.detachView(t)}}}function _o(t,e,n,r){je(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function bo(t,e,n){je(t)?t.appendChild(e,n):e.appendChild(n)}function wo(t,e,n,r){null!==r?_o(t,e,n,r):bo(t,e,n)}function Eo(t,e){return je(t)?t.parentNode(e):e.parentNode}function Co(t,e,n,r){const i=function(t,e,n){let r=e.parent;for(;null!=r&&(4===r.type||5===r.type);)r=(e=r).parent;if(null==r){const t=n[6];return 2===t.type?lo(t,n):n[0]}if(e&&5===e.type&&4&e.flags)return Ue(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==se.ShadowDom&&n!==se.Native)return null}return Ue(r,n)}(t,r,e);if(null!=i){const t=e[11],o=function(t,e){if(2===t.type){const n=co(t,e);return null===n?null:So(n.indexOf(e,10)-10,n)}return 4===t.type||5===t.type?Ue(t,e):null}(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)wo(t,i,n[e],o);else wo(t,i,n,o)}}function So(t,e){const n=10+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return function t(e,n){if(null!==n){const r=n.type;if(3===r)return Ue(n,e);if(0===r)return So(-1,e[n.index]);if(4===r||5===r){const r=n.child;if(null!==r)return t(e,r);{const t=e[n.index];return we(t)?So(-1,t):Fe(t)}}{const r=e[16],i=r[6],o=li(r),s=i.projection[n.projection];return null!=s?t(o,s):t(e,n.next)}}return null}(t,r)}return e[7]}function To(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;s&&0===e&&(a&&Yr(Fe(a),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(To(t,e,n.child,r,i,o,!1),ho(e,t,i,a,o)):1===u?Io(t,e,r,n,i,o):ho(e,t,i,a,o)),n=s?n.projectionNext:n.next}}function Oo(t,e,n,r,i,o){To(n,r,t.node.child,e,i,o,!1)}function Io(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)ho(e,t,i,a[u],o);else To(t,e,a,s[3],i,o,!0)}function xo(t,e,n){je(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ao(t,e,n){je(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class ko{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView;return null==t[0]?function t(e,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(Fe(s)),we(s))for(let e=10;e<s.length;e++){const n=s[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(4===a||5===a)t(e,n,r.child,i);else if(1===a){const e=n[16],o=e[6].projection[r.projection];if(Array.isArray(o))i.push(...o);else{const n=li(e);t(n[1],n,o,i,!0)}}r=o?r.projectionNext:r.next}return i}(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}yo(this._lView[1],this._lView)}onDestroy(t){ji(this._lView[1],this._lView,null,t)}markForCheck(){eo(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){no(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){on(!0);try{no(t,e,n)}finally{on(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Oo(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class No extends ko{constructor(t){super(t),this._view=t}detectChanges(){ro(this._view)}checkNoChanges(){!function(t){on(!0);try{ro(t)}finally{on(!1)}}(this._view)}get context(){return null}}let Po,Ro,Do;function jo(t,e,n){return Po||(Po=class extends t{}),new Po(Ue(e,n))}function Lo(t,e,n,r){return Ro||(Ro=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Si(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Oi(e,n,t),new ko(n)}}),0===n.type?new Ro(r,n,jo(e,n,r)):null}function Fo(t,e,n,r){let i;Do||(Do=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return jo(e,this._hostTNode,this._hostView)}get injector(){return new ir(this._hostTNode,this._hostView)}get parentInjector(){const t=Kn(this._hostTNode,this._hostView),e=Mn(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){const t=n.parent.injectorIndex;let e=n.parent;for(;null!=e.parent&&t==e.parent.injectorIndex;)e=e.parent;return e}let r=Fn(t),i=e,o=e[6];for(;r>1;)i=i[15],o=i[6],r--;return o}(t,this._hostView,this._hostTNode);return jn(t)&&null!=n?new ir(n,e):new ir(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Xt,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),we(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Do(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e);return function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],te(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,this._lContainer,i),fo(r,n,!0,So(i,this._lContainer)),t.attachToViewContainerRef(this),te(this._lContainer[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=go(this._lContainer,e);n&&(ee(this._lContainer[8],e),yo(n[1],n))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=go(this._lContainer,e);return n&&null!=ee(this._lContainer[8],e)?new ko(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(we(o))i=o;else{let t;if(4===n.type)t=Fe(o);else if(t=r[11].createComment(""),Oe(r)){const e=r[11],i=Ue(n,r);_o(e,Eo(e,i),t,function(t,e){return je(t)?t.nextSibling(e):e.nextSibling}(e,i))}else Co(r[1],r,t,n);r[n.index]=i=Xi(o,r,t,n),to(r,i)}return new Do(i,n,r)}let Mo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Uo(),t})();const Uo=function(t=!1){return function(t,e,n){if(!n&&Ce(t)){const n=qe(t.index,e);return new ko(n,n)}return 3===t.type||0===t.type||4===t.type||5===t.type?new ko(e[16],e):null}(Je(),Ye(),t)},Vo=Function,qo=new Ft("Set Injector scope."),Bo={},Ho={},zo=[];let Wo=void 0;function Go(){return void 0===Wo&&(Wo=new Yt),Wo}function Qo(t,e=null,n=null,r){return new $o(t,n,e||Go(),r)}class $o{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Jt(e,n=>this.processProvider(n,t,e)),Jt([t],t=>this.processInjectorType(t,[],i)),this.records.set(Mt,Xo(void 0,this));const o=this.records.get(qo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:_t(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Ut,n=st.Default){this.assertNotDestroyed();const r=zt(this);try{if(!(n&st.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Ft)&&ht(t);e=n&&this.injectableDefInScope(n)?Xo(Ko(t),Bo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&st.Self?Go():this.parent).get(t,e=n&st.Optional&&e===Ut?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(_t(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=_t(e);if(Array.isArray(e))i=e.map(_t).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):_t(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Vt,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{zt(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(_t(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=Ct(t)))return!1;let r=dt(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=dt(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{Jt(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Jt(r,t=>this.processProvider(t,n,r||zo))}}this.injectorDefTypes.add(o),this.records.set(o,Xo(r.factory,Bo));const a=r.providers;if(null!=a&&!s){const e=t;Jt(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Jo(t=Ct(t))?t:Ct(t&&t.provide);const i=function(t,e,n){return Zo(t)?Xo(void 0,t.useValue):Xo(Yo(t,e,n),Bo)}(t,e,n);if(Jo(t)||!0!==t.multi){const t=this.records.get(r);t&&void 0!==t.multi&&Zr()}else{let e=this.records.get(r);e?void 0===e.multi&&Zr():(e=Xo(void 0,Bo,!0),e.factory=()=>Kt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Ho?function(t){throw new Error("Cannot instantiate cyclic dependency! "+t)}(_t(t)):e.value===Bo&&(e.value=Ho,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Ko(t){const e=ht(t),n=null!==e?e.factory:ve(t);if(null!==n)return n;const r=dt(t);if(null!==r)return r.factory;if(t instanceof Ft)throw new Error(`Token ${_t(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${_t(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[pt]||t[mt]||t[yt]&&t[yt]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Yo(t,e,n){let r=void 0;if(Jo(t)){const e=Ct(t);return ve(e)||Ko(e)}if(Zo(t))r=()=>Ct(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Kt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Qt(Ct(t.useExisting));else{const i=Ct(t&&(t.useClass||t.provide));if(i||function(t,e,n){let r="";throw t&&e&&(r=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${_t(t)}'`+r)}(e,n,t),!function(t){return!!t.deps}(t))return ve(i)||Ko(i);r=()=>new i(...Kt(t.deps))}var i;return r}function Xo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Zo(t){return null!==t&&"object"==typeof t&&qt in t}function Jo(t){return"function"==typeof t}const ts=function(t,e,n){return function(t,e=null,n=null,r){const i=Qo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let es=(()=>{class t{static create(t,e){return Array.isArray(t)?ts(t,e,""):ts(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Ut,t.NULL=new Yt,t.\u0275prov=ct({token:t,providedIn:"any",factory:()=>Qt(Mt)}),t.__NG_ELEMENT_ID__=-1,t})();const ns=new Ft("AnalyzeForEntryComponents");function rs(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=bt(i,t):2==o&&(r=bt(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}let is=null;function os(){if(!is){const t=At.Symbol;if(t&&t.iterator)is=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(is=n)}}}return is}function ss(t){return!!as(t)&&(Array.isArray(t)||!(t instanceof Map)&&os()in t)}function as(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function us(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function cs(t,e,n,r){const i=Ye();return us(i,sn(),e)&&(Xe(),function(t,e,n,r,i,o){const s=Ue(t,e),a=e[11];if(null==r)je(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==i?Un(r):i(r,t.tagName||"",n);je(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}(En(),i,t,e,n,r)),cs}function ls(t,e,n,r){return us(t,sn(),n)?e+Un(n)+r:ci}function hs(t,e,n,r,i,o,s,a){const u=Ye(),c=Xe(),l=t+20,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Ti(e,n[6],t,0,s||null,We(c,a));Ui(e,n,l,We(c,u)),Cn(e,l);const h=l.tViews=Di(2,-1,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c),f=Li(0,null,2,-1,null,null);return f.injectorIndex=l.injectorIndex,h.node=f,null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,c,u,e,n,r,i,o,s):c.data[l];tn(h,!1);const f=u[11].createComment("");Co(c,u,f,h),Yr(f,u),to(u,u[l]=Xi(f,u,f,h)),Se(h)&&Ni(c,u,h),null!=s&&Pi(u,h,a)}function fs(t,e=st.Default){const n=Ye();return null==n?Qt(t,e):Xn(Je(),n,Ct(t),e)}function ds(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Nn(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Je(),t)}function ps(t,e,n){const r=Ye();return us(r,sn(),e)&&Mi(Xe(),En(),r,t,e,r[11],n,!1),ps}function gs(t,e,n,r,i){const o=i?"class":"style";uo(t,n,e.inputs[o],o,r)}function ys(t,e,n,r){const i=Ye(),o=Xe(),s=20+t,a=i[11],u=i[s]=Ci(e,a,$e.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=We(a,o),c=Ti(e,n[6],t,3,i,u);return Ui(e,n,c,We(a,s)),null!==c.attrs&&rs(c,c.attrs,!1),null!==c.mergedAttrs&&rs(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(t,o,i,0,e,n,r):o.data[s];tn(c,!0);const l=c.mergedAttrs;null!==l&&kn(a,u,l);const h=c.classes;null!==h&&Ao(a,u,h);const f=c.styles;null!==f&&xo(a,u,f),Co(o,i,u,c),0===$e.lFrame.elementDepthCount&&Yr(u,i),$e.lFrame.elementDepthCount++,Se(c)&&(Ni(o,i,c),ki(o,c,i)),null!==r&&Pi(i,c)}function ms(){let t=Je();en()?nn():(t=t.parent,tn(t,!1));const e=t;$e.lFrame.elementDepthCount--;const n=Xe();n.firstCreatePass&&(Cn(n,t),Ee(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&gs(n,e,Ye(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&gs(n,e,Ye(),e.stylesWithoutHost,!1)}function vs(t,e,n,r){ys(t,e,n,r),ms()}function _s(){return Ye()}function bs(t){return!!t&&"function"==typeof t.then}function ws(t){return!!t&&"function"==typeof t.subscribe}function Es(t,e,n=!1,r){const i=Ye(),o=Xe(),s=Je();return function(t,e,n,r,i,o,s=!1,a){const u=Se(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=so(e);let h=!0;if(3===r.type){const f=Ue(r,e),d=a?a(f):ae,p=d.target||f,g=l.length,y=a?t=>a(Fe(t[r.index])).target:r.index;if(je(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Ss(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=Ss(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Es}function Cs(t,e,n){try{return!1!==e(n)}catch(r){return ao(t,r),!1}}function Ss(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?qe(t.index,e):e;0==(32&e[2])&&eo(s);let a=Cs(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Cs(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Ts(t=1){return function(t){return($e.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,$e.lFrame.contextLView))[8]}(t)}function Os(t,e,n,r,i){const o=Ye(),s=ls(o,e,n,r);return s!==ci&&Mi(Xe(),En(),o,t,s,o[11],i,!1),Os}const Is=[];function xs(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?mi(o):_i(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];As(t[a],e)&&(u=!0,t[a+1]=r?wi(n):vi(n)),a=r?mi(n):_i(n)}u&&(t[n+1]=r?vi(o):wi(o))}function As(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ie(t,e)>=0}const ks={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ns(t){return t.substring(ks.key,ks.keyEnd)}function Ps(t,e){const n=ks.textEnd;return n===e?-1:(e=ks.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,ks.key=e,n),Rs(t,e,n))}function Rs(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Ds(t,e,n){return Ms(t,e,n,!1),Ds}function js(t,e){return Ms(t,e,null,!0),js}function Ls(t){!function(t,e,n,r){const i=Xe(),o=an(2);i.firstUpdatePass&&Vs(i,null,o,!0);const s=Ye();if(n!==ci&&us(s,o,n)){const r=i.data[bn()+20];if(Gs(r,!0)&&!Us(i,o)){let t=r.classesWithoutHost;null!==t&&(n=bt(t,n||"")),gs(i,r,s,n,!0)}else!function(t,e,n,r,i,o,s,a){i===ci&&(i=Is);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const s=u<i.length?i[u+1]:void 0,f=c<o.length?o[c+1]:void 0;let d=null,p=void 0;l===h?(u+=2,c+=2,s!==f&&(d=h,p=f)):null===h||null!==l&&l<h?(u+=2,d=l):(c+=2,d=h,p=f),null!==d&&Hs(t,e,n,r,d,p,!0,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,r,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return Is;const r=[],i=mr(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,o)}}(ne,Fs,t)}function Fs(t,e){for(let n=function(t){return function(t){ks.key=0,ks.keyEnd=0,ks.value=0,ks.valueEnd=0,ks.textEnd=t.length}(t),Ps(t,Rs(t,0,ks.textEnd))}(e);n>=0;n=Ps(e,n))ne(t,Ns(e),!0)}function Ms(t,e,n,r){const i=Ye(),o=Xe(),s=an(2);o.firstUpdatePass&&Vs(o,t,s,r),e!==ci&&us(i,s,e)&&Hs(o,o.data[bn()+20],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=_t(mr(t)))),t}(e,n),r,s)}function Us(t,e){return e>=t.expandoStartIndex}function Vs(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[bn()+20],s=Us(t,n);Gs(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=ln(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Bs(n=qs(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=qs(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==_i(r))return t[mi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=qs(null,t,e,n[1],r),n=Bs(n,e.attrs,r),function(t,e,n,r){t[mi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Bs(r,t[o].hostAttrs,n);return Bs(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=mi(s),u=_i(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||ie(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=mi(t[a+1]);t[r+1]=yi(e,a),0!==e&&(t[e+1]=bi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=yi(a,0),0!==a&&(t[a+1]=bi(t[a+1],r)),a=r;else t[r+1]=yi(u,0),0===a?a=r:t[u+1]=bi(t[u+1],r),u=r;l&&(t[r+1]=vi(t[r+1])),xs(t,c,r,!0),xs(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&ie(o,e)>=0&&(n[r+1]=wi(n[r+1]))}(e,c,t,r,o),s=yi(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function qs(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Bs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Bs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ne(t,s,!!n||e[++o]))}return void 0===t?null:t}function Hs(t,e,n,r,i,o,s,a){if(3!==e.type)return;const u=t.data,c=u[a+1];Ws(1==(1&c)?zs(u,e,n,i,_i(c),s):void 0)||(Ws(o)||function(t){return 2==(2&t)}(c)&&(o=zs(u,null,n,i,a,s)),function(t,e,n,r,i){const o=je(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{const e=-1==r.indexOf("-")?void 0:2;null==i?o?t.removeStyle(n,r,e):n.style.removeProperty(r):o?t.setStyle(n,r,i,e):n.style.setProperty(r,i)}}(r,s,Me(bn(),n),i,o))}function zs(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===ci&&(l=c?Is:void 0);let h=c?re(l,r):u===r?l:void 0;if(o&&!Ws(h)&&(h=re(e,r)),Ws(h)&&(a=h,s))return a;const f=t[i+1];i=s?mi(f):_i(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=re(t,r))}return a}function Ws(t){return void 0!==t}function Gs(t,e){return 0!=(t.flags&(e?16:32))}function Qs(t,e=""){const n=Ye(),r=Xe(),i=t+20,o=r.firstCreatePass?Ti(r,n[6],t,3,null,null):r.data[i],s=n[i]=function(t,e){return je(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);Co(r,n,s,o),tn(o,!1)}function $s(t){return Ks("",t,""),$s}function Ks(t,e,n){const r=Ye(),i=ls(r,t,e,n);return i!==ci&&function(t,e,n){const r=Me(e,t),i=t[11];je(i)?i.setValue(r,n):r.textContent=n}(r,bn(),i),Ks}function Ys(t,e,n){const r=Ye();return us(r,sn(),e)&&Mi(Xe(),En(),r,t,e,r[11],n,!0),Ys}function Xs(t,e,n){const r=Ye();if(us(r,sn(),e)){const i=Xe(),o=En();Mi(i,o,r,t,e,function(t,e,n){return(null===t||Te(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}(ln(i.data),o,r),n,!0)}return Xs}function Zs(t,e){const n=Be(t)[1],r=n.data.length-1;Cn(n,{directiveStart:r,directiveEnd:r+1})}function Js(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(Te(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ta(t.inputs),e.declaredInputs=ta(t.declaredInputs),e.outputs=ta(t.outputs);const n=i.hostBindings;n&&ra(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&ea(t,o),s&&na(t,s),ut(t.inputs,i.inputs),ut(t.declaredInputs,i.declaredInputs),ut(t.outputs,i.outputs),Te(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Js&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Rn(i.hostAttrs,n=Rn(n,i.hostAttrs))}}(r)}function ta(t){return t===ae?{}:t===ue?[]:t}function ea(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function na(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function ra(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}function ia(t,e,n,r,i){if(t=Ct(t),Array.isArray(t))for(let o=0;o<t.length;o++)ia(t[o],e,n,r,i);else{const o=Xe(),s=Ye();let a=Jo(t)?t:Ct(t.provide),u=Yo(t);const c=Je(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(Jo(t)||!t.multi){const r=new An(u,i,fs),d=aa(a,e,i?l:l+f,h);-1===d?(Yn(Gn(c,s),o,a),oa(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=aa(a,e,l+f,h),p=aa(a,e,l,l+f),g=d>=0&&n[d],y=p>=0&&n[p];if(i&&!y||!i&&!g){Yn(Gn(c,s),o,a);const l=function(t,e,n,r,i){const o=new An(t,n,fs);return o.multi=[],o.index=e,o.componentProviders=0,sa(o,i,r&&!n),o}(i?ca:ua,n.length,i,r,u);!i&&y&&(n[p].providerFactory=l),oa(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else oa(o,t,d>-1?d:p,sa(n[i?p:d],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function oa(t,e,n,r){const i=Jo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function sa(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function aa(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ua(t,e,n,r){return la(this.multi,[])}function ca(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=er(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),la(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],la(i,o);return o}function la(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ha(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Xe();if(r.firstCreatePass){const i=Te(t);ia(n,r.data,r.blueprint,i,!0),ia(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class fa{}class da{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${_t(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let pa=(()=>{class t{}return t.NULL=new da,t})(),ga=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>ya(t),t})();const ya=function(t){return jo(t,Je(),Ye())};class ma{}var va=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let _a=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ba(),t})();const ba=function(){const t=Ye(),e=qe(Je().index,t);return function(t){const e=t[11];if(je(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(be(e)?e:t)};let wa=(()=>{class t{}return t.\u0275prov=ct({token:t,providedIn:"root",factory:()=>null}),t})();class Ea{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ca=new Ea("10.0.14");class Sa{constructor(){}supports(t){return ss(t)}create(t){return new Oa(t)}}const Ta=(t,e)=>e;class Oa{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ta}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<ka(n,r,i)?e:n,s=ka(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!ss(t))throw new Error(`Error trying to diff '${_t(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[os()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Ia(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Aa),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Aa),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ia{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class xa{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Aa{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new xa,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ka(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Na{constructor(){}supports(t){return t instanceof Map||as(t)}create(){return new Pa}}class Pa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||as(t)))throw new Error(`Error trying to diff '${_t(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ra(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ra{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Da=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ot,new rt]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=ct({token:t,providedIn:"root",factory:()=>new t([new Sa])}),t})(),ja=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ot,new rt]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=ct({token:t,providedIn:"root",factory:()=>new t([new Na])}),t})();const La=[new Na],Fa=new Da([new Sa]),Ma=new ja(La);let Ua=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Va(t,ga),t})();const Va=function(t,e){return Lo(t,e,Je(),Ye())};let qa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ba(t,ga),t})();const Ba=function(t,e){return Fo(t,e,Je(),Ye())},Ha={};class za extends pa{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=me(t);return new Qa(e,this.ngModule)}}function Wa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ga=new Ft("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>qn});class Qa extends fa{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ui).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Wa(this.componentDef.inputs)}get outputs(){return Wa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ha,i);return o!==Ha||r===Ha?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(ma,Le),s=i.get(wa,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(je(t))return t.selectRootElement(e,n===se.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Ci(u,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:qn,clean:oo,playerHandler:null,flags:0},f=Di(0,-1,null,1,0,null,null,null,null,null),d=Si(null,f,h,l,null,null,o,a,s,i);let p,g;pn(d,null);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Ti(s,null,0,3,null,null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(rs(a,u,!0),null!==t&&(kn(i,t,u),null!==a.classes&&Ao(i,t,a.classes),null!==a.styles&&xo(i,t,a.styles)));const c=r.createRenderer(t,e),l=Si(n,Ri(e),null,e.onPush?64:16,n[20],a,r,c,void 0);return s.firstCreatePass&&(Yn(Gn(a,n),s,e.type),zi(s,a),Gi(a,n.length,1)),to(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)kn(a,c,["ng-version",Ca.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!ii(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&kn(a,c,t),e&&e.length>0&&Ao(a,c,e.join(" "))}if(g=Ve(f,0),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Je();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Hi(t,r,1),Qi(t,e,n));const i=er(e,t,e.length-1,r);Yr(i,e);const o=Ue(r,e);return o&&Yr(o,e),i}(o,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=Je();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){wn(a.index-20);const t=n[1];Vi(t,e),qi(t,n,e.hostVars),Bi(e,s)}return s}(t,this.componentDef,d,h,[Zs]),Oi(f,d,null)}finally{_n()}const y=new $a(this.componentType,p,jo(ga,g,d),d,g);return f.node.child=g,y}}class $a extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new No(r),function(t,e,n,r){let i=t.node;null==i&&(t.node=i=Li(0,null,2,-1,null,null)),r[6]=i}(r[1],0,0,r),this.componentType=t}get injector(){return new ir(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const Ka=void 0;var Ya=["en",[["a","p"],["AM","PM"],Ka],[["AM","PM"],Ka,Ka],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ka,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ka,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ka,"{1} 'at' {0}",Ka],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Xa={};function Za(t){return t in Xa||(Xa[t]=At.ng&&At.ng.common&&At.ng.common.locales&&At.ng.common.locales[t]),Xa[t]}var Ja=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});let tu="en-US";function eu(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(tu=t.toLowerCase().replace(/_/g,"-"))}const nu=new Map;class ru extends Xt{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new za(this);const n=_e(t),r=t[Dt]||null;r&&eu(r),this._bootstrapComponents=Bn(n.bootstrap),this._r3Injector=Qo(t,e,[{provide:Xt,useValue:this},{provide:pa,useValue:this.componentFactoryResolver}],_t(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=es.THROW_IF_NOT_FOUND,n=st.Default){return t===es||t===Xt||t===Mt?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class iu extends Zt{constructor(t){super(),this.moduleType=t,null!==_e(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${_t(e)} vs ${_t(e.name)}`)})(t,nu.get(t),e),nu.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new ru(this.moduleType,t)}}const ou=class extends C{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,i=t=>null,o=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(i=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(o=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(r,i,o);return t instanceof h&&t.add(s),s}};function su(){return this._results[os()]()}class au{constructor(){this.dirty=!0,this._results=[],this.changes=new ou,this.length=0;const t=os(),e=au.prototype;e[t]||(e[t]=su)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class uu{constructor(t){this.queryList=t,this.matches=null}clone(){return new uu(this.queryList)}setDirty(){this.queryList.setDirty()}}class cu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new cu(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==_u(t,e).matches&&this.queries[e].setDirty()}}class lu{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class hu{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new hu(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class fu{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new fu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&4===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,du(e,i)),this.matchTNodeWithReadOption(t,e,tr(e,t,i,!1,!1))}else n===Ua?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,tr(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ga||r===qa||r===Ua&&0===e.type)this.addMatch(e.index,-2);else{const n=tr(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function du(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function pu(t,e,n,r){return-1===n?function(t,e){return 3===t.type||4===t.type?jo(ga,t,e):0===t.type?Lo(Ua,ga,t,e):null}(e,t):-2===n?function(t,e,n){return n===ga?jo(ga,e,t):n===Ua?Lo(Ua,ga,e,t):n===qa?Fo(qa,ga,e,t):void 0}(t,e,r):er(t,t[1],n,e)}function gu(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:pu(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function yu(t){const e=Ye(),n=Xe(),r=hn();fn(r+1);const i=_u(n,r);if(t.dirty&&He(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?function t(e,n,r,i){const o=e.queries.getByIndex(r),s=o.matches;if(null!==s){const a=gu(e,n,o,r);for(let e=0;e<s.length;e+=2){const r=s[e];if(r>0)i.push(a[e/2]);else{const o=s[e+1],a=n[-r];for(let e=10;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,o,i)}if(null!==a[9]){const e=a[9];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,o,i)}}}}}return i}(n,e,r,[]):gu(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function mu(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new hu),t.queries.track(new fu(e,n))}(t,new lu(n,r,!1,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),function(t,e){const n=new au;ji(t,e,n,n.destroy),null===e[19]&&(e[19]=new cu),e[19].queries.push(new uu(n))}(t,e)}(Xe(),Ye(),e,n,r,0,Je(),t)}function vu(){return t=Ye(),e=hn(),t[19].queries[e].queryList;var t,e}function _u(t,e){return t.queries.getByIndex(e)}const bu=new Ft("Application Initializer");let wu=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();bs(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Qt(bu,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Eu=new Ft("AppId"),Cu={provide:Eu,useFactory:function(){return`${Su()}${Su()}${Su()}`},deps:[]};function Su(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Tu=new Ft("Platform Initializer"),Ou=new Ft("Platform ID"),Iu=new Ft("appBootstrapListener");let xu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Au=new Ft("LocaleId"),ku=new Ft("DefaultCurrencyCode");class Nu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Pu=function(t){return new iu(t)},Ru=Pu,Du=function(t){return Promise.resolve(Pu(t))},ju=function(t){const e=Pu(t),n=Bn(_e(t).declarations).reduce((t,e)=>{const n=me(e);return n&&t.push(new Qa(n)),t},[]);return new Nu(e,n)},Lu=ju,Fu=function(t){return Promise.resolve(ju(t))};let Mu=(()=>{class t{constructor(){this.compileModuleSync=Ru,this.compileModuleAsync=Du,this.compileModuleAndAllComponentsSync=Lu,this.compileModuleAndAllComponentsAsync=Fu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Uu=(()=>Promise.resolve(0))();function Vu(t){"undefined"==typeof Zone?Uu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class qu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ou(!1),this.onMicrotaskEmpty=new ou(!1),this.onStable=new ou(!1),this.onError=new ou(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=At.requestAnimationFrame,e=At.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(At,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Wu(t),zu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Wu(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return Gu(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),Qu(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return Gu(t),e.invoke(r,i,o,s,a)}finally{Qu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Wu(t),zu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(qu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Hu,Bu,Bu);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Bu(){}const Hu={};function zu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Wu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Gu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Qu(t){t._nesting--,zu(t)}class $u{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ou,this.onMicrotaskEmpty=new ou,this.onStable=new ou,this.onError=new ou}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Ku=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qu.assertNotInAngularZone(),Vu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Qt(qu))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),Yu=(()=>{class t{constructor(){this._applications=new Map,Ju.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Ju.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class Xu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let Zu,Ju=new Xu;const tc=new Ft("AllowMultipleToken");class ec{constructor(t,e){this.name=t,this.token=e}}function nc(t,e,n=[]){const r="Platform: "+e,i=new Ft(r);return(e=[])=>{let o=rc();if(!o||o.injector.get(tc,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:qo,useValue:"platform"});!function(t){if(Zu&&!Zu.destroyed&&!Zu.injector.get(tc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Zu=t.get(ic);const e=t.get(Tu,null);e&&e.forEach(t=>t())}(es.create({providers:t,name:r}))}return function(t){const e=rc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function rc(){return Zu&&!Zu.destroyed?Zu:null}let ic=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new $u:("zone.js"===t?void 0:t)||new qu({enableLongStackTrace:Er(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:qu,useValue:n}];return n.run(()=>{const e=es.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(lr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>ac(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return bs(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(wu);return t.runInitializers(),t.donePromise.then(()=>(eu(i.injector.get(Au,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=oc({},e);return function(t,e,n){const r=new iu(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(sc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${_t(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Qt(es))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function oc(t,e){return Array.isArray(e)?e.reduce(oc,t):Object.assign(Object.assign({},t),e)}let sc=(()=>{class t{constructor(t,e,n,r,i,o){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Er(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new v(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new v(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{qu.assertNotInAngularZone(),Vu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{qu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=W(s,a.pipe(J()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof fa?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Xt),i=n.create(es.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(Ku,null);return o&&i.injector.get(Yu).registerApplication(i.location.nativeElement,o),this._loadComponent(i),Er()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;ac(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Iu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),ac(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Qt(qu),Qt(xu),Qt(es),Qt(lr),Qt(pa),Qt(wu))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function ac(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class uc{}class cc{}const lc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let hc=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||lc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>fc(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>fc(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Qt(Mu),Qt(cc,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function fc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const dc=nc(null,"core",[{provide:Ou,useValue:"unknown"},{provide:ic,deps:[es]},{provide:Yu,deps:[]},{provide:xu,deps:[]}]),pc=[{provide:sc,useClass:sc,deps:[qu,xu,es,lr,pa,wu]},{provide:Ga,deps:[qu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:wu,useClass:wu,deps:[[new rt,bu]]},{provide:Mu,useClass:Mu,deps:[]},Cu,{provide:Da,useFactory:function(){return Fa},deps:[]},{provide:ja,useFactory:function(){return Ma},deps:[]},{provide:Au,useFactory:function(t){return eu(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new nt(Au),new rt,new ot]]},{provide:ku,useValue:"USD"}];let gc=(()=>{class t{constructor(t){}}return t.\u0275mod=pe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)(Qt(sc))},providers:pc}),t})();const yc={apiKey:"AIzaSyDbkPe37tDuj35bO3xXopGmOUQQ76iO1Ow",authDomain:"angular9crud-471c6.firebaseapp.com",databaseURL:"https://angular9crud-471c6.firebaseio.com",projectId:"angular9crud-471c6",storageBucket:"angular9crud-471c6.appspot.com",messagingSenderId:"15642375404",appId:"1:15642375404:web:dec213930a8474082561c9",measurementId:"G-DQPB0H867N"};let mc=null;function vc(){return mc}const _c=new Ft("DocumentToken");let bc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({factory:wc,token:t,providedIn:"platform"}),t})();function wc(){return Qt(Cc)}const Ec=new Ft("Location Initialized");let Cc=(()=>{class t extends bc{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=vc().getLocation(),this._history=vc().getHistory()}getBaseHrefFromDOM(){return vc().getBaseHref(this._doc)}onPopState(t){vc().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){vc().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Sc()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Sc()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Qt(_c))},t.\u0275prov=ct({factory:Tc,token:t,providedIn:"platform"}),t})();function Sc(){return!!window.history.pushState}function Tc(){return new Cc(Qt(_c))}function Oc(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Ic(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function xc(t){return t&&"?"!==t[0]?"?"+t:t}let Ac=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({factory:kc,token:t,providedIn:"root"}),t})();function kc(t){const e=Qt(_c).location;return new Pc(Qt(bc),e&&e.origin||"")}const Nc=new Ft("appBaseHref");let Pc=(()=>{class t extends Ac{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Oc(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+xc(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+xc(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+xc(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Qt(bc),Qt(Nc,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),Rc=(()=>{class t extends Ac{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Oc(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+xc(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+xc(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Qt(bc),Qt(Nc,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),Dc=(()=>{class t{constructor(t,e){this._subject=new ou,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Ic(Lc(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+xc(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Lc(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xc(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xc(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(Qt(Ac),Qt(bc))},t.normalizeQueryParams=xc,t.joinWithSlash=Oc,t.stripTrailingSlash=Ic,t.\u0275prov=ct({factory:jc,token:t,providedIn:"root"}),t})();function jc(){return new Dc(Qt(Ac),Qt(bc))}function Lc(t){return t.replace(/\/index.html$/,"")}var Fc=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class Mc{}let Uc=(()=>{class t extends Mc{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Za(e);if(n)return n;const r=e.split("-")[0];if(n=Za(r),n)return n;if("en"===r)return Ya;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Ja.PluralCase]}(e||this.locale)(t)){case Fc.Zero:return"zero";case Fc.One:return"one";case Fc.Two:return"two";case Fc.Few:return"few";case Fc.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Qt(Au))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class Vc{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let qc=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Er()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Vc(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new Bc(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new Bc(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(fs(qa),fs(Ua),fs(Da))},t.\u0275dir=ye({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Bc{constructor(t,e){this.record=t,this.view=e}}let Hc=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new zc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Wc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Wc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(fs(qa),fs(Ua))},t.\u0275dir=ye({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class zc{constructor(){this.$implicit=null,this.ngIf=null}}function Wc(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${_t(e)}'.`)}let Gc=(()=>{class t{}return t.\u0275mod=pe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[{provide:Mc,useClass:Uc}]}),t})();function Qc(t){return"server"===t}let $c=(()=>{class t{}return t.\u0275prov=ct({token:t,providedIn:"root",factory:()=>new Kc(Qt(_c),window,Qt(lr))}),t})();class Kc{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=Yc(this.window.history)||Yc(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function Yc(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Xc extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new Xc,mc||(mc=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=Jc||(Jc=document.querySelector("base"),Jc)?Jc.getAttribute("href"):null;return null==e?null:(n=e,Zc||(Zc=document.createElement("a")),Zc.setAttribute("href",n),"/"===Zc.pathname.charAt(0)?Zc.pathname:"/"+Zc.pathname);var n}resetBaseElement(){Jc=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let Zc,Jc=null;const tl=new Ft("TRANSITION_ID"),el=[{provide:bu,useFactory:function(t,e,n){return()=>{n.get(wu).donePromise.then(()=>{const n=vc();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[tl,_c,es],multi:!0}];class nl{static init(){var t;t=new nl,Ju=t}addToWindow(t){At.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},At.getAllAngularTestabilities=()=>t.getAllTestabilities(),At.getAllAngularRootElements=()=>t.getAllRootElements(),At.frameworkStabilizers||(At.frameworkStabilizers=[]),At.frameworkStabilizers.push(t=>{const e=At.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach((function(t){t.whenStable(i)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?vc().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const rl=new Ft("EventManagerPlugins");let il=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(Qt(rl),Qt(qu))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class ol{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=vc().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let sl=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),al=(()=>{class t extends sl{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>vc().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(Qt(_c))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const ul={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},cl=/%COMP%/g;function ll(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?ll(t,i,n):(i=i.replace(cl,t),n.push(i))}return n}function hl(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let fl=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new dl(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case se.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new pl(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case se.Native:case se.ShadowDom:return new gl(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=ll(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Qt(il),Qt(al),Qt(Eu))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class dl{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(ul[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=ul[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=ul[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&va.DashCase?t.style.setProperty(e,n,r&va.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&va.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,hl(n)):this.eventManager.addEventListener(t,e,hl(n))}}class pl extends dl{constructor(t,e,n,r){super(t),this.component=n;const i=ll(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(cl,r+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(cl,t)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class gl extends dl{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===se.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=ll(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let yl=(()=>{class t extends ol{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Qt(_c))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const ml=["alt","control","meta","shift"],vl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_l={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},bl={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let wl=(()=>{class t extends ol{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vc().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(ml.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&_l.hasOwnProperty(e)&&(e=_l[e]))}return vl[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ml.forEach(r=>{r!=n&&(0,bl[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Qt(_c))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),El=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({factory:function(){return Qt(Cl)},token:t,providedIn:"root"}),t})(),Cl=(()=>{class t extends El{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case Gr.NONE:return e;case Gr.HTML:return vr(e,"HTML")?mr(e):zr(this._doc,String(e));case Gr.STYLE:return vr(e,"Style")?mr(e):e;case Gr.SCRIPT:if(vr(e,"Script"))return mr(e);throw new Error("unsafe value used in a script context");case Gr.URL:return _r(e),vr(e,"URL")?mr(e):Ir(String(e));case Gr.RESOURCE_URL:if(vr(e,"ResourceURL"))return mr(e);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return new fr(t)}bypassSecurityTrustStyle(t){return new dr(t)}bypassSecurityTrustScript(t){return new pr(t)}bypassSecurityTrustUrl(t){return new gr(t)}bypassSecurityTrustResourceUrl(t){return new yr(t)}}return t.\u0275fac=function(e){return new(e||t)(Qt(_c))},t.\u0275prov=ct({factory:function(){return t=Qt(Mt),new Cl(t.get(_c));var t},token:t,providedIn:"root"}),t})();const Sl=nc(dc,"browser",[{provide:Ou,useValue:"browser"},{provide:Tu,useValue:function(){Xc.makeCurrent(),nl.init()},multi:!0},{provide:_c,useFactory:function(){return function(t){Re=t}(document),document},deps:[]}]),Tl=[[],{provide:qo,useValue:"root"},{provide:lr,useFactory:function(){return new lr},deps:[]},{provide:rl,useClass:yl,multi:!0,deps:[_c,qu,Ou]},{provide:rl,useClass:wl,multi:!0,deps:[_c]},[],{provide:fl,useClass:fl,deps:[il,al,Eu]},{provide:ma,useExisting:fl},{provide:sl,useExisting:al},{provide:al,useClass:al,deps:[_c]},{provide:Ku,useClass:Ku,deps:[qu]},{provide:il,useClass:il,deps:[rl,qu]},[]];let Ol=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Eu,useValue:e.appId},{provide:tl,useExisting:Eu},el]}}}return t.\u0275mod=pe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)(Qt(t,12))},providers:Tl,imports:[Gc,gc]}),t})();function Il(t,e){return new v(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=U(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}"undefined"!=typeof window&&window;const xl=new Ft("NgValueAccessor"),Al={provide:xl,useExisting:Et(()=>kl),multi:!0};let kl=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(fs(_a),fs(ga))},t.\u0275dir=ye({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&Es("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[ha([Al])]}),t})();const Nl={provide:xl,useExisting:Et(()=>Rl),multi:!0},Pl=new Ft("CompositionEventMode");let Rl=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=vc()?vc().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(fs(_a),fs(ga),fs(Pl,8))},t.\u0275dir=ye({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&Es("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[ha([Nl])]}),t})(),Dl=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t}),t})(),jl=(()=>{class t extends Dl{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Ll(e||t)},t.\u0275dir=ye({type:t,features:[Js]}),t})();const Ll=sr(jl);function Fl(){throw new Error("unimplemented")}class Ml extends Dl{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return Fl()}get asyncValidator(){return Fl()}}class Ul{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let Vl=(()=>{class t extends Ul{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(fs(Ml,2))},t.\u0275dir=ye({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&js("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[Js]}),t})(),ql=(()=>{class t extends Ul{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(fs(jl,2))},t.\u0275dir=ye({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&js("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[Js]}),t})();function Bl(t){return null==t||0===t.length}function Hl(t){return null!=t&&"number"==typeof t.length}const zl=new Ft("NgValidators"),Wl=new Ft("NgAsyncValidators"),Gl=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ql{static min(t){return e=>{if(Bl(e.value)||Bl(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(Bl(e.value)||Bl(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return Bl(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Bl(t.value)||Gl.test(t.value)?null:{email:!0}}static minLength(t){return e=>Bl(e.value)||!Hl(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>Hl(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return Ql.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Bl(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter($l);return 0==e.length?null:function(t){return Yl(Xl(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter($l);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(u(e))return Il(e,null);if(c(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Il(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Il(t=1===t.length&&u(t[0])?t[0]:t,null).pipe(j(t=>e(...t)))}return Il(t,null)}(Xl(t,e).map(Kl)).pipe(j(Yl))}}}function $l(t){return null!=t}function Kl(t){const e=bs(t)?U(t):t;if(!ws(e))throw new Error("Expected validator to return Promise or Observable.");return e}function Yl(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Xl(t,e){return e.map(e=>e(t))}function Zl(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}const Jl={provide:xl,useExisting:Et(()=>th),multi:!0};let th=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(fs(_a),fs(ga))},t.\u0275dir=ye({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&Es("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[ha([Jl])]}),t})();const eh={provide:xl,useExisting:Et(()=>rh),multi:!0};let nh=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),rh=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Ml),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return t.\u0275fac=function(e){return new(e||t)(fs(_a),fs(ga),fs(nh),fs(es))},t.\u0275dir=ye({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&Es("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[ha([eh])]}),t})();const ih={provide:xl,useExisting:Et(()=>oh),multi:!0};let oh=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(fs(_a),fs(ga))},t.\u0275dir=ye({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&Es("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[ha([ih])]}),t})();const sh='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',ah='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });';class uh{static controlParentException(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+sh)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${ah}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        \n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>`)}static missingFormException(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+sh)}static groupParentException(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+ah)}static arrayParentException(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n\n      Example:\n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}.\n    Support for using the ngModel input property and ngModelChange event with\n    reactive form directives has been deprecated in Angular v6 and will be removed\n    in a future version of Angular.\n\n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}const ch={provide:xl,useExisting:Et(()=>lh),multi:!0};let lh=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(fs(_a),fs(ga))},t.\u0275dir=ye({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&Es("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[ha([ch])]}),t})();const hh={provide:xl,useExisting:Et(()=>fh),multi:!0};let fh=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(fs(_a),fs(ga))},t.\u0275dir=ye({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&Es("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[ha([hh])]}),t})();function dh(t,e){return[...e.path,t]}function ph(t,e){t||vh(e,"Cannot find control with"),e.valueAccessor||vh(e,"No value accessor for form control with"),t.validator=Ql.compose([t.validator,e.validator]),t.asyncValidator=Ql.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&gh(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&gh(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function gh(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function yh(t,e){null==t&&vh(e,"Cannot find control with"),t.validator=Ql.compose([t.validator,e.validator]),t.asyncValidator=Ql.composeAsync([t.asyncValidator,e.asyncValidator])}function mh(t){return vh(t,"There is no FormControl instance attached to form control element with")}function vh(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function _h(t){return null!=t?Ql.compose(Zl(t)):null}function bh(t){return null!=t?Ql.composeAsync(Zl(t)):null}const wh=[kl,oh,th,lh,fh,rh];function Eh(t){const e=Sh(t)?t.validators:t;return Array.isArray(e)?_h(e):e||null}function Ch(t,e){const n=Sh(e)?e.asyncValidators:t;return Array.isArray(n)?bh(n):n||null}function Sh(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Th{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=Eh(t)}setAsyncValidators(t){this.asyncValidator=Ch(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING";const e=Kl(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Ih?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof xh&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new ou,this.statusChanges=new ou}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Sh(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Oh extends Th{constructor(t=null,e,n){super(Eh(e),Ch(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Ih extends Th{constructor(t,e,n){super(Eh(e),Ch(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Oh?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class xh extends Th{constructor(t,e,n){super(Eh(e),Ch(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Oh?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let Ah=(()=>{class t extends jl{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return dh(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return _h(this._validators)}get asyncValidator(){return bh(this._asyncValidators)}_checkParentType(){}}return t.\u0275fac=function(e){return kh(e||t)},t.\u0275dir=ye({type:t,features:[Js]}),t})();const kh=sr(Ah);let Nh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const Ph=new Ft("NgModelWithFormControlWarning"),Rh={provide:jl,useExisting:Et(()=>Dh)};let Dh=(()=>{class t extends jl{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new ou}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return ph(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){!function(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);yh(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);yh(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>mh(e)),e.valueAccessor.registerOnTouched(()=>mh(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&ph(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=_h(this._validators);this.form.validator=Ql.compose([this.form.validator,t]);const e=bh(this._asyncValidators);this.form.asyncValidator=Ql.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||uh.missingFormException()}}return t.\u0275fac=function(e){return new(e||t)(fs(zl,10),fs(Wl,10))},t.\u0275dir=ye({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&Es("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ha([Rh]),Js,xe]}),t})();const jh={provide:jl,useExisting:Et(()=>Lh)};let Lh=(()=>{class t extends Ah{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){Uh(this._parent)&&uh.groupParentException()}}return t.\u0275fac=function(e){return new(e||t)(fs(jl,13),fs(zl,10),fs(Wl,10))},t.\u0275dir=ye({type:t,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[ha([jh]),Js]}),t})();const Fh={provide:jl,useExisting:Et(()=>Mh)};let Mh=(()=>{class t extends jl{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return dh(null==this.name?this.name:this.name.toString(),this._parent)}get validator(){return _h(this._validators)}get asyncValidator(){return bh(this._asyncValidators)}_checkParentType(){Uh(this._parent)&&uh.arrayParentException()}}return t.\u0275fac=function(e){return new(e||t)(fs(jl,13),fs(zl,10),fs(Wl,10))},t.\u0275dir=ye({type:t,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[ha([Fh]),Js]}),t})();function Uh(t){return!(t instanceof Lh||t instanceof Dh||t instanceof Mh)}const Vh={provide:Ml,useExisting:Et(()=>qh)};let qh=(()=>{class t extends Ml{constructor(t,e,n,r,i){super(),this._ngModelWarningConfig=i,this._added=!1,this.update=new ou,this._ngModelWarningSent=!1,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e)||vh(t,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return e.forEach(e=>{var o;e.constructor===Rl?n=e:(o=e,wh.some(t=>o.constructor===t)?(r&&vh(t,"More than one built-in value accessor matches form control with"),r=e):(i&&vh(t,"More than one custom value accessor matches form control with"),i=e))}),i||r||n||(vh(t,"No valid value accessor for form control with"),null)}(this,r)}set isDisabled(t){uh.disabledAttrWarning()}ngOnChanges(e){var n,r,i;this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(e,this.viewModel)&&(n=t,r=this,i=this._ngModelWarningConfig,Er()&&"never"!==i&&((null!==i&&"once"!==i||n._ngModelWarningSentOnce)&&("always"!==i||r._ngModelWarningSent)||(uh.ngModelWarning("formControlName"),n._ngModelWarningSentOnce=!0,r._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return dh(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return _h(this._rawValidators)}get asyncValidator(){return bh(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof Lh)&&this._parent instanceof Ah?uh.ngModelGroupException():this._parent instanceof Lh||this._parent instanceof Dh||this._parent instanceof Mh||uh.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(fs(jl,13),fs(zl,10),fs(Wl,10),fs(xl,10),fs(Ph,8))},t.\u0275dir=ye({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[ha([Vh]),Js,xe]}),t._ngModelWarningSentOnce=!1,t})();const Bh={provide:zl,useExisting:Et(()=>Hh),multi:!0};let Hh=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&""+t!="false",this._onChange&&this._onChange()}validate(t){return this.required?Ql.required(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&cs("required",e.required?"":null)},inputs:{required:"required"},features:[ha([Bh])]}),t})(),zh=(()=>{class t{}return t.\u0275mod=pe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)}}),t})(),Wh=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new Ih(n,{asyncValidators:i,updateOn:o,validators:r})}control(t,e,n){return new Oh(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new xh(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Oh||t instanceof Ih||t instanceof xh?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),Gh=(()=>{class t{}return t.\u0275mod=pe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[nh],imports:[zh]}),t})(),Qh=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Ph,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=pe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[Wh,nh],imports:[zh]}),t})();function $h(...t){let e=t[t.length-1];return T(e)?(t.pop(),M(t,e)):z(t)}class Kh extends C{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new b;return this._value}next(t){super.next(this._value=t)}}const Yh=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),Xh={};class Zh{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Jh(t,this.resultSelector))}}class Jh extends D{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Xh),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(R(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,i){const o=this.values,s=this.toRespond?o[n]===Xh?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const tf=new v(t=>t.complete());function ef(t){return t?function(t){return new v(e=>t.schedule(()=>e.complete()))}(t):tf}function nf(t){return new v(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?U(n):ef()).subscribe(e)})}function rf(){return H(1)}function of(t,e){return function(n){return n.lift(new sf(t,e))}}class sf{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new af(t,this.predicate,this.thisArg))}}class af extends p{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const uf=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function cf(t){return function(e){return 0===t?ef():e.lift(new lf(t))}}class lf{constructor(t){if(this.total=t,this.total<0)throw new uf}call(t,e){return e.subscribe(new hf(t,this.total))}}class hf extends p{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function ff(t=gf){return e=>e.lift(new df(t))}class df{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new pf(t,this.errorFactory))}}class pf extends p{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function gf(){return new Yh}function yf(t=null){return e=>e.lift(new mf(t))}class mf{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new vf(t,this.defaultValue))}}class vf extends p{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function _f(t){return function(e){const n=new bf(t),r=e.lift(n);return n.caught=r}}class bf{constructor(t){this.selector=t}call(t,e){return e.subscribe(new wf(t,this.selector,this.caught))}}class wf extends D{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new O(this,void 0,void 0);this.add(r);const i=R(this,n,void 0,void 0,r);i!==r&&this.add(i)}}}function Ef(t){return e=>0===t?ef():e.lift(new Cf(t))}class Cf{constructor(t){if(this.total=t,this.total<0)throw new uf}call(t,e){return e.subscribe(new Sf(t,this.total))}}class Sf extends p{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Tf(t,e){const n=arguments.length>=2;return r=>r.pipe(t?of((e,n)=>t(e,n,r)):m,Ef(1),n?yf(e):ff(()=>new Yh))}function Of(){}function If(t,e,n){return function(r){return r.lift(new xf(t,e,n))}}class xf{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new Af(t,this.nextOrObserver,this.error,this.complete))}}class Af extends p{constructor(t,e,n,i){super(t),this._tapNext=Of,this._tapError=Of,this._tapComplete=Of,this._tapError=n||Of,this._tapComplete=i||Of,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||Of,this._tapError=e.error||Of,this._tapComplete=e.complete||Of)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class kf{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new Nf(t,this.predicate,this.thisArg,this.source))}}class Nf extends p{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Pf(t,e){return"function"==typeof e?n=>n.pipe(Pf((n,r)=>U(t(n,r)).pipe(j((t,i)=>e(n,t,r,i))))):e=>e.lift(new Rf(t))}class Rf{constructor(t){this.project=t}call(t,e){return e.subscribe(new Df(t,this.project))}}class Df extends D{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new O(this,e,n),o=this.destination;o.add(i),this.innerSubscription=R(this,t,void 0,void 0,i),this.innerSubscription!==i&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}function jf(...t){return rf()($h(...t))}function Lf(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Ff(t,e,n))}}class Ff{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Mf(t,this.accumulator,this.seed,this.hasSeed))}}class Mf extends p{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Uf(t,e){return V(t,e,1)}class Vf{constructor(t){this.callback=t}call(t,e){return e.subscribe(new qf(t,this.callback))}}class qf extends p{constructor(t,e){super(t),this.add(new h(e))}}class Bf{constructor(t,e){this.id=t,this.url=e}}class Hf extends Bf{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zf extends Bf{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Wf extends Bf{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Gf extends Bf{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Qf extends Bf{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $f extends Bf{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kf extends Bf{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Yf extends Bf{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xf extends Bf{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zf{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Jf{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class td{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ed{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nd{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rd{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class id{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class od{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function sd(t){return new od(t)}function ad(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function ud(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function cd(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!ld(t[i],e[i]))return!1;return!0}function ld(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every(t=>e.indexOf(t)>-1):t===e}function hd(t){return Array.prototype.concat.apply([],t)}function fd(t){return t.length>0?t[t.length-1]:null}function dd(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function pd(t){return ws(t)?t:bs(t)?U(Promise.resolve(t)):$h(t)}function gd(t,e,n){return n?function(t,e){return cd(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!_d(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>ld(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!_d(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!_d(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!_d(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,o)}}(e,n,n.segments)}(t.root,e.root)}class yd{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sd(this.queryParams)),this._queryParamMap}toString(){return Cd.serialize(this)}}class md{constructor(t,e){this.segments=t,this.children=e,this.parent=null,dd(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sd(this)}}class vd{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=sd(this.parameters)),this._parameterMap}toString(){return kd(this)}}function _d(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function bd(t,e){let n=[];return dd(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),dd(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}class wd{}class Ed{parse(t){const e=new jd(t);return new yd(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return Sd(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return dd(e.children,(e,n)=>{"primary"!==n&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=bd(e,(n,r)=>"primary"===r?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return`${Sd(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Od(e)}=${Od(t)}`).join("&"):`${Od(e)}=${Od(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const Cd=new Ed;function Sd(t){return t.segments.map(t=>kd(t)).join("/")}function Td(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Od(t){return Td(t).replace(/%3B/gi,";")}function Id(t){return Td(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xd(t){return decodeURIComponent(t)}function Ad(t){return xd(t.replace(/\+/g,"%20"))}function kd(t){return`${Id(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Id(t)}=${Id(e[t])}`).join("")}`;var e}const Nd=/^[^\/()?;=#]+/;function Pd(t){const e=t.match(Nd);return e?e[0]:""}const Rd=/^[^=?&#]+/,Dd=/^[^?&#]+/;class jd{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new md([],{}):new md([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new md(t,e)),n}parseSegment(){const t=Pd(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new vd(xd(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Pd(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Pd(this.remaining);t&&(n=t,this.capture(n))}t[xd(e)]=xd(n)}parseQueryParam(t){const e=function(t){const e=t.match(Rd);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Dd);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Ad(e),i=Ad(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Pd(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new md([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Ld{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Fd(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Fd(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Md(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Md(t,this._root).map(t=>t.value)}}function Fd(t,e){if(t===e.value)return e;for(const n of e.children){const e=Fd(t,n);if(e)return e}return null}function Md(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Md(t,n);if(r.length)return r.unshift(e),r}return[]}class Ud{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Vd(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class qd extends Ld{constructor(t,e){super(t),this.snapshot=e,Qd(this,t)}toString(){return this.snapshot.toString()}}function Bd(t,e){const n=function(t,e){const n=new Wd([],{},{},"",{},"primary",e,null,t.root,-1,{});return new Gd("",new Ud(n,[]))}(t,e),r=new Kh([new vd("",{})]),i=new Kh({}),o=new Kh({}),s=new Kh({}),a=new Kh(""),u=new Hd(r,i,s,a,o,"primary",e,n.root);return u.snapshot=n.root,new qd(new Ud(u,[]),n)}class Hd{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(j(t=>sd(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(j(t=>sd(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zd(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Wd{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gd extends Ld{constructor(t,e){super(e),this.url=t,Qd(this,e)}toString(){return $d(this._root)}}function Qd(t,e){e.value._routerState=t,e.children.forEach(e=>Qd(t,e))}function $d(t){const e=t.children.length>0?` { ${t.children.map($d).join(", ")} } `:"";return`${t.value}${e}`}function Kd(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,cd(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),cd(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!cd(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),cd(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Yd(t,e){var n,r;return cd(t.params,e.params)&&_d(n=t.url,r=e.url)&&n.every((t,e)=>cd(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Yd(t.parent,e.parent))}function Xd(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Zd(t,e,n,r,i){let o={};return r&&dd(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new yd(n.root===t?e:function t(e,n,r){const i={};return dd(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new md(e.segments,i)}(n.root,t,e),o,i)}class Jd{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Xd(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==fd(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tp{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function ep(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function np(t,e,n){if(t||(t=new md([],{})),0===t.segments.length&&t.hasChildren())return rp(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=ep(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!ap(s,a,e))return o;r+=2}else{if(!ap(s,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new md(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new md(t.segments.slice(r.pathIndex),t.children),rp(e,0,i)}return r.match&&0===i.length?new md(t.segments,{}):r.match&&!t.hasChildren()?ip(t,e,n):r.match?rp(t,0,i):ip(t,e,n)}function rp(t,e,n){if(0===n.length)return new md(t.segments,{});{const r=function(t){return"object"==typeof t[0]&&null!==t[0]&&t[0].outlets?t[0].outlets:{primary:t}}(n),i={};return dd(r,(n,r)=>{null!==n&&(i[r]=np(t.children[r],e,n))}),dd(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new md(t.segments,i)}}function ip(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&null!==n[i]&&void 0!==n[i].outlets){const t=op(n[i].outlets);return new md(r,t)}if(0===i&&Xd(n[0])){r.push(new vd(t.segments[e].path,n[0])),i++;continue}const o=ep(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&Xd(s)?(r.push(new vd(o,sp(s))),i+=2):(r.push(new vd(o,{})),i++)}return new md(r,{})}function op(t){const e={};return dd(t,(t,n)=>{null!==t&&(e[n]=ip(new md([],{}),0,t))}),e}function sp(t){const e={};return dd(t,(t,n)=>e[n]=""+t),e}function ap(t,e,n){return t==n.path&&cd(e,n.parameters)}class up{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Kd(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Vd(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),dd(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=Vd(t),i=t.value.component?n.children:e;dd(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=Vd(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new rd(t.value.snapshot))}),t.children.length&&this.forwardEvent(new ed(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Kd(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),cp(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function cp(t){Kd(t.value),t.children.forEach(cp)}class lp{constructor(t,e){this.routes=t,this.module=e}}function hp(t){return"function"==typeof t}function fp(t){return t instanceof yd}class dp{constructor(t){this.segmentGroup=t||null}}class pp{constructor(t){this.urlTree=t}}function gp(t){return new v(e=>e.error(new dp(t)))}function yp(t){return new v(e=>e.error(new pp(t)))}function mp(t){return new v(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class vp{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(Xt)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(j(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(_f(t=>{if(t instanceof pp)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof dp)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(j(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(_f(t=>{if(t instanceof dp)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new md([],{primary:t}):t;return new yd(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(j(t=>new md([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return $h({});const n=[],r=[],i={};return dd(t,(t,o)=>{const s=e(o,t).pipe(j(t=>i[o]=t));"primary"===o?n.push(s):r.push(s)}),$h.apply(null,n.concat(r)).pipe(rf(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?of((e,n)=>t(e,n,r)):m,cf(1),n?yf(e):ff(()=>new Yh))}(),j(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){return $h(...n).pipe(j(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(_f(t=>{if(t instanceof dp)return $h(null);throw t}))),rf(),Tf(t=>!!t),_f((t,n)=>{if(t instanceof Yh||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return $h(new md([],{}));throw new dp(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Ep(r)!==o?gp(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):gp(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?yp(i):this.lineralizeSegments(n,i).pipe(V(n=>{const i=new md(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=_p(e,r,i);if(!s)return gp(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?yp(l):this.lineralizeSegments(r,l).pipe(V(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(j(t=>(n._loadedConfig=t,new md(r,{})))):$h(new md(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=_p(e,n,r);if(!i)return gp(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(V(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>wp(t,e,n)&&"primary"!==Ep(n))}(t,n,r)?{segmentGroup:bp(new md(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&"primary"!==Ep(r)&&(n[Ep(r)]=new md([],{}));return n}(r,new md(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>wp(t,e,n))}(t,n,r)?{segmentGroup:bp(new md(t.segments,function(t,e,n,r){const i={};for(const o of n)wp(t,e,o)&&!r[Ep(o)]&&(i[Ep(o)]=new md([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(j(t=>new md(o,t))):0===r.length&&0===s.length?$h(new md(o,{})):this.expandSegment(n,i,r,s,"primary",!0).pipe(j(t=>new md(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?$h(new lp(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?$h(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(V(n=>n?this.configLoader.load(t.injector,e).pipe(j(t=>(e._loadedConfig=t,t))):function(t){return new v(e=>e.error(ad(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):$h(new lp([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?U(r).pipe(j(r=>{const i=t.get(r);let o;if(function(t){return t&&hp(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!hp(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return pd(o)})).pipe(rf(),If(t=>{if(!fp(t))return;const e=ad(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(i=t=>!0===t,t=>t.lift(new kf(i,void 0,t)))):$h(!0);var i}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return $h(n);if(r.numberOfChildren>1||!r.children.primary)return mp(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new yd(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return dd(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return dd(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new md(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function _p(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||ud)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function bp(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new md(t.segments.concat(e.segments),e.children)}return t}function wp(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Ep(t){return t.outlet||"primary"}class Cp{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Sp{constructor(t,e){this.component=t,this.route=e}}function Tp(t,e,n){const r=t._root;return function t(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=Vd(n);return e.children.forEach(e=>{!function(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!_d(t.url,e.url);case"pathParamsOrQueryParamsChange":return!_d(t.url,e.url)||!cd(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yd(t,e)||!cd(t.queryParams,e.queryParams);case"paramsChange":default:return!Yd(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Cp(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?u?u.children:null:r,i,o),c&&o.canDeactivateChecks.push(new Sp(u&&u.outlet&&u.outlet.component||null,a))}else a&&Ip(n,u,o),o.canActivateChecks.push(new Cp(i)),t(e,null,s.component?u?u.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]}),dd(s,(t,e)=>Ip(t,r.getContext(e),o)),o}(r,e?e._root:null,n,[r.value])}function Op(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Ip(t,e,n){const r=Vd(t),i=t.value;dd(r,(t,r)=>{Ip(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Sp(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}const xp=Symbol("INITIAL_VALUE");function Ap(){return Pf(t=>function(...t){let e=null,n=null;return T(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),z(t,n).lift(new Zh(e))}(...t.map(t=>t.pipe(Ef(1),function(...t){const e=t[t.length-1];return T(e)?(t.pop(),n=>jf(t,n,e)):e=>jf(t,e)}(xp)))).pipe(Lf((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==xp)return t;if(r===xp&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||fp(r))return r}return t},t)},xp),of(t=>t!==xp),j(t=>fp(t)?t:!0===t),Ef(1)))}function kp(t,e){return null!==t&&e&&e(new nd(t)),$h(!0)}function Np(t,e){return null!==t&&e&&e(new td(t)),$h(!0)}function Pp(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?$h(r.map(r=>nf(()=>{const i=Op(r,e,n);let o;if(function(t){return t&&hp(t.canActivate)}(i))o=pd(i.canActivate(e,t));else{if(!hp(i))throw new Error("Invalid CanActivate guard");o=pd(i(e,t))}return o.pipe(Tf())}))).pipe(Ap()):$h(!0)}function Rp(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>nf(()=>$h(e.guards.map(i=>{const o=Op(i,e.node,n);let s;if(function(t){return t&&hp(t.canActivateChild)}(o))s=pd(o.canActivateChild(r,t));else{if(!hp(o))throw new Error("Invalid CanActivateChild guard");s=pd(o(r,t))}return s.pipe(Tf())})).pipe(Ap())));return $h(i).pipe(Ap())}class Dp{}class jp{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=Mp(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new Wd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ud(n,e),i=new Gd(this.url,r);return this.inheritParamsAndData(i._root),$h(i)}catch(t){return new v(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=zd(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=bd(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const o of t)try{return this.processSegmentAgainstRoute(o,e,n,r)}catch(i){if(!(i instanceof Dp))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new Dp}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Dp;if((t.outlet||"primary")!==r)throw new Dp;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?fd(n).parameters:{};i=new Wd(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qp(t),r,t.component,t,Lp(e),Fp(e)+n.length,Bp(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Dp;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||ud)(n,t,e);if(!r)throw new Dp;const i={};dd(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new Wd(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qp(t),r,t.component,t,Lp(e),Fp(e)+o.length,Bp(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Mp(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new Ud(i,t)]}if(0===a.length&&0===c.length)return[new Ud(i,[])];const l=this.processSegment(a,u,c,"primary");return[new Ud(i,l)]}}function Lp(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Fp(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Mp(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>Up(t,e,n)&&"primary"!==Vp(n))}(t,n,r)){const i=new md(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&"primary"!==Vp(o)){const n=new md([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Vp(o)]=n}return i}(t,e,r,new md(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Up(t,e,n))}(t,n,r)){const o=new md(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Up(t,n,a)&&!i[Vp(a)]){const n=new md([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Vp(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new md(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Up(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Vp(t){return t.outlet||"primary"}function qp(t){return t.data||{}}function Bp(t){return t.resolve||{}}function Hp(t){return function(e){return e.pipe(Pf(e=>{const n=t(e);return n?U(n).pipe(j(()=>e)):U([e])}))}}class zp{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let Wp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=le({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&vs(0,"router-outlet")},directives:function(){return[cg]},encapsulation:2}),t})();function Gp(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Qp(r,$p(e,r))}}function Qp(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&Gp(t.children,e)}function $p(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Kp(t){const e=t.children&&t.children.map(Kp),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Wp),n}const Yp=new Ft("ROUTES");class Xp{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(j(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new lp(hd(r.injector.get(Yp)).map(Kp),r)}))}loadModuleFactory(t){return"string"==typeof t?U(this.loader.load(t)):pd(t()).pipe(V(t=>t instanceof Zt?$h(t):U(this.compiler.compileModuleAsync(t))))}}class Zp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Jp,this.attachRef=null}}class Jp{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Zp,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class tg{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function eg(t){throw t}function ng(t,e,n){return e.parse("/")}function rg(t,e){return $h(null)}let ig=(()=>{class t{constructor(t,e,n,r,i,o,s,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new C,this.errorHandler=eg,this.malformedUriErrorHandler=ng,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:rg,afterPreactivation:rg},this.urlHandlingStrategy=new tg,this.routeReuseStrategy=new zp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(Xt),this.console=i.get(xu);const u=i.get(qu);this.isNgZoneEnabled=u instanceof qu,this.resetConfig(a),this.currentUrlTree=new yd(new md([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Xp(o,s,t=>this.triggerEvent(new Zf(t)),t=>this.triggerEvent(new Jf(t))),this.routerState=Bd(this.currentUrlTree,this.rootComponentType),this.transitions=new Kh({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(of(t=>0!==t.id),j(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Pf(t=>{let n=!1,r=!1;return $h(t).pipe(If(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Pf(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return $h(t).pipe(Pf(t=>{const n=this.transitions.getValue();return e.next(new Hf(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?tf:[t]}),Pf(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(Pf(t=>function(t,e,n,r,i){return new vp(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(j(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),If(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(V(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new jp(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(j(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),If(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),If(t=>{const n=new Qf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Hf(n,this.serializeUrl(r),i,o);e.next(a);const u=Bd(r,this.rootComponentType).snapshot;return $h(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),tf}),Hp(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),If(t=>{const e=new $f(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),j(t=>Object.assign(Object.assign({},t),{guards:Tp(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(V(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?$h(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return U(t).pipe(V(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?$h(o.map(o=>{const s=Op(o,e,i);let a;if(function(t){return t&&hp(t.canDeactivate)}(s))a=pd(s.canDeactivate(t,e,n,r));else{if(!hp(s))throw new Error("Invalid CanDeactivate guard");a=pd(s(t,e,n,r))}return a.pipe(Tf())})).pipe(Ap()):$h(!0)}(t.component,t.route,n,e,r)),Tf(t=>!0!==t,!0))}(s,r,i,t).pipe(V(n=>n&&"boolean"==typeof n?function(t,e,n,r){return U(e).pipe(Uf(e=>U([Np(e.route.parent,r),kp(e.route,r),Rp(t,e.path,n),Pp(t,e.route,n)]).pipe(rf(),Tf(t=>!0!==t,!0))),Tf(t=>!0!==t,!0))}(r,o,t,e):$h(n)),j(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),If(t=>{if(fp(t.guardsResult)){const e=ad(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),If(t=>{const e=new Kf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),of(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Wf(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Hp(t=>{if(t.guards.canActivateChecks.length)return $h(t).pipe(If(t=>{const e=new Yf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Pf(t=>{let n=!1;return $h(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(V(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return $h(t);let o=0;return U(n).pipe(Uf(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return $h({});const o={};return U(i).pipe(V(i=>function(t,e,n,r){const i=Op(t,e,r);return pd(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(If(t=>{o[i]=t}))),cf(1),V(()=>Object.keys(o).length===i.length?$h(o):tf))}(t._resolve,t,e,r).pipe(j(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),zd(t,n).resolve),null)))}(t.route,e,r,i)),If(()=>o++),cf(1),V(e=>o===n.length?$h(t):tf))}))}),If({next:()=>n=!0,complete:()=>{if(!n){const n=new Wf(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),If(t=>{const e=new Xf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Hp(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),j(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new Ud(i,o)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new Hd(new Kh((i=n.value).url),new Kh(i.params),new Kh(i.queryParams),new Kh(i.fragment),new Kh(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new Ud(r,o)}}var i}(t,e._root,n?n._root:void 0);return new qd(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),If(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),j(t=>(new up(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),If({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Wf(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Vf(i))),_f(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=fp(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Wf(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Gf(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var i;return tf}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Gp(t),this.config=t.map(Kp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,preserveQueryParams:o,queryParamsHandling:s,preserveFragment:a}=e;Er()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const u=n||this.routerState.root,c=a?this.currentUrlTree.fragment:i;let l=null;if(s)switch(s){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}else l=o?this.currentUrlTree.queryParams:r||null;return null!==l&&(l=this.removeEmptyProps(l)),function(t,e,n,r,i){if(0===n.length)return Zd(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Jd(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return dd(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Jd(n,e,r)}(n);if(o.toRoot())return Zd(e.root,new md([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new tp(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new tp(t,t===e.root,0)}const r=Xd(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new tp(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?rp(s.segmentGroup,s.index,o.commands):np(s.segmentGroup,s.index,o.commands);return Zd(s.segmentGroup,a,e,r,i)}(u,this.currentUrlTree,t,l,c)}navigateByUrl(t,e={skipLocationChange:!1}){Er()&&this.isNgZoneEnabled&&!qu.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=fp(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(fp(t))return gd(this.currentUrlTree,t,e);const n=this.parseUrl(t);return gd(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new zf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition();if(o&&"imperative"!==e&&"imperative"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"hashchange"==e&&"popstate"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"popstate"==e&&"hashchange"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);let s,a,u;i?(s=i.resolve,a=i.reject,u=i.promise):u=new Promise((t,e)=>{s=t,a=e});const c=++this.navigationId;return this.setTransition({id:c,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:s,reject:a,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(Qt(Vo),Qt(wd),Qt(Jp),Qt(Dc),Qt(es),Qt(uc),Qt(Mu),Qt(void 0))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),og=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new C,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Er()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:ag(this.skipLocationChange),replaceUrl:ag(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:ag(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:ag(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(fs(ig),fs(Hd),ds("tabindex"),fs(_a),fs(ga))},t.\u0275dir=ye({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&Es("click",(function(){return e.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[xe]}),t})(),sg=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new C,this.subscription=t.events.subscribe(t=>{t instanceof zf&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Er()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:ag(this.skipLocationChange),replaceUrl:ag(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:ag(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:ag(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(fs(ig),fs(Hd),fs(Ac))},t.\u0275dir=ye({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&Es("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)})),2&t&&(Ys("href",e.href,$r),cs("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[xe]}),t})();function ag(t){return""===t||!!t}let ug=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof zf&&this.update()})}ngAfterContentInit(){U([this.links.changes,this.linksWithHrefs.changes,$h(null)]).pipe(H()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=U(e).pipe(H()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(fs(ig),fs(ga),fs(_a),fs(Mo),fs(og,8),fs(sg,8))},t.\u0275dir=ye({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){var r;1&t&&(mu(n,og,!0),mu(n,sg,!0)),2&t&&(yu(r=vu())&&(e.links=r),yu(r=vu())&&(e.linksWithHrefs=r))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[xe]}),t})(),cg=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new ou,this.deactivateEvents=new ou,this.name=r||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new lg(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(fs(Jp),fs(qa),fs(pa),ds("name"),fs(Mo))},t.\u0275dir=ye({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class lg{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Hd?this.route:t===Jp?this.childContexts:this.parent.get(t,e)}}class hg{}class fg{preload(t,e){return $h(null)}}let dg=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Xp(e,n,e=>t.triggerEvent(new Zf(e)),e=>t.triggerEvent(new Jf(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(of(t=>t instanceof zf),Uf(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Xt);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return U(n).pipe(H(),j(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(V(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Qt(ig),Qt(uc),Qt(Mu),Qt(es),Qt(hg))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),pg=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof zf&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof id&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new id(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Qt(ig),Qt($c),Qt(void 0))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const gg=new Ft("ROUTER_CONFIGURATION"),yg=new Ft("ROUTER_FORROOT_GUARD"),mg=[Dc,{provide:wd,useClass:Ed},{provide:ig,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const l=new ig(null,t,e,n,r,i,o,hd(s));if(u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),a.errorHandler&&(l.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(l.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const t=vc();l.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return a.onSameUrlNavigation&&(l.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(l.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(l.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(l.relativeLinkResolution=a.relativeLinkResolution),l},deps:[wd,Jp,Dc,es,uc,Mu,Yp,gg,[class{},new rt],[class{},new rt]]},Jp,{provide:Hd,useFactory:function(t){return t.routerState.root},deps:[ig]},{provide:uc,useClass:hc},dg,fg,class{preload(t,e){return e().pipe(_f(()=>$h(null)))}},{provide:gg,useValue:{enableTracing:!1}}];function vg(){return new ec("Router",ig)}let _g=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[mg,Cg(e),{provide:yg,useFactory:Eg,deps:[[ig,new rt,new ot]]},{provide:gg,useValue:n||{}},{provide:Ac,useFactory:wg,deps:[bc,[new nt(Nc),new rt],gg]},{provide:pg,useFactory:bg,deps:[ig,$c,gg]},{provide:hg,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:fg},{provide:ec,multi:!0,useFactory:vg},[Sg,{provide:bu,multi:!0,useFactory:Tg,deps:[Sg]},{provide:Ig,useFactory:Og,deps:[Sg]},{provide:Iu,multi:!0,useExisting:Ig}]]}}static forChild(e){return{ngModule:t,providers:[Cg(e)]}}}return t.\u0275mod=pe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)(Qt(yg,8),Qt(ig,8))}}),t})();function bg(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new pg(t,e,n)}function wg(t,e,n={}){return n.useHash?new Rc(t,e):new Pc(t,e)}function Eg(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Cg(t){return[{provide:ns,multi:!0,useValue:t},{provide:Yp,multi:!0,useValue:t}]}let Sg=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new C}appInitializer(){return this.injector.get(Ec,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(ig),r=this.injector.get(gg);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?$h(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(gg),n=this.injector.get(dg),r=this.injector.get(pg),i=this.injector.get(ig),o=this.injector.get(sc);t===o.components[0]&&(this.isLegacyEnabled(e)?i.initialNavigation():this.isLegacyDisabled(e)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(Qt(es))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function Tg(t){return t.appInitializer.bind(t)}function Og(t){return t.bootstrapListener.bind(t)}const Ig=new Ft("Router Initializer");class xg{}class Ag extends h{constructor(t,e){super()}schedule(t,e=0){return this}}class kg extends Ag{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let Ng=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class Pg extends Ng{constructor(t,e=Ng.now){super(t,()=>Pg.delegate&&Pg.delegate!==this?Pg.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return Pg.delegate&&Pg.delegate!==this?Pg.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const Rg=new Pg(kg);class Dg{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new jg(t,this.compare,this.keySelector))}}class jg extends p{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class Lg{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Fg(t,this.observables,this.project))}}class Fg extends D{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++){let t=e[i];this.add(R(this,t,t,i))}}notifyNext(t,e,n,r,i){this.values[n]=e;const o=this.toRespond;if(o.length>0){const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Mg{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Ug(t,this.predicate))}}class Ug extends p{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}class Vg extends kg{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}class qg extends Pg{}const Bg=new qg(Vg);let Hg=1;const zg=(()=>Promise.resolve())(),Wg={};function Gg(t){return t in Wg&&(delete Wg[t],!0)}const Qg={setImmediate(t){const e=Hg++;return Wg[e]=!0,zg.then(()=>Gg(e)&&t()),e},clearImmediate(t){Gg(t)}};class $g extends kg{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=Qg.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(Qg.clearImmediate(e),t.scheduled=void 0)}}class Kg extends Pg{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const Yg=new Kg($g);class Xg extends v{constructor(t,e=0,n=Yg){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,(u(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=Yg)}static create(t,e=0,n=Yg){return new Xg(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(Xg.dispatch,this.delayTime,{source:this.source,subscriber:t})}}class Zg{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new Xg(e,this.delay,this.scheduler).subscribe(t)}}let Jg=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return $h(this.value);case"E":return t=this.error,new v(e=>e.error(t));case"C":return ef()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function ty(t,e=0){return function(n){return n.lift(new ey(t,e))}}class ey{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new ny(t,this.scheduler,this.delay))}}class ny extends p{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(ny.dispatch,this.delay,new ry(t,this.destination)))}_next(t){this.scheduleMessage(Jg.createNext(t))}_error(t){this.scheduleMessage(Jg.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(Jg.createComplete()),this.unsubscribe()}}class ry{constructor(t,e){this.notification=t,this.destination=e}}var iy=n("zIRd");function oy(){}iy.a.registerVersion("firebase","8.0.1","app");class sy{constructor(t,e=Bg){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class ay{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oy,{},oy,oy)),e.pipe(If({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class uy{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new sy(Zone.current)),this.insideAngular=t.run(()=>new sy(Zone.current,Rg))}}function cy(t){return function(e){return(e=e.lift(new ay(t.ngZone))).pipe(function(t,e=0){return function(n){return n.lift(new Zg(t,e))}}(t.outsideAngular),ty(t.insideAngular))}}const ly=["ngOnDestroy"],hy=new Ft("angularfire2.app.options"),fy=new Ft("angularfire2.app.nameOrConfig"),dy=new Ea("6.0.5");function py(t,e,n){const r="object"==typeof n&&n||{};return r.name=r.name||"string"==typeof n&&n||"[DEFAULT]",iy.a.apps.filter(t=>t&&t.name===r.name)[0]||e.runOutsideAngular(()=>iy.a.initializeApp(t,r))}const gy={provide:class{},useFactory:py,deps:[hy,qu,[new rt,fy]]};let yy=(()=>{class t{constructor(t){iy.a.registerVersion("angularfire",dy.full,t.toString()),iy.a.registerVersion("angular",Ca.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:hy,useValue:e},{provide:fy,useValue:n}]}}}return t.\u0275mod=pe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)(Qt(Ou))},providers:[gy]}),t})();var my=n("6Uf2");function vy(t){return null==t}function _y(t){return"function"==typeof t.set}function by(t,e){return _y(e)?e:t.ref(e)}function wy(t,e){if("string"==typeof t)return e.stringCase();if(_y(t))return e.firebaseCase();if(function(t){return"function"==typeof t.exportVal}(t))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function Ey(t,e,n="on",r=Rg){return new v(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(j(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),J())}function Cy(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Sy(t,e){const{payload:n,prevKey:r,key:i}=e,o=Cy(t,i),s=function(t,e){if(vy(e))return 0;{const n=Cy(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function Ty(t){return(vy(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Oy(t,e,n){return function(t,e,n){return Ey(t,"value","once",n).pipe(Pf(r=>{const i=[$h(r)];return e.forEach(e=>i.push(Ey(t,e,"on",n))),W(...i).pipe(Lf(Sy,[]))}),t=>t.lift(new Dg(void 0,void 0)))}(t,e=Ty(e),n)}function Iy(t,e,n){return W(...(e=Ty(e)).map(e=>Ey(t,e,"on",n)))}function xy(t,e){return function(n,r){return wy(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function Ay(t,e){return function(){return Ey(t,"value","on",e)}}const ky=new Ft("angularfire2.realtimeDatabaseURL");let Ny=(()=>{class t{constructor(t,e,n,r,i){this.schedulers=new uy(i),this.keepUnstableUntilFirst=cy(this.schedulers),this.database=i.runOutsideAngular(()=>{const r=py(t,i,e);return my.a&&Object(my.a)(iy.a),r.database(n||void 0)})}list(t,e){const n=by(this.database,t);let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:xy(r,"update"),set:xy(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?wy(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>Oy(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>Iy(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return Ey(t,"value","on",e).pipe(j(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Lg(t,n))}}(e),j(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Mg(r))),j(t=>t.actions));var r}(t,Iy(t,e).pipe(Lf((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:r=>Oy(t,r,n).pipe(j(t=>t.map(t=>t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=by(this.database,t);return r=this,{query:n=e,snapshotChanges:()=>Ay(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Ay(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,j(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.database.ref().push().key}}return t.\u0275fac=function(e){return new(e||t)(Qt(hy),Qt(fy,8),Qt(ky,8),Qt(Ou),Qt(qu))},t.\u0275prov=ct({factory:function(){return new t(Qt(hy),Qt(fy,8),Qt(ky,8),Qt(Ou),Qt(qu))},token:t,providedIn:"any"}),t})(),Py=(()=>{class t{constructor(t){this.db=t}GetCoffee(t){return this.coffeeObject=this.db.object("coffee/"+t),this.coffeeObject}AddCoffee(t){this.listCoffee=this.db.list("/coffee"),this.listCoffee.push({name:t.name,address:t.address,urlQR:t.urlQR,ownerCoffee:t.ownerCoffee,phone:t.phone,email:t.email,createdDate:this.GetCurrentDate(),createdBy:t.createdBy,updatedDate:t.updatedDate,updatedBy:t.updatedBy,status:t.status})}UpdateCoffee(t){this.db.object("/coffee/"+t.$key).update({name:t.name,address:t.address,urlQR:t.urlQR,ownerCoffee:t.ownerCoffee,phone:t.phone,email:t.email,updatedDate:this.GetCurrentDate(),updatedBy:t.updatedBy,status:t.status})}DeleteCoffee(t){this.db.object("/coffee/"+t.$key).remove()}GetListCoffee(){return this.listCoffee=this.db.list("coffee"),this.listCoffee}GetCurrentDate(){var t=new Date,e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+" "+e}}return t.\u0275fac=function(e){return new(e||t)(Qt(Ny))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Ry{}function Dy(t,e){return{type:7,name:t,definitions:e,options:{}}}function jy(t,e=null){return{type:4,styles:e,timings:t}}function Ly(t,e=null){return{type:2,steps:t,options:e}}function Fy(t){return{type:6,styles:t,offset:null}}function My(t,e,n){return{type:0,name:t,styles:e,options:n}}function Uy(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function Vy(t){Promise.resolve(null).then(t)}class qy{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Vy(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class By{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?Vy(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}const Hy=["toast-component",""];function zy(t,e){if(1&t){const t=_s();ys(0,"button",5),Es("click",(function(){return Ze(t),Ts().remove()})),ys(1,"span",6),Qs(2,"\xd7"),ms(),ms()}}function Wy(t,e){if(1&t&&(function(t,e,n){const r=Ye(),i=Xe(),o=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=We(o,void 0),a=Ti(e,n[6],0,4,"ng-container",s);return null!==s&&rs(a,s,!0),Ui(e,n,a,We(o,void 0)),null!==e.queries&&e.queries.elementStart(e,a),a}(0,i,r):i.data[20];tn(o,!0);const s=r[20]=r[11].createComment("");Co(i,r,s,o),Yr(s,r),Se(o)&&(Ni(i,r,o),ki(i,o,r))}(),Qs(1),function(){let t=Je();const e=Xe();en()?nn():(t=t.parent,tn(t,!1)),e.firstCreatePass&&(Cn(e,t),Ee(t)&&e.queries.elementEnd(t))}()),2&t){const t=Ts(2);pi(1),Ks("[",t.duplicatesCount+1,"]")}}function Gy(t,e){if(1&t&&(ys(0,"div"),Qs(1),hs(2,Wy,2,1,"ng-container",4),ms()),2&t){const t=Ts();Ls(t.options.titleClass),cs("aria-label",t.title),pi(1),Ks(" ",t.title," "),pi(1),ps("ngIf",t.duplicatesCount)}}function Qy(t,e){if(1&t&&vs(0,"div",7),2&t){const t=Ts();Ls(t.options.messageClass),ps("innerHTML",t.message,Qr)}}function $y(t,e){if(1&t&&(ys(0,"div",8),Qs(1),ms()),2&t){const t=Ts();Ls(t.options.messageClass),cs("aria-label",t.message),pi(1),Ks(" ",t.message," ")}}function Ky(t,e){if(1&t&&(ys(0,"div"),vs(1,"div",9),ms()),2&t){const t=Ts();pi(1),Ds("width",t.width+"%")}}class Yy{constructor(t,e,n,r,i,o){this.toastId=t,this.config=e,this.message=n,this.title=r,this.toastType=i,this.toastRef=o,this._onTap=new C,this._onAction=new C,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}}const Xy={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},Zy=new Ft("ToastConfig");class Jy{constructor(t,e){this.component=t,this.injector=e}attach(t,e){return this._attachedHost=t,t.attach(this,e)}detach(){const t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class tm extends class{attach(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}}{constructor(t,e,n){super(),this._hostDomElement=t,this._componentFactoryResolver=e,this._appRef=n}attachComponentPortal(t,e){const n=this._componentFactoryResolver.resolveComponentFactory(t.component);let r;return r=n.create(t.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let em=(()=>{class t{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),this._document.body.appendChild(t),this._containerElement=t}}return t.\u0275fac=function(e){return new(e||t)(Qt(_c))},t.\u0275prov=ct({factory:function(){return new t(Qt(_c))},token:t,providedIn:"root"}),t})();class nm{constructor(t){this._portalHost=t}attach(t,e=!0){return this._portalHost.attach(t,e)}detach(){return this._portalHost.detach()}}let rm=(()=>{class t{constructor(t,e,n,r){this._overlayContainer=t,this._componentFactoryResolver=e,this._appRef=n,this._document=r,this._paneElements=new Map}create(t,e){return this._createOverlayRef(this.getPaneElement(t,e))}getPaneElement(t="",e){return this._paneElements.get(e)||this._paneElements.set(e,{}),this._paneElements.get(e)[t]||(this._paneElements.get(e)[t]=this._createPaneElement(t,e)),this._paneElements.get(e)[t]}_createPaneElement(t,e){const n=this._document.createElement("div");return n.id="toast-container",n.classList.add(t),n.classList.add("toast-container"),e?e.getContainerElement().appendChild(n):this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalHost(t){return new tm(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new nm(this._createPortalHost(t))}}return t.\u0275fac=function(e){return new(e||t)(Qt(em),Qt(pa),Qt(sc),Qt(_c))},t.\u0275prov=ct({factory:function(){return new t(Qt(em),Qt(pa),Qt(sc),Qt(_c))},token:t,providedIn:"root"}),t})();class im{constructor(t){this._overlayRef=t,this.duplicatesCount=0,this._afterClosed=new C,this._activate=new C,this._manualClose=new C,this._resetTimeout=new C,this._countDuplicate=new C}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,e){t&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}}class om{constructor(t,e){this._toastPackage=t,this._parentInjector=e}get(t,e,n){return t===Yy?this._toastPackage:this._parentInjector.get(t,e,n)}}let sm=(()=>{class t{constructor(t,e,n,r,i){this.overlay=e,this._injector=n,this.sanitizer=r,this.ngZone=i,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}show(t,e,n={},r=""){return this._preBuildNotification(r,t,e,this.applyConfig(n))}success(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,e,this.applyConfig(n))}error(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,e,this.applyConfig(n))}info(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,e,this.applyConfig(n))}warning(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,e,this.applyConfig(n))}clear(t){for(const e of this.toasts)if(void 0!==t){if(e.toastId===t)return void e.toastRef.manualClose()}else e.toastRef.manualClose()}remove(t){const e=this._findToast(t);if(!e)return!1;if(e.activeToast.toastRef.close(),this.toasts.splice(e.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length)return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const t=this.toasts[this.currentlyActive].toastRef;t.isInactive()||(this.currentlyActive=this.currentlyActive+1,t.activate())}return!0}findDuplicate(t="",e="",n,r){const{includeTitleDuplicates:i}=this.toastrConfig;for(const o of this.toasts){const s=i&&o.title===t;if((!i||s)&&o.message===e)return o.toastRef.onDuplicate(n,r),o}return null}applyConfig(t={}){return Object.assign(Object.assign({},this.toastrConfig),t)}_findToast(t){for(let e=0;e<this.toasts.length;e++)if(this.toasts[e].toastId===t)return{index:e,activeToast:this.toasts[e]};return null}_preBuildNotification(t,e,n,r){return r.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,e,n,r)):this._buildNotification(t,e,n,r)}_buildNotification(t,e,n,r){if(!r.toastComponent)throw new Error("toastComponent required");const i=this.findDuplicate(n,e,this.toastrConfig.resetTimeoutOnDuplicate&&r.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&n||e)&&this.toastrConfig.preventDuplicates&&null!==i)return i;this.previousToastMessage=e;let o=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(o=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const s=this.overlay.create(r.positionClass,this.overlayContainer);this.index=this.index+1;let a=e;e&&r.enableHtml&&(a=this.sanitizer.sanitize(Gr.HTML,e));const u=new im(s),c=new Yy(this.index,r,a,n,t,u),l=new om(c,this._injector),h=new Jy(r.toastComponent,l),f=s.attach(h,this.toastrConfig.newestOnTop);u.componentInstance=f.instance;const d={toastId:this.index,title:n||"",message:e||"",toastRef:u,onShown:u.afterActivate(),onHidden:u.afterClosed(),onTap:c.onTap(),onAction:c.onAction(),portal:f};return o||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{d.toastRef.activate()})),this.toasts.push(d),d}}return t.\u0275fac=function(e){return new(e||t)(Qt(Zy),Qt(rm),Qt(es),Qt(El),Qt(qu))},t.\u0275prov=ct({factory:function(){return new t(Qt(Zy),Qt(rm),Qt(Mt),Qt(El),Qt(qu))},token:t,providedIn:"root"}),t})(),am=(()=>{class t{constructor(t,e,n){this.toastrService=t,this.toastPackage=e,this.ngZone=n,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=e.message,this.title=e.title,this.options=e.config,this.originalTimeout=e.config.timeOut,this.toastClasses=`${e.toastType} ${e.config.toastClass}`,this.sub=e.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=e.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=e.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=e.toastRef.countDuplicate().subscribe(t=>{this.duplicatesCount=t})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0!==this.options.disableTimeOut&&"extendedTimeOut"!==this.options.disableTimeOut&&0!==this.options.extendedTimeOut&&"removed"!==this.state.value&&(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,e){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),e)):this.timeout=setTimeout(()=>t(),e)}outsideInterval(t,e){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),e)):this.intervalId=setInterval(()=>t(),e)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return t.\u0275fac=function(e){return new(e||t)(fs(sm),fs(Yy),fs(qu))},t.\u0275cmp=le({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,e){1&t&&Es("click",(function(){return e.tapToast()}))("mouseenter",(function(){return e.stickAround()}))("mouseleave",(function(){return e.delayedHideToast()})),2&t&&(Xs("@flyInOut",e.state),Ls(e.toastClasses),Ds("display",e.displayStyle))},attrs:Hy,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(t,e){1&t&&(hs(0,zy,3,0,"button",0),hs(1,Gy,3,5,"div",1),hs(2,Qy,1,3,"div",2),hs(3,$y,2,4,"div",3),hs(4,Ky,2,2,"div",4)),2&t&&(ps("ngIf",e.options.closeButton),pi(1),ps("ngIf",e.title),pi(1),ps("ngIf",e.message&&e.options.enableHtml),pi(1),ps("ngIf",e.message&&!e.options.enableHtml),pi(1),ps("ngIf",e.options.progressBar))},directives:[Hc],encapsulation:2,data:{animation:[Dy("flyInOut",[My("inactive",Fy({opacity:0})),My("active",Fy({opacity:1})),My("removed",Fy({opacity:0})),Uy("inactive => active",jy("{{ easeTime }}ms {{ easing }}")),Uy("active => removed",jy("{{ easeTime }}ms {{ easing }}"))])]}}),t})();const um=Object.assign(Object.assign({},Xy),{toastComponent:am});let cm=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[{provide:Zy,useValue:{default:um,config:e}}]}}}return t.\u0275mod=pe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},imports:[[Gc]]}),t})();function lm(t,e){if(1&t){const t=_s();ys(0,"tr",7),Es("click",(function(){Ze(t);const n=e.$implicit;return Ts().SelectCoffee(n)})),ys(1,"td"),Qs(2),ms(),ys(3,"td"),Qs(4),ms(),ys(5,"td"),Qs(6),ms(),ys(7,"td"),Qs(8),ms(),ys(9,"td"),Qs(10),ms(),ys(11,"td"),ys(12,"a",8),Qs(13," Go"),ms(),ms(),ms()}if(2&t){const t=e.$implicit;pi(2),$s(t.name),pi(2),$s(t.address),pi(2),$s(t.ownerCoffee),pi(2),$s(t.phone),pi(2),$s(t.email),pi(2),Os("routerLink","/coffee-seat/",t.$key,"")}}let hm=(()=>{class t{constructor(t,e){this.coffeeService=t,this.toastr=e,this.messageEvent=new ou}ngOnInit(){this.coffeeService.GetListCoffee().snapshotChanges().subscribe(t=>{this.coffees=[],t.forEach(t=>{let e=t.payload.toJSON();e.$key=t.key,this.coffees.unshift(e)})})}SelectCoffee(t){console.log("select coffee:",t),this.SendDataCoffee(t.$key)}SendDataCoffee(t){console.log("groupID = ",t),this.messageEvent.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(fs(Py),fs(sm))},t.\u0275cmp=le({type:t,selectors:[["app-list-coffee"]],outputs:{messageEvent:"messageEvent"},decls:21,vars:1,consts:[[1,"pricing-header","mx-auto"],[1,"panel-heading"],[1,"panel-title","text-center"],[1,"table-responsive"],[1,"table","table-bordered","table-responsive-sm","table-responsive-md","table-responsive-lg"],["scope","col",1,"text-center"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["routerLinkActive","active",1,"nav-link",3,"routerLink"]],template:function(t,e){1&t&&(ys(0,"div",0),ys(1,"div",1),ys(2,"h3",2),Qs(3,"Coffee List"),ms(),ms(),ys(4,"div",3),ys(5,"table",4),ys(6,"thead"),ys(7,"tr"),ys(8,"th",5),Qs(9,"Coffee Name"),ms(),ys(10,"th",5),Qs(11,"Address"),ms(),ys(12,"th",5),Qs(13,"Owner Coffee"),ms(),ys(14,"th",5),Qs(15,"Phone"),ms(),ys(16,"th",5),Qs(17,"Email"),ms(),vs(18,"th"),ms(),ms(),ys(19,"tbody"),hs(20,lm,14,6,"tr",6),ms(),ms(),ms(),ms()),2&t&&(pi(20),ps("ngForOf",e.coffees))},directives:[qc,sg,ug],styles:[""]}),t})();function fm(t,e){if(1&t){const t=_s();ys(0,"button",20),Es("click",(function(){return Ze(t),Ts().updateCoffee()})),Qs(1,"Update"),ms()}}function dm(t,e){1&t&&(ys(0,"button",21),Qs(1,"Add"),ms())}let pm=(()=>{class t{constructor(t,e,n){this.formBuilder=t,this.coffeeService=e,this.toastr=n}ngOnInit(){this.deliverCoffee=new xg,this.coffeeForm=this.formBuilder.group({$key:[""],name:"",address:"",urlQR:"",createdDate:"",createdBy:"",updatedDate:"",updatedBy:"",status:"",ownerCoffee:"",phone:"",email:""}),this.isAdd=!0}getDataCoffee(t){this.isAdd=!1,console.log("$event",t),this.coffeeService.GetCoffee(t).valueChanges().subscribe(e=>{console.warn("coffee",e),e.$key=t,this.coffeeForm.setValue(e)})}submitCoffee(t){this.coffeeService.AddCoffee(t),this.resetForm(),this.toastr.success(this.coffeeForm.controls.name.value+" successfully added!"),this.isAdd=!0}resetForm(){this.coffeeForm.reset(),this.isAdd=!0}updateCoffee(){}}return t.\u0275fac=function(e){return new(e||t)(fs(Wh),fs(Py),fs(sm))},t.\u0275cmp=le({type:t,selectors:[["app-coffee"]],inputs:{deliverCoffee:"deliverCoffee"},decls:51,vars:3,consts:[[1,"row"],[1,"col-sm-6"],[1,"panel-heading"],[1,"panel-title","text-center"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-lg-12","col-md-12","col-sm-12"],["hidden","",1,"row"],[1,"col-md-12","mb-3"],["type","text","formControlName","$key","required","",1,"form-control"],["type","text","formControlName","address","required","",1,"form-control"],["type","text","formControlName","name","required","",1,"form-control"],["type","text","formControlName","urlQR","required","",1,"form-control"],["type","text","formControlName","ownerCoffee","required","",1,"form-control"],["type","text","formControlName","phone","required","",1,"form-control"],["type","email","formControlName","email","required","",1,"form-control"],[1,"form-group","text-right"],["type","button",1,"btn","btn-secondary","gap-right",3,"click"],["class","btn btn-success",3,"click",4,"ngIf"],["type","submit","class","btn btn-success",4,"ngIf"],[3,"messageEvent"],[1,"btn","btn-success",3,"click"],["type","submit",1,"btn","btn-success"]],template:function(t,e){1&t&&(ys(0,"div",0),ys(1,"div",1),ys(2,"div",2),ys(3,"h3",3),Qs(4,"Coffee Information"),ms(),ms(),ys(5,"form",4),Es("ngSubmit",(function(){return e.submitCoffee(e.coffeeForm.value)})),ys(6,"div",0),ys(7,"div",5),ys(8,"div",6),ys(9,"div",7),vs(10,"input",8),ms(),ys(11,"div",7),ys(12,"label"),Qs(13,"Address"),ms(),vs(14,"input",9),ms(),ms(),ys(15,"div",0),ys(16,"div",7),ys(17,"label"),Qs(18,"Coffee Name"),ms(),vs(19,"input",10),ms(),ys(20,"div",7),ys(21,"label"),Qs(22,"Address"),ms(),vs(23,"input",9),ms(),ms(),ys(24,"div",0),ys(25,"div",7),ys(26,"label"),Qs(27,"link QR"),ms(),vs(28,"input",11),ms(),ms(),ys(29,"div",0),ys(30,"div",7),ys(31,"label"),Qs(32,"Owner Coffee"),ms(),vs(33,"input",12),ms(),ms(),ys(34,"div",0),ys(35,"div",7),ys(36,"label"),Qs(37,"Phone"),ms(),vs(38,"input",13),ms(),ms(),ys(39,"div",0),ys(40,"div",7),ys(41,"label"),Qs(42,"Email"),ms(),vs(43,"input",14),ms(),ms(),ys(44,"div",15),ys(45,"button",16),Es("click",(function(){return e.resetForm()})),Qs(46," Reset "),ms(),hs(47,fm,2,0,"button",17),hs(48,dm,2,0,"button",18),ms(),ms(),ms(),ms(),ms(),ys(49,"div",1),ys(50,"app-list-coffee",19),Es("messageEvent",(function(t){return e.getDataCoffee(t)})),ms(),ms(),ms()),2&t&&(pi(5),ps("formGroup",e.coffeeForm),pi(42),ps("ngIf",!e.isAdd),pi(1),ps("ngIf",e.isAdd))},directives:[Nh,ql,Dh,Rl,Vl,qh,Hh,Hc,hm],styles:[""]}),t})();class gm{}let ym=(()=>{class t{constructor(t){this.db=t,this.dateDDMMYYYY=this.GetForMatDateDDMMYYYY()}AddVisiting(t){this.listVisiting=this.db.list("/seat/"+t.coffeeID+"/"+this.dateDDMMYYYY),console.log("add seat",t),this.listVisiting.push({userID:t.userID,coffeeID:t.coffeeID,cardCode:t.cardCode,visiting:t.visiting,status:t.status,dateFolder:this.dateDDMMYYYY,orderedDate:this.GetCurrentDate(),ordereddBy:t.ordereddBy,doneDate:"",doneBy:""})}UpdateVisiting(t){this.db.object("/seat/"+t.coffeeID+"/"+t.dateFolder+"/"+t.$key).update({cardCode:t.cardCode,visiting:t.visiting,status:t.status,doneDate:this.GetCurrentDate(),doneBy:t.doneBy})}DeleteVisiting(t){this.db.object("/seat/"+t.coffeeID+"/"+t.dateFolder+"/"+t.$key).remove()}GetListVisiting(t,e){return this.listVisiting=this.db.list("seat/"+t+"/"+e),this.listVisiting}GetCurrentDate(){var t=new Date,e=t.getDate()+"-"+(t.getMonth()+1)+"-"+t.getFullYear();return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+" "+e}GetForMatDateDDMMYYYY(){const t=new Date,e=t.getMonth();return String(t.getDate()).padStart(2,"0")+e+t.getFullYear()}}return t.\u0275fac=function(e){return new(e||t)(Qt(Ny))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function mm(t,e){if(1&t){const t=_s();ys(0,"button",14),Es("click",(function(){Ze(t);const e=Ts();return e.onAddVisiting(e.frmInputVisiting.value)})),Qs(1,"L\u01b0u"),ms()}}function vm(t,e){if(1&t){const t=_s();ys(0,"button",14),Es("click",(function(){Ze(t);const e=Ts();return e.updateSeat(e.frmInputVisiting.value)})),Qs(1,"S\u1eeda"),ms()}}let _m=(()=>{class t{constructor(t,e,n,r){this._fb=t,this._visitingService=e,this._toastr=n,this.route=r,this.coffeeID=this.route.snapshot.params.id,console.log("this.coffeeID",this.coffeeID),this.userID="3",console.log("seat-userID",this.userID)}ngOnInit(){this.visitingTable=new gm,this.isAdded=!0,this.frmInputVisiting=this._fb.group({$key:[""],userID:this.userID,coffeeID:this.coffeeID,cardCode:"",visiting:"",status:0,orderedDate:"",ordereddBy:"1",doneDate:"",doneBy:"1"})}onAddVisiting(t){this._visitingService.AddVisiting(t),console.log("add coffeeID",this.coffeeID),this._toastr.success(this.frmInputVisiting.controls.cardCode.value+" successfully added!"),this.isAdded=!1}updateSeat(t){alert(t),console.log("seat",t)}ResetForm(){this.frmInputVisiting.reset()}}return t.\u0275fac=function(e){return new(e||t)(fs(Wh),fs(ym),fs(sm),fs(Hd))},t.\u0275cmp=le({type:t,selectors:[["app-seat-detail"]],decls:20,vars:3,consts:[[1,"container"],[1,"row"],[3,"formGroup"],[1,"panel","panel-primary"],[1,"panel-heading"],[1,"panel-title","text-center"],[1,"panel-body"],[1,"form-group"],["for","cardCode"],["id","cardCode","formControlName","cardCode","type","text","required","",1,"form-control"],["for","visiting"],["id","visiting","formControlName","visiting","type","text","required","",1,"form-control"],[1,"panel-footer"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(ys(0,"div",0),ys(1,"div",1),ys(2,"div",0),ys(3,"form",2),ys(4,"div",3),ys(5,"div",4),ys(6,"h3",5),Qs(7,"Vui l\xf2ng nh\u1eadp th\xf4ng tin"),ms(),ms(),ys(8,"div",6),ys(9,"div",7),ys(10,"label",8),Qs(11,"M\xe3 th\u1ebb"),ms(),vs(12,"input",9),ms(),ys(13,"div",7),ys(14,"label",10),Qs(15,"V\u1ecb tr\xed ng\u1ed3i"),ms(),vs(16,"input",11),ms(),ms(),ys(17,"div",12),hs(18,mm,2,0,"button",13),hs(19,vm,2,0,"button",13),ms(),ms(),ms(),ms(),ms(),ms()),2&t&&(pi(3),ps("formGroup",e.frmInputVisiting),pi(15),ps("ngIf",e.isAdded),pi(1),ps("ngIf",!e.isAdded))},directives:[Nh,ql,Dh,Rl,Vl,qh,Hh,Hc],styles:[".card-code-table[_ngcontent-%COMP%]{height:15%}.card-code-input[_ngcontent-%COMP%]{height:85%}"]}),t})();function bm(t,e){1&t&&(ys(0,"b",15),Qs(1,"\u0110ang ch\u1edd"),ms())}function wm(t,e){1&t&&(ys(0,"b",15),Qs(1,"\u0110\xe3 giao"),ms())}function Em(t,e){if(1&t){const t=_s();ys(0,"tr"),ys(1,"td"),Qs(2),ms(),ys(3,"td"),Qs(4),ms(),ys(5,"td"),hs(6,bm,2,0,"b",13),hs(7,wm,2,0,"b",13),ms(),ys(8,"td"),Qs(9),ms(),ys(10,"td"),ys(11,"button",14),Es("click",(function(){Ze(t);const n=e.$implicit;return Ts().onDone(n)})),ms(),ms(),ms()}if(2&t){const t=e.$implicit;pi(2),$s(t.cardCode),pi(2),$s(t.visiting),pi(2),ps("ngIf",0==t.status),pi(1),ps("ngIf",1==t.status),pi(2),$s(t.orderedDate)}}let Cm=(()=>{class t{constructor(t,e){this.route=t,this.visitingService=e,this.coffeeID=this.route.snapshot.params.id,console.log("this.coffeeID",this.coffeeID)}ngOnInit(){let t=this.visitingService.GetForMatDateDDMMYYYY();this.visitingService.GetListVisiting(this.coffeeID,t).snapshotChanges().subscribe(t=>{this.seats=[],t.forEach(t=>{let e=t.payload.toJSON();0==e.status&&(e.$key=t.key,e.coffeeID=this.coffeeID,this.seats.push(e))})})}onDone(t){t.status=1,this.visitingService.UpdateVisiting(t),console.log("seat",t)}}return t.\u0275fac=function(e){return new(e||t)(fs(Hd),fs(ym))},t.\u0275cmp=le({type:t,selectors:[["app-list-seat"]],decls:28,vars:3,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],[1,"pricing-header","mx-auto"],[1,"panel-heading"],[1,"panel-title","text-center"],[1,"table-responsive"],[1,"table","table-bordered","table-responsive-sm","table-responsive-md","table-responsive-lg"],[1,"text-center"],["scope","col"],[4,"ngFor","ngForOf"],["style","color: green",4,"ngIf"],["type","button",1,"btn","btn-warning","btn-circle","btn-lg","fa","fa-check",3,"click"],[2,"color","green"]],template:function(t,e){1&t&&(ys(0,"nav",0),ys(1,"div",1),ys(2,"ul",2),ys(3,"li",3),ys(4,"a",4),Qs(5," \u0110ang ch\u1edd"),ms(),ms(),ys(6,"li",3),ys(7,"a",4),Qs(8," \u0110\xe3 giao"),ms(),ms(),ms(),ms(),ms(),ys(9,"div",5),ys(10,"div",6),ys(11,"h3",7),Qs(12,"Danh s\xe1ch v\u1ecb tr\xed ng\u1ed3i"),ms(),ms(),ys(13,"div",8),ys(14,"table",9),ys(15,"thead"),ys(16,"tr",10),ys(17,"th",11),Qs(18,"S\u1ed1 th\u1ebb"),ms(),ys(19,"th",11),Qs(20,"V\u1ecb tr\xed ng\u1ed3i"),ms(),ys(21,"th",11),Qs(22,"Tr\u1ea1ng th\xe1i"),ms(),ys(23,"th",11),Qs(24,"Ng\xe0y"),ms(),vs(25,"th"),ms(),ms(),ys(26,"tbody"),hs(27,Em,12,5,"tr",12),ms(),ms(),ms(),ms()),2&t&&(pi(4),Os("routerLink","/coffee-list-seat/",e.coffeeID,""),pi(3),Os("routerLink","/coffee-list-seat-done/",e.coffeeID,""),pi(20),ps("ngForOf",e.seats))},directives:[sg,ug,qc,Hc],styles:[".btn-circle[_ngcontent-%COMP%]{width:30px;height:30px;text-align:center;padding:6px 0;font-size:12px;line-height:1.428571429;border-radius:15px;background-color:#32cd32}.btn-circle.btn-lg[_ngcontent-%COMP%]{width:50px;height:50px;padding:10px 16px;font-size:18px;line-height:1.33;border-radius:25px}.btn-circle.btn-xl[_ngcontent-%COMP%]{width:70px;height:70px;padding:10px 16px;font-size:24px;line-height:1.33;border-radius:35px}"]}),t})();function Sm(t,e){1&t&&(ys(0,"b",15),Qs(1,"\u0110ang ch\u1edd"),ms())}function Tm(t,e){1&t&&(ys(0,"b",15),Qs(1,"\u0110\xe3 giao"),ms())}function Om(t,e){if(1&t){const t=_s();ys(0,"tr"),ys(1,"td"),Qs(2),ms(),ys(3,"td"),Qs(4),ms(),ys(5,"td"),hs(6,Sm,2,0,"b",13),hs(7,Tm,2,0,"b",13),ms(),ys(8,"td"),Qs(9),ms(),ys(10,"td"),ys(11,"button",14),Es("click",(function(){Ze(t);const n=e.$implicit;return Ts().onWaiting(n)})),ms(),ms(),ms()}if(2&t){const t=e.$implicit;pi(2),$s(t.cardCode),pi(2),$s(t.visiting),pi(2),ps("ngIf",0==t.status),pi(1),ps("ngIf",1==t.status),pi(2),$s(t.orderedDate)}}let Im=(()=>{class t{constructor(t,e){this.route=t,this.visitingService=e,this.coffeeID=this.route.snapshot.params.id,console.log("this.coffeeID",this.coffeeID)}ngOnInit(){let t=this.visitingService.GetForMatDateDDMMYYYY();this.visitingService.GetListVisiting(this.coffeeID,t).snapshotChanges().subscribe(t=>{this.seats=[],t.forEach(t=>{let e=t.payload.toJSON();1==e.status&&(e.$key=t.key,e.coffeeID=this.coffeeID,this.seats.push(e))})})}onWaiting(t){t.status=0,this.visitingService.UpdateVisiting(t),console.log("seat",t)}}return t.\u0275fac=function(e){return new(e||t)(fs(Hd),fs(ym))},t.\u0275cmp=le({type:t,selectors:[["app-list-seat-done"]],decls:28,vars:3,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],[1,"pricing-header","mx-auto"],[1,"panel-heading"],[1,"panel-title","text-center"],[1,"table-responsive"],[1,"table","table-bordered","table-responsive-sm","table-responsive-md","table-responsive-lg"],[1,"text-center"],["scope","col"],[4,"ngFor","ngForOf"],["style","color: green",4,"ngIf"],["type","button",1,"btn","btn-warning","btn-circle","btn-lg","fa","fa-check",3,"click"],[2,"color","green"]],template:function(t,e){1&t&&(ys(0,"nav",0),ys(1,"div",1),ys(2,"ul",2),ys(3,"li",3),ys(4,"a",4),Qs(5," \u0110ang ch\u1edd"),ms(),ms(),ys(6,"li",3),ys(7,"a",4),Qs(8," \u0110\xe3 giao"),ms(),ms(),ms(),ms(),ms(),ys(9,"div",5),ys(10,"div",6),ys(11,"h3",7),Qs(12,"Danh s\xe1ch v\u1ecb tr\xed ng\u1ed3i"),ms(),ms(),ys(13,"div",8),ys(14,"table",9),ys(15,"thead"),ys(16,"tr",10),ys(17,"th",11),Qs(18,"S\u1ed1 th\u1ebb"),ms(),ys(19,"th",11),Qs(20,"V\u1ecb tr\xed ng\u1ed3i"),ms(),ys(21,"th",11),Qs(22,"Tr\u1ea1ng th\xe1i"),ms(),ys(23,"th",11),Qs(24,"Ng\xe0y"),ms(),vs(25,"th"),ms(),ms(),ys(26,"tbody"),hs(27,Om,12,5,"tr",12),ms(),ms(),ms(),ms()),2&t&&(pi(4),Os("routerLink","/coffee-list-seat/",e.coffeeID,""),pi(3),Os("routerLink","/coffee-list-seat-done/",e.coffeeID,""),pi(20),ps("ngForOf",e.seats))},directives:[sg,ug,qc,Hc],styles:[""]}),t})();class xm extends C{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),super.next(t)}nextTimeWindow(t){this._events.push(new Am(this._getNow(),t)),this._trimBufferThenGetEvents(),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new b;if(this.isStopped||this.hasError?o=h.EMPTY:(this.observers.push(t),o=new w(this,t)),r&&t.add(t=new ny(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Bg).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Am{constructor(t,e){this.time=t,this.value=e}}let km=(()=>{class t{constructor(t,e,r,i){const o=new uy(i),s=cy(o),a=$h(void 0).pipe(ty(o.outsideAngular),Pf(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),j(()=>py(t,i,e)),j(t=>i.runOutsideAngular(()=>t.auth())),function(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:void 0,refCount:!1,scheduler:void 0},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){s++,i&&!a||(a=!1,i=new xm(t,e,r),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}));const l=i.subscribe(this);this.add(()=>{s--,l.unsubscribe(),o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}({bufferSize:1,refCount:!1}));return Qc(r)?this.authState=this.user=this.idToken=this.idTokenResult=$h(null):(a.pipe(Tf()).subscribe(),this.authState=a.pipe(Pf(t=>t.getRedirectResult().then(()=>t,()=>t)),Pf(t=>i.runOutsideAngular(()=>new v(t.onAuthStateChanged.bind(t)))),s),this.user=a.pipe(Pf(t=>t.getRedirectResult().then(()=>t,()=>t)),Pf(t=>i.runOutsideAngular(()=>new v(t.onIdTokenChanged.bind(t)))),s),this.idToken=this.user.pipe(Pf(t=>t?U(t.getIdToken()):$h(null))),this.idTokenResult=this.user.pipe(Pf(t=>t?U(t.getIdTokenResult()):$h(null)))),((t,e,n)=>new Proxy(t,{get:(r,i)=>n.runOutsideAngular(()=>{if(t[i])return t[i];if(ly.indexOf(i)>-1)return()=>{};const r=e.toPromise().then(t=>{const e=t&&t[i];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>r[e],apply:(t,e,n)=>r.then(t=>t&&t(...n))})})}))(this,a,i)}}return t.\u0275fac=function(e){return new(e||t)(Qt(hy),Qt(fy,8),Qt(Ou),Qt(qu))},t.\u0275prov=ct({factory:function(){return new t(Qt(hy),Qt(fy,8),Qt(Ou),Qt(qu))},token:t,providedIn:"any"}),t})(),Nm=(()=>{class t{}return t.\u0275mod=pe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[km]}),t})(),Pm=(()=>{class t{constructor(t){this.afAuth=t}doFacebookLogin(){return new Promise((t,e)=>{let n=new iy.a.auth.FacebookAuthProvider;this.afAuth.signInWithPopup(n).then(e=>{t(e)},t=>{console.log("doFacebookLogin",t),e(t)})})}doTwitterLogin(){return new Promise((t,e)=>{let n=new iy.a.auth.TwitterAuthProvider;this.afAuth.signInWithPopup(n).then(e=>{t(e)},t=>{console.log(t),e(t)})})}doGoogleLogin(){return new Promise((t,e)=>{let n=new iy.a.auth.GoogleAuthProvider;n.addScope("profile"),n.addScope("email"),this.afAuth.signInWithPopup(n).then(e=>{t(e)},t=>{console.log(t),e(t)})})}doRegister(t){return new Promise((e,n)=>{iy.a.auth().createUserWithEmailAndPassword(t.email,t.password).then(t=>{e(t)},t=>n(t))})}doLogin(t){return new Promise((e,n)=>{iy.a.auth().signInWithEmailAndPassword(t.email,t.password).then(t=>{e(t)},t=>n(t))})}doLogout(){return new Promise((t,e)=>{iy.a.auth().currentUser?(this.afAuth.signOut(),t()):e()})}}return t.\u0275fac=function(e){return new(e||t)(Qt(km))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Rm=[{path:"",redirectTo:"coffee",pathMatch:"full"},{path:"coffee",component:pm},{path:"login/:id",component:(()=>{class t{constructor(t,e,n,r){this.authService=t,this.router=e,this.fb=n,this.route=r,this.errorMessage="",this.coffeeID=this.route.snapshot.params.id,console.log("this.coffeeID",this.coffeeID)}createForm(){this.loginForm=this.fb.group({email:["",Ql.required],password:["",Ql.required]})}tryFacebookLogin(){this.authService.doFacebookLogin().then(t=>{console.log("userID",t.user.uid),localStorage.setItem("seat-userID",t.user.uid),localStorage.setItem("seat-coffeeID",this.coffeeID),this.router.navigate(["/coffee-seat/",this.coffeeID]).then(t=>{t?console.log("Navigation is successful!"):console.log("Navigation has failed!")})})}tryTwitterLogin(){}tryGoogleLogin(){this.authService.doGoogleLogin().then(t=>{this.router.navigate(["/user"])})}tryLogin(t){}}return t.\u0275fac=function(e){return new(e||t)(fs(Pm),fs(ig),fs(Wh),fs(Hd))},t.\u0275cmp=le({type:t,selectors:[["page-login"]],decls:24,vars:0,consts:[[1,"header"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"col-md-12","col-md-offset-4"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],["type","button",1,"btn","btn-danger","btn-block",3,"click"],["type","button",1,"btn","btn-info","btn-block",3,"click"],["href","/register"]],template:function(t,e){1&t&&(ys(0,"h1",0),Qs(1,"Login with Firebase or Social Providers"),ms(),ys(2,"div",1),vs(3,"div",2),ys(4,"div",3),ys(5,"div",1),ys(6,"div",4),ys(7,"button",5),Es("click",(function(){return e.tryFacebookLogin()})),Qs(8," Login with Facebook "),ms(),ms(),ms(),ys(9,"div",1),ys(10,"div",4),ys(11,"button",6),Es("click",(function(){return e.tryGoogleLogin()})),Qs(12," Login with Google "),ms(),ms(),ms(),ys(13,"div",1),ys(14,"div",4),ys(15,"button",7),Es("click",(function(){return e.tryTwitterLogin()})),Qs(16," Login with Twitter "),ms(),ms(),ms(),ys(17,"div",1),ys(18,"div",4),ys(19,"p"),Qs(20,"No account yet? "),ys(21,"a",8),Qs(22,"Create an account"),ms(),ms(),ms(),ms(),ms(),vs(23,"div",2),ms())},styles:[".header[_ngcontent-%COMP%]{text-align:center;font-size:30px;margin-bottom:40px}.row[_ngcontent-%COMP%]{margin-top:10px}.error[_ngcontent-%COMP%]{color:red}"]}),t})()},{path:"coffee-seat/:id",component:_m},{path:"coffee-list-seat/:id",component:Cm},{path:"coffee-list-seat-done/:id",component:Im},{path:"coffee-seat",component:_m},{path:"coffee-list-seat",component:Cm},{path:"coffee-list-seat-done",component:Im}];let Dm=(()=>{class t{}return t.\u0275mod=pe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},imports:[[Gc,_g.forRoot(Rm)],_g]}),t})();function jm(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Lm(t){switch(t.length){case 0:return new qy;case 1:return t[0];default:return new By(t)}}function Fm(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case"*":a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function Mm(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&Um(n,"start",t)));break;case"done":t.onDone(()=>r(n&&Um(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&Um(n,"destroy",t)))}}function Um(t,e,n){const r=n.totalTime,i=Vm(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function Vm(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function qm(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function Bm(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let Hm=(t,e)=>!1,zm=(t,e)=>!1,Wm=(t,e,n)=>[];const Gm=jm();(Gm||"undefined"!=typeof Element)&&(Hm=(t,e)=>t.contains(e),zm=(()=>{if(Gm||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):zm}})(),Wm=(t,e,n)=>{let r=[];if(n)r.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&r.push(n)}return r});let Qm=null,$m=!1;function Km(t){Qm||(Qm=("undefined"!=typeof document?document.body:null)||{},$m=!!Qm.style&&"WebkitAppearance"in Qm.style);let e=!0;return Qm.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in Qm.style,!e&&$m)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in Qm.style),e}const Ym=zm,Xm=Hm,Zm=Wm;function Jm(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let tv=(()=>{class t{validateStyleProperty(t){return Km(t)}matchesElement(t,e){return Ym(t,e)}containsElement(t,e){return Xm(t,e)}query(t,e,n){return Zm(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new qy(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),ev=(()=>{class t{}return t.NOOP=new tv,t})();function nv(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:rv(parseFloat(e[1]),e[2])}function rv(t,e){switch(e){case"s":return 1e3*t;default:return t}}function iv(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=rv(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=rv(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function ov(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function sv(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else ov(t,n);return n}function av(t,e,n){return n?e+":"+n+";":""}function uv(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=av(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=av(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function cv(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=mv(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),jm()&&uv(t))}function lv(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=mv(e);t.style[n]=""}),jm()&&uv(t))}function hv(t){return Array.isArray(t)?1==t.length?t[0]:Ly(t):t}const fv=new RegExp("{{\\s*(.+?)\\s*}}","g");function dv(t){let e=[];if("string"==typeof t){let n;for(;n=fv.exec(t);)e.push(n[1]);fv.lastIndex=0}return e}function pv(t,e,n){const r=t.toString(),i=r.replace(fv,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function gv(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const yv=/-+([a-z0-9])/g;function mv(t){return t.replace(yv,(...t)=>t[1].toUpperCase())}function vv(t,e){return 0===t||0===e}function _v(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach((function(e){n[e]=wv(t,e)}))}}return e}function bv(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function wv(t,e){return window.getComputedStyle(t)[e]}function Ev(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(Tv(i,s)),"<"!=o[0]||"*"==i&&"*"==s||e.push(Tv(s,i))}(t,n,e)):n.push(t),n}const Cv=new Set(["true","1"]),Sv=new Set(["false","0"]);function Tv(t,e){const n=Cv.has(t)||Sv.has(t),r=Cv.has(e)||Sv.has(e);return(i,o)=>{let s="*"==t||t==i,a="*"==e||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?Cv.has(t):Sv.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?Cv.has(e):Sv.has(e)),s&&a}}const Ov=new RegExp("s*:selfs*,?","g");function Iv(t,e,n){return new xv(t).build(e,n)}class xv{constructor(t){this._driver=t}build(t,e){const n=new Av(e);return this._resetContextStyleTimingState(n),bv(this,hv(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(kv(t)){const e=t;Object.keys(e).forEach(t=>{dv(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=gv(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=bv(this,hv(t.animation),e);return{type:1,matchers:Ev(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Nv(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>bv(this,t,e)),options:Nv(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=bv(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:Nv(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Pv(iv(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Pv(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||iv(r,e),Pv(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:Fy({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=Fy(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?"*"==t?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(kv(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=dv(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(kv(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(kv(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,f=e.currentTime,d=e.currentAnimateTimings,p=d.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=f+d.delay+s,d.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:bv(this,hv(t.animation),e),options:Nv(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Nv(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Nv(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(Ov,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,".ng-animating"),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,qm(e.collectedStyles,e.currentQuerySelector,{});const s=bv(this,hv(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:Nv(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:iv(t.timings,e.errors,!0);return{type:12,animation:bv(this,hv(t.animation),e),timings:n,options:null}}}class Av{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function kv(t){return!Array.isArray(t)&&"object"==typeof t}function Nv(t){var e;return t?(t=ov(t)).params&&(t.params=(e=t.params)?ov(e):null):t={},t}function Pv(t,e,n){return{duration:t,delay:e,easing:n}}function Rv(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class Dv{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const jv=new RegExp(":enter","g"),Lv=new RegExp(":leave","g");function Fv(t,e,n,r,i,o={},s={},a,u,c=[]){return(new Mv).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class Mv{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new Dv;const l=new Vv(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),bv(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[Rv(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?nv(n.duration):null,o=null!=n.delay?nv(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),bv(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Uv);const t=nv(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>bv(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?nv(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),bv(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return iv(e.params?pv(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?nv(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Uv);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),bv(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;bv(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const Uv={};class Vv{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Uv,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new qv(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=nv(n.duration)),null!=n.delay&&(r.delay=nv(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=pv(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new Vv(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=Uv,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new Bv(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(jv,"."+this._enterClassName)).replace(Lv,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class qv{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new qv(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||"*",this._currentKeyframe[t]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]="*"})):sv(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=pv(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:"*"),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=sv(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):"*"==r&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?gv(t.values()):[],o=e.size?gv(e.values()):[];if(n){const t=r[0],e=ov(t);t.offset=0,e.offset=1,r=[t,e]}return Rv(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class Bv extends qv{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=sv(t[0],!1);a.offset=0,i.push(a);const u=sv(t[0],!1);u.offset=Hv(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=sv(t[r],!1);s.offset=Hv((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return Rv(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function Hv(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class zv{}class Wv extends zv{normalizePropertyName(t,e){return mv(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(Gv[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const Gv=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Qv(t,e,n,r,i,o,s,a,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}const $v={};class Kv{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||$v,f=this.buildStyles(n,s&&s.params||$v,l),d=a&&a.params||$v,p=this.buildStyles(r,d,l),g=new Set,y=new Map,m=new Map,v="void"===r,_={params:Object.assign(Object.assign({},h),d)},b=c?[]:Fv(t,e,this.ast.animation,i,o,f,p,_,u,l);let w=0;if(b.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return Qv(e,this._triggerName,n,r,v,f,p,[],[],y,m,w,l);b.forEach(t=>{const n=t.element,r=qm(y,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=qm(m,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const E=gv(g.values());return Qv(e,this._triggerName,n,r,v,f,p,b,E,y,m,w)}}class Yv{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=ov(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=pv(o,r,e)),n[t]=o})}}),n}}class Xv{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Yv(t.style,t.options&&t.options.params||{})}),Zv(this.states,"true","1"),Zv(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Kv(t,e,this.states))}),this.fallbackTransition=new Kv(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Zv(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Jv=new Dv;class t_{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=Iv(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=Fm(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=Fv(this._driver,e,i,"ng-enter","ng-leave",{},{},n,Jv,r),o.forEach(t=>{const e=qm(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error("Unable to create the animation due to the following errors: "+r.join("\n"));s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,"*")})});const a=Lm(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}listen(t,e,n,r){const i=Vm(e,"","","");return Mm(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const e_=[],n_={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},r_={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class i_{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=ov(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const o_=new i_("void");class s_{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,d_(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=qm(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=qm(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(d_(t,"ng-trigger"),d_(t,"ng-trigger-"+e),a[e]=o_),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new u_(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(d_(t,"ng-trigger"),d_(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new i_(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=o_),"void"!==u.value&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{lv(t,n),cv(t,r)})}return}const c=qm(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(d_(t,"ng-animate-queued"),o.onStart(()=>{p_(t,"ng-animate-queued")})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,".ng-trigger",!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,"void",r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&Lm(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,o=this._engine.statesByElement.get(t)[r]||o_,s=new i_("void"),a=new u_(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:o,toState:s,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==n_||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){d_(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=Vm(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,Mm(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class a_{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new s_(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(c_(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!c_(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),d_(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),p_(t,"ng-animate-disabled"))}removeNode(t,e,n,r){if(c_(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return c_(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,".ng-trigger",!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,".ng-animating",!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Lm(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=n_,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)d_(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?Lm(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}_flushAnimations(t,e){const n=new Dv,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=f_(h,this.collectedEnterElements),d=new Map;let p=0;f.forEach((t,e)=>{const n="ng-enter"+p++;d.set(e,n),t.forEach(t=>d_(t,n))});const g=[],y=new Set,m=new Set;for(let k=0;k<this.collectedLeaveElements.length;k++){const t=this.collectedLeaveElements[k],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),y.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>y.add(t)):m.add(t))}const v=new Map,_=f_(h,Array.from(y));_.forEach((t,e)=>{const n="ng-leave"+p++;v.set(e,n),t.forEach(t=>d_(t,n))}),t.push(()=>{f.forEach((t,e)=>{const n=d.get(e);t.forEach(t=>p_(t,n))}),_.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>p_(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const b=[],w=[];for(let k=this._namespaceList.length-1;k>=0;k--)this._namespaceList[k].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(b.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),f=d.get(i),p=this._buildInstruction(t,n,f,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>lv(i,p.fromStyles)),e.onDestroy(()=>cv(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>lv(i,p.fromStyles)),e.onDestroy(()=>cv(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>qm(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),b.forEach(t=>t.destroy()),this.reportError(t)}const E=new Map,C=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(C.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,E))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{qm(E,e,[]).push(t),t.destroy()})});const S=g.filter(t=>y_(t,a,u)),T=new Map;h_(T,this.driver,m,u,"*").forEach(t=>{y_(t,a,u)&&S.push(t)});const O=new Map;f.forEach((t,e)=>{h_(O,this.driver,new Set(t),a,"!")}),S.forEach(t=>{const e=T.get(t),n=O.get(t);T.set(t,Object.assign(Object.assign({},e),n))});const I=[],x=[],A={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>cv(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=A;if(C.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=C.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>C.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,E,i,O,T);if(o.setRealPlayer(n),t===A)I.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=Lm(e)),r.push(o)}}else lv(e,s.fromStyles),o.onDestroy(()=>cv(e,s.toStyles)),x.push(o),c.has(e)&&r.push(o)}),x.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=Lm(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let k=0;k<g.length;k++){const t=g[k],e=t.__ng_removed;if(p_(t,"ng-leave"),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,".ng-animating",!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?g_(this,t,r):this.processLeaveNode(t)}return g.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||"void"==i;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=qm(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}lv(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const f=h.__ng_removed;if(f&&f.removedBeforeQueried)return new qy(e.duration,e.delay);const d=h!==a,p=function(t){const e=[];return function t(e,n){for(let r=0;r<e.length;r++){const i=e[r];i instanceof By?t(i.players,n):n.push(i)}}(t,e),e}((n.get(h)||e_).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),y=o.get(h),m=Fm(0,this._normalizer,0,e.keyframes,g,y),v=this._buildPlayer(e,m,p);if(e.subTimeline&&r&&l.add(h),d){const e=new u_(t,s,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{qm(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>d_(t,"ng-animating"));const f=Lm(h);return f.onDestroy(()=>{c.forEach(t=>p_(t,"ng-animating")),cv(a,e.toStyles)}),l.forEach(t=>{qm(r,t,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new qy(t.duration,t.delay)}}class u_{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new qy,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>Mm(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){qm(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function c_(t){return t&&1===t.nodeType}function l_(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function h_(t,e,n,r,i){const o=[];n.forEach(t=>o.push(l_(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=r_,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>l_(t,o[a++])),s}function f_(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let o=i.get(e);if(o)return o;const s=e.parentNode;return o=n.has(s)?s:r.has(s)?1:t(s),i.set(e,o),o}(t);1!==e&&n.get(e).push(t)}),n}function d_(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function p_(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function g_(t,e,n){Lm(n).onDone(()=>t.processLeaveNode(e))}function y_(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class m_{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new a_(t,e,n),this._timelineEngine=new t_(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=Iv(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new Xv(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=Bm(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=Bm(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function v_(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=b_(e[0]),e.length>1&&(r=b_(e[e.length-1]))):e&&(n=b_(e)),n||r?new __(t,n,r):null}let __=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&cv(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(cv(this._element,this._initialStyles),this._endStyles&&(cv(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(lv(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(lv(this._element,this._endStyles),this._endStyles=null),cv(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function b_(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];w_(i)&&(e=e||{},e[i]=t[i])}return e}function w_(t){return"display"===t||"position"===t}class E_{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=x_(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),I_(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),O_(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){C_(this._element,this._name,"paused")}resume(){C_(this._element,this._name,"running")}setPosition(t){const e=S_(this._element,this._name);this._position=t*this._duration,I_(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),O_(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=x_(t,"").split(","),r=T_(n,e);r>=0&&(n.splice(r,1),I_(t,"",n.join(",")))}(this._element,this._name))}}function C_(t,e,n){I_(t,"PlayState",n,S_(t,e))}function S_(t,e){const n=x_(t,"");return n.indexOf(",")>0?T_(n.split(","),e):T_([n],e)}function T_(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function O_(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function I_(t,e,n,r){const i="animation"+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function x_(t,e){return t.style["animation"+e]}class A_{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new E_(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:wv(this.element,n))})}this.currentSnapshot=t}}class k_ extends qy{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Jm(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class N_{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return Km(t)}matchesElement(t,e){return Ym(t,e)}containsElement(t,e){return Xm(t,e)}query(t,e,n){return Zm(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Jm(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=i+"}\n"}),r+="}\n";const o=document.createElement("style");return o.innerHTML=r,o}animate(t,e,n,r,i,o=[],s){s&&this._notifyFaultyScrubber();const a=o.filter(t=>t instanceof A_),u={};vv(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=_v(t,e,u));if(0==n)return new k_(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const f=v_(t,e),d=new A_(t,e,l,n,r,i,c,f);return d.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),d}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class P_{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:wv(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class R_{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(D_().toString()),this._cssKeyframesDriver=new N_}validateStyleProperty(t){return Km(t)}matchesElement(t,e){return Ym(t,e)}containsElement(t,e){return Xm(t,e)}query(t,e,n){return Zm(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof P_);vv(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=v_(t,e=_v(t,e=e.map(t=>sv(t,!1)),u));return new P_(t,e,a,l)}}function D_(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let j_=(()=>{class t extends Ry{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:se.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Ly(t):t;return M_(this._renderer,null,e,"register",[n]),new L_(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(Qt(ma),Qt(_c))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class L_ extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new F_(this._id,t,e||{},this._renderer)}}class F_{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return M_(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function M_(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}let U_=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new V_("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new q_(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(Qt(ma),Qt(m_),Qt(qu))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class V_{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class q_ extends V_{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return"@"!=i.charAt(0)&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let B_=(()=>{class t extends m_{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(Qt(_c),Qt(ev),Qt(zv))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const H_=[{provide:ev,useFactory:function(){return"function"==typeof D_()?new R_:new N_}},{provide:new Ft("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:Ry,useClass:j_},{provide:zv,useFactory:function(){return new Wv}},{provide:m_,useClass:B_},{provide:ma,useFactory:function(t,e,n){return new U_(t,e,n)},deps:[fl,m_,qu]}];let z_=(()=>{class t{}return t.\u0275mod=pe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:H_,imports:[Ol]}),t})();function W_(t,e){return function(t,e=Rg){return new v(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot(n)}):r=t.onSnapshot(n),()=>{null!=r&&r()}})}(t,e)}function G_(t,e){return W_(t,e).pipe(j(t=>({payload:t,type:"query"})))}function Q_(t,e){return G_(t,e).pipe(j(t=>t.payload.docChanges().map(t=>({type:t.type,payload:t}))))}function $_(t,e,n){return G_(t,n).pipe(j(t=>t.payload.docChanges()),Lf((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case"modified":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e),[]),j(t=>t.map(t=>({type:t.type,payload:t}))))}function K_(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}n("xsWp");class Y_{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){return t&&0!==t.length?Q_(this.query,this.afs.schedulers.outsideAngular).pipe(j(e=>e.filter(e=>t.indexOf(e.type)>-1)),of(t=>t.length>0),this.afs.keepUnstableUntilFirst):Q_(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Lf((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=K_(t);return $_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return G_(this.query,this.afs.schedulers.outsideAngular).pipe(j(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return U(this.query.get(t)).pipe(ty(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new X_(this.ref.doc(t),this.afs)}}class X_{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=rb(n,e);return new Y_(r,i,this.afs)}snapshotChanges(){return W_(this.ref,this.afs.schedulers.outsideAngular).pipe(j(t=>({payload:t,type:"value"}))).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return this.snapshotChanges().pipe(j(t=>t.payload.data()))}get(t){return U(this.ref.get(t)).pipe(ty(this.afs.schedulers.insideAngular))}}class Z_{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Q_(this.query,this.afs.schedulers.outsideAngular).pipe(j(e=>e.filter(e=>t.indexOf(e.type)>-1)),of(t=>t.length>0),this.afs.keepUnstableUntilFirst):Q_(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Lf((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=K_(t);return $_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return G_(this.query,this.afs.schedulers.outsideAngular).pipe(j(t=>t.payload.docs.map(t=>t.data())),this.afs.keepUnstableUntilFirst)}get(t){return U(this.query.get(t)).pipe(ty(this.afs.schedulers.insideAngular))}}const J_=n("xsWp"),tb=new Ft("angularfire2.enableFirestorePersistence"),eb=new Ft("angularfire2.firestore.persistenceSettings"),nb=new Ft("angularfire2.firestore.settings");function rb(t,e=(t=>t)){return{query:e(t),ref:t}}let ib=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new uy(o),this.keepUnstableUntilFirst=cy(this.schedulers),this.firestore=o.runOutsideAngular(()=>{const n=py(t,o,e);"registerFirestore"in J_&&J_.registerFirestore(iy.a);const i=n.firestore();return r&&i.settings(r),i}),this.persistenceEnabled$=n&&!Qc(i)?o.runOutsideAngular(()=>{try{return U(this.firestore.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(t){return $h(!1)}}):$h(!1)}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=rb(n,e),o=this.schedulers.ngZone.run(()=>r);return new Y_(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Z_(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new X_(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(Qt(hy),Qt(fy,8),Qt(tb,8),Qt(nb,8),Qt(Ou),Qt(qu),Qt(eb,8))},t.\u0275prov=ct({factory:function(){return new t(Qt(hy),Qt(fy,8),Qt(tb,8),Qt(nb,8),Qt(Ou),Qt(qu),Qt(eb,8))},token:t,providedIn:"any"}),t})(),ob=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:tb,useValue:!0},{provide:eb,useValue:e}]}}}return t.\u0275mod=pe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[ib]}),t})();var sb=n("uXP2"),ab=n("qOnz"),ub=n("/6Yf"),cb=function(t){function e(n,r){var i=t.call(this,lb(n),"Firebase Storage: "+r)||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(sb.c)(e,t),e.prototype.codeEquals=function(t){return lb(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(ab.c);function lb(t){return"storage/"+t}function hb(){return new cb("unknown","An unknown error occurred, please check the error payload for server response.")}function fb(){return new cb("canceled","User canceled the upload/download.")}function db(){return new cb("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function pb(){return new cb("app-deleted","The Firebase app was deleted.")}function gb(t,e){return new cb("invalid-format","String does not match format '"+t+"': "+e)}function yb(t){throw new cb("internal-error","Internal error: "+t)}var mb={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},vb=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function _b(t,e){switch(t){case mb.RAW:return new vb(bb(e));case mb.BASE64:case mb.BASE64URL:return new vb(wb(t,e));case mb.DATA_URL:return new vb((n=new Eb(e)).base64?wb(mb.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw gb(mb.DATA_URL,"Malformed data URL.")}return bb(e)}(n.rest),function(t){return new Eb(t).contentType}(e))}var n;throw hb()}function bb(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function wb(t,e){switch(t){case mb.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw gb(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case mb.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw gb(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(c){throw gb(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Eb=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw gb(mb.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=r).length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}(),Cb={STATE_CHANGED:"state_changed"},Sb={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Tb(t){switch(t){case"running":case"pausing":case"canceling":return Sb.RUNNING;case"paused":return Sb.PAUSED;case"success":return Sb.SUCCESS;case"canceled":return Sb.CANCELED;case"error":default:return Sb.ERROR}}function Ob(t){return null!=t}function Ib(t){return"string"==typeof t||t instanceof String}function xb(t){return Ab()&&t instanceof Blob}function Ab(){return"undefined"!=typeof Blob}function kb(t,e,n,r){if(r<e)throw new cb("invalid-argument","Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new cb("invalid-argument","Invalid value for '"+t+"'. Expected "+n+" or less.")}var Nb=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Pb=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Nb.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Nb.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Nb.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw yb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),Ob(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return Ob(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw yb("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw yb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw yb("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){Ob(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){Ob(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Rb=function(){function t(){}return t.prototype.createXhrIo=function(){return new Pb},t}();function Db(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function jb(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Db();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Ab())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var Lb=function(){function t(t,e){var n=0,r="";xb(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(xb(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Ab()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(jb.apply(null,r))}var i=e.map((function(t){return Ib(t)?_b(mb.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),Fb=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw new cb("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(e);if(c){var l=c[u.indices.path];l||(l=""),n=new t(c[u.indices.bucket],l),u.postModify(n);break}}if(null==n)throw function(t){return new cb("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function Mb(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function Ub(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Vb(t){return"https://firebasestorage.googleapis.com/v0"+t}function qb(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function Bb(t,e){return e}var Hb=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Bb}}(),zb=null;function Wb(t,e,n){var r=Mb(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Fb(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Gb(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Qb=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function $b(t){if(!t)throw hb()}function Kb(t,e){return function(n,r){var i=Wb(t,r,e);return $b(null!==i),i}}function Yb(t){return function(e,n){var r;return(r=401===e.getStatus()?new cb("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new cb("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new cb("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function Xb(t){var e=Yb(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new cb("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Zb(t,e,n){var r=Vb(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new Qb(r,"GET",Kb(t,n),i);return o.errorHandler=Xb(e),o}function Jb(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var tw=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function ew(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){$b(!1)}return $b(!!n&&-1!==(e||["active"]).indexOf(n)),n}var nw=function(){return function(t,e,n){if("function"==typeof t||Ob(e)||Ob(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}}(),rw=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function iw(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var ow=function(){function t(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.service_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_="running",this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals("canceled")?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_("error"))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals("canceled")?s.completeTransitions_():(s.error_=t,s.transition_("error"))},this.promise_=new Promise((function(t,e){s.resolve_=t,s.reject_=e,s.start_()})),this.promise_.then(null,(function(){}))}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){"running"===this.state_&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.service_.getAuthToken().then((function(n){switch(e.state_){case"running":t(n);break;case"canceling":e.transition_("canceled");break;case"pausing":e.transition_("paused")}}))},t.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Jb(e,r,i),a={name:s.fullPath},u=Vb(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Gb(s,n),h=new Qb(u,"POST",(function(t){var e;ew(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){$b(!1)}return $b(Ib(e)),e}),t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=Yb(e),h}(t.service_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.service_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_((function(n){var r=function(t,e,n,r){var i=new Qb(n,"POST",(function(t){var e=ew(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){$b(!1)}n||$b(!1);var i=Number(n);return $b(!isNaN(i)),new tw(i,r.size(),"final"===e)}),t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=Yb(e),i}(t.service_,t.location_,e,t.blob_),i=t.service_.makeRequest(r,n);t.request_=i,i.getPromise().then((function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new tw(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new tw(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new cb("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw db();var p=new Qb(n,"POST",(function(t,n){var i,s=ew(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Kb(e,o)(t,n):null,new tw(a,c,"final"===s,i)}),e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=Yb(t),p}(t.location_,t.service_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(a){return t.error_=a,void t.transition_("error")}var s=t.service_.makeRequest(o,i);t.request_=s,s.getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_("success")):t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_((function(e){var n=Zb(t.service_,t.location_,t.mappings_),r=t.service_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.transition_("success")}),t.metadataErrorHandler_)}))},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Jb(e,r,i),c=Gb(u,n),l=Lb.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw db();var h={name:u.fullPath},f=Vb(o),d=t.maxUploadRetryTime,p=new Qb(f,"POST",Kb(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=Yb(e),p}(t.service_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.service_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_("success")}),t.errorHandler_)}))},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case"canceling":case"pausing":this.state_=t,null!==this.request_&&this.request_.cancel();break;case"running":var e="paused"===this.state_;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case"paused":this.state_=t,this.notifyObservers_();break;case"canceled":this.error_=fb(),this.state_=t,this.notifyObservers_();break;case"error":case"success":this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case"pausing":this.transition_("paused");break;case"canceling":this.transition_("canceled");break;case"running":this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Tb(this.state_);return new rw(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new nw(e,n,r);return this.addObserver_(o),function(){i.removeObserver_(o)}},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach((function(e){t.notifyObserver_(e)}))},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(Tb(this.state_)){case Sb.SUCCESS:iw(this.resolve_.bind(null,this.snapshot))();break;case Sb.CANCELED:case Sb.ERROR:iw(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(Tb(this.state_)){case Sb.RUNNING:case Sb.PAUSED:t.next&&iw(t.next.bind(t,this.snapshot))();break;case Sb.SUCCESS:t.complete&&iw(t.complete.bind(t))();break;case Sb.CANCELED:case Sb.ERROR:t.error&&iw(t.error.bind(t,this.error_))();break;default:t.error&&iw(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){var t="paused"===this.state_||"pausing"===this.state_;return t&&this.transition_("running"),t},t.prototype.pause=function(){var t="running"===this.state_;return t&&this.transition_("pausing"),t},t.prototype.cancel=function(){var t="running"===this.state_||"pausing"===this.state_;return t&&this.transition_("canceling"),t},t}(),sw=function(){function t(t,e){this.service=t,this.location=e instanceof Fb?e:Fb.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return function(){if(zb)return zb;var t=[];t.push(new Hb("bucket")),t.push(new Hb("generation")),t.push(new Hb("metageneration")),t.push(new Hb("name","fullPath",!0));var e=new Hb("name");e.xform=function(t,e){return function(t){return!Ib(t)||t.length<2?t:Ub(t)}(e)},t.push(e);var n=new Hb("size");return n.xform=function(t,e){return Ob(e)?Number(e):e},t.push(n),t.push(new Hb("timeCreated")),t.push(new Hb("updated")),t.push(new Hb("md5Hash",null,!0)),t.push(new Hb("cacheControl",null,!0)),t.push(new Hb("contentDisposition",null,!0)),t.push(new Hb("contentEncoding",null,!0)),t.push(new Hb("contentLanguage",null,!0)),t.push(new Hb("contentType",null,!0)),t.push(new Hb("metadata","customMetadata",!0)),zb=t}()},t.prototype.child=function(t){var e=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(this.location.path,t),n=new Fb(this.location.bucket,e);return this.newRef(this.service,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new Fb(this.location.bucket,t);return this.newRef(this.service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new Fb(this.location.bucket,"");return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Ub(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),this.throwIfRoot_("put"),new ow(this,this.service,this.location,this.mappings(),new Lb(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=mb.RAW),this.throwIfRoot_("putString");var r=_b(e,t),i=Object.assign({},n);return!Ob(i.contentType)&&Ob(r.contentType)&&(i.contentType=r.contentType),new ow(this,this.service,this.location,this.mappings(),new Lb(r.data,!0),i)},t.prototype.delete=function(){var t=this;return this.throwIfRoot_("delete"),this.service.getAuthToken().then((function(e){var n=function(t,e){var n=Vb(e.fullServerUrl()),r=new Qb(n,"DELETE",(function(t,e){}),t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=Xb(e),r}(t.service,t.location);return t.service.makeRequest(n,e).getPromise()}))},t.prototype.listAll=function(){var t={prefixes:[],items:[]};return this.listAllHelper(t).then((function(){return t}))},t.prototype.listAllHelper=function(t,e){return Object(sb.b)(this,void 0,void 0,(function(){var n,r,i;return Object(sb.d)(this,(function(o){switch(o.label){case 0:return[4,this.list({pageToken:e})];case 1:return n=o.sent(),(r=t.prefixes).push.apply(r,n.prefixes),(i=t.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(t,n.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.prototype.list=function(t){var e=this,n=t||{};return"number"==typeof n.maxResults&&kb("options.maxResults",1,1e3,n.maxResults),this.service.getAuthToken().then((function(t){var r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=Vb(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new Qb(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=Mb(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new Fb(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t.makeStorageReference(new Fb(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return $b(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Yb(e),u}(e.service,e.location,"/",n.pageToken,n.maxResults);return e.service.makeRequest(r,t).getPromise()}))},t.prototype.getMetadata=function(){var t=this;return this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then((function(e){var n=Zb(t.service,t.location,t.mappings());return t.service.makeRequest(n,e).getPromise()}))},t.prototype.updateMetadata=function(t){var e=this;return this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then((function(n){var r=function(t,e,n,r){var i=Vb(e.fullServerUrl()),o=Gb(n,r),s=t.maxOperationRetryTime,a=new Qb(i,"PATCH",Kb(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Xb(e),a}(e.service,e.location,t,e.mappings());return e.service.makeRequest(r,n).getPromise()}))},t.prototype.getDownloadURL=function(){var t=this;return this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then((function(e){var n=function(t,e,n){var r=Vb(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new Qb(r,"GET",function(t,e){return function(n,r){var i=Wb(t,r,e);return $b(null!==i),function(t,e){var n=Mb(e);if(null===n)return null;if(!Ib(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.fullPath;return Vb("/b/"+i(t.bucket)+"/o/"+i(n))+qb({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=Xb(e),o}(t.service,t.location,t.mappings());return t.service.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new cb("no-download-url","The given file does not have any download URLs.");return t}))}))},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new cb("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),aw=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),uw=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(u){o(u)}else null!==s?((r=hb()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?pb():fb():new cb("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new cw(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new cw(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Nb.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new cw(s,n))}else{var a=n.getErrorCode()===Nb.ABORT;e(!1,new cw(!1,null,a))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(sb.g)([null,t],e));else{var r,o=u()||s;o?l.call.apply(l,Object(sb.g)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout((function(){s=!0,p(!0)}),r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),cw=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}(),lw=function(){function t(e,n,r,i){var o;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=e,this.authProvider_=n,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requests_=new Set,this.pool_=r,this.bucket_=null!=i?Fb.makeFromBucketSpec(i):t.extractBucket_(null===(o=this.app_)||void 0===o?void 0:o.options),this.internals_=new hw(this)}return t.extractBucket_=function(t){var e=null==t?void 0:t.storageBucket;return null==e?null:Fb.makeFromBucketSpec(e)},t.prototype.getAuthToken=function(){return Object(sb.b)(this,void 0,void 0,(function(){var t,e;return Object(sb.d)(this,(function(n){switch(n.label){case 0:return(t=this.authProvider_.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach((function(t){return t.cancel()})),this.requests_.clear()},t.prototype.makeStorageReference=function(t){return new sw(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this.deleted_)return new aw(pb());var r=function(t,e,n,r){var i=qb(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==iy.a?iy.a.SDK_VERSION:"AppManager")}(s),new uw(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this.appId_,e,this.pool_);return this.requests_.add(r),r.getPromise().then((function(){return n.requests_.delete(r)}),(function(){return n.requests_.delete(r)})),r},t.prototype.ref=function(t){if(/^[A-Za-z]+:\/\//.test(t))throw new cb("invalid-argument","Expected child path but got a URL, use refFromURL instead.");if(null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new sw(this,this.bucket_);return null!=t?e.child(t):e},t.prototype.refFromURL=function(t){if(!/^[A-Za-z]+:\/\//.test(t))throw new cb("invalid-argument","Expected full URL but got a child path, use ref instead.");try{Fb.makeFromUrl(t)}catch(e){throw new cb("invalid-argument","Expected valid full URL but got an invalid one.")}return new sw(this,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){kb("time",0,Number.POSITIVE_INFINITY,t),this.maxUploadRetryTime_=t},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(t){kb("time",0,Number.POSITIVE_INFINITY,t),this.maxOperationRetryTime_=t},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),t}(),hw=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},t}();function fw(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new lw(n,r,new Rb,e)}function dw(t){var e={TaskState:Sb,TaskEvent:Cb,StringFormat:mb,Storage:lw,Reference:sw};t.INTERNAL.registerComponent(new ub.a("storage",fw,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.4.1")}function pw(t){const e=function(t){return new v(e=>{const n=t=>e.next(t);return t.on("state_changed",n,t=>e.error(t),()=>{n(t.snapshot),e.complete()}),()=>t.cancel()})}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(j(t=>t.bytesTransferred/t.totalBytes*100))}}function gw(t,e,n){return{getDownloadURL:()=>$h(void 0).pipe(ty(e.outsideAngular),Pf(()=>t.getDownloadURL()),n),getMetadata:()=>$h(void 0).pipe(ty(e.outsideAngular),Pf(()=>t.getMetadata()),n),delete:()=>U(t.delete()),child:r=>gw(t.child(r),e,n),updateMetadata:e=>U(t.updateMetadata(e)),put:(e,n)=>pw(t.put(e,n)),putString:(e,n,r)=>pw(t.putString(e,n,r)),listAll:()=>U(t.listAll())}}dw(iy.a);const yw=new Ft("angularfire2.storageBucket");let mw=(()=>{class t{constructor(t,e,n,r,i){this.schedulers=new uy(i),this.keepUnstableUntilFirst=cy(this.schedulers),this.storage=i.runOutsideAngular(()=>{const r=py(t,i,e);return dw&&dw(iy.a),r.storage(n||void 0)})}ref(t){return gw(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return gw(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Qt(hy),Qt(fy,8),Qt(yw,8),Qt(Ou),Qt(qu))},t.\u0275prov=ct({factory:function(){return new t(Qt(hy),Qt(fy,8),Qt(yw,8),Qt(Ou),Qt(qu))},token:t,providedIn:"any"}),t})(),vw=(()=>{class t{}return t.\u0275mod=pe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[mw]}),t})(),_w=(()=>{class t{constructor(){this.title="demoApp"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=le({type:t,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"container-fluid"],[1,"row"],["role","main",1,"col-md-12"],[1,"inner-adjust"]],template:function(t,e){1&t&&(ys(0,"div",0),ys(1,"div",1),ys(2,"main",2),ys(3,"div",3),vs(4,"router-outlet"),ms(),ms(),ms(),ms())},directives:[cg],styles:[".btn[_ngcontent-%COMP%]{background-color:#1e90ff;border:none;color:#fff;padding:12px 16px;font-size:16px;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{background-color:#4169e1}"]}),t})(),bw=(()=>{class t{}return t.\u0275mod=pe({type:t,bootstrap:[_w]}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[],imports:[[Ol,Dm,Gh,Qh,yy.initializeApp(yc),ob,Nm,vw,z_,cm.forRoot()]]}),t})();(function(){if(wr)throw new Error("Cannot enable prod mode after platform setup.");br=!1})(),Sl().bootstrapModule(bw).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);